{
  "components": {
    "schemas": {
      "ActiveCarrierOut": {
        "properties": {
          "code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "priority": {
            "title": "Priority",
            "type": "integer"
          },
          "provider_id": {
            "title": "Provider Id",
            "type": "integer"
          }
        },
        "required": [
          "provider_id",
          "name",
          "priority"
        ],
        "title": "ActiveCarrierOut",
        "type": "object"
      },
      "AlertItem": {
        "properties": {
          "code": {
            "title": "Code",
            "type": "string"
          },
          "count": {
            "title": "Count",
            "type": "integer"
          },
          "domain": {
            "title": "Domain",
            "type": "string"
          },
          "message": {
            "title": "Message",
            "type": "string"
          },
          "meta": {
            "additionalProperties": true,
            "default": {},
            "title": "Meta",
            "type": "object"
          },
          "severity": {
            "title": "Severity",
            "type": "string"
          },
          "threshold": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Threshold"
          },
          "title": {
            "title": "Title",
            "type": "string"
          }
        },
        "required": [
          "severity",
          "domain",
          "code",
          "title",
          "message",
          "count"
        ],
        "title": "AlertItem",
        "type": "object"
      },
      "AlertsResponse": {
        "properties": {
          "alerts": {
            "default": [],
            "items": {
              "$ref": "#/components/schemas/AlertItem"
            },
            "title": "Alerts",
            "type": "array"
          },
          "day": {
            "format": "date",
            "title": "Day",
            "type": "string"
          },
          "platform": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Platform"
          }
        },
        "required": [
          "day"
        ],
        "title": "AlertsResponse",
        "type": "object"
      },
      "AvailabilityCellOut": {
        "properties": {
          "available": {
            "title": "Available",
            "type": "integer"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "shortage": {
            "title": "Shortage",
            "type": "integer"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "warehouse_id",
          "item_id",
          "available",
          "shortage",
          "status"
        ],
        "title": "AvailabilityCellOut",
        "type": "object"
      },
      "AvailabilityLineOut": {
        "properties": {
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "req_qty": {
            "title": "Req Qty",
            "type": "integer"
          },
          "sku_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sku Id"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          }
        },
        "required": [
          "item_id",
          "req_qty"
        ],
        "title": "AvailabilityLineOut",
        "type": "object"
      },
      "BindWarehouseIn": {
        "properties": {
          "is_default": {
            "default": false,
            "title": "Is Default",
            "type": "boolean"
          },
          "is_top": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "description": "是否主仓；若为 null，由后端按 is_default 推导",
            "title": "Is Top"
          },
          "priority": {
            "default": 100,
            "maximum": 100000.0,
            "minimum": 0.0,
            "title": "Priority",
            "type": "integer"
          },
          "warehouse_id": {
            "minimum": 1.0,
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "warehouse_id"
        ],
        "title": "BindWarehouseIn",
        "type": "object"
      },
      "BindWarehouseOut": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "title": "Data",
            "type": "object"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "BindWarehouseOut",
        "type": "object"
      },
      "BindingDeleteOut": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "title": "Data",
            "type": "object"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "BindingDeleteOut",
        "type": "object"
      },
      "BindingUpdateIn": {
        "properties": {
          "is_default": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Default"
          },
          "is_top": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Top"
          },
          "priority": {
            "anyOf": [
              {
                "maximum": 100000.0,
                "minimum": 0.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Priority"
          }
        },
        "title": "BindingUpdateIn",
        "type": "object"
      },
      "BindingUpdateOut": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "title": "Data",
            "type": "object"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "BindingUpdateOut",
        "type": "object"
      },
      "CandidateWarehouseOut": {
        "description": "候选仓（来自省级路由命中后的集合）",
        "properties": {
          "priority": {
            "default": 100,
            "title": "Priority",
            "type": "integer"
          },
          "warehouse_active": {
            "default": true,
            "title": "Warehouse Active",
            "type": "boolean"
          },
          "warehouse_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Code"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          },
          "warehouse_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Name"
          }
        },
        "required": [
          "warehouse_id"
        ],
        "title": "CandidateWarehouseOut",
        "type": "object"
      },
      "CartLineItemIn": {
        "properties": {
          "checked": {
            "default": false,
            "title": "Checked",
            "type": "boolean"
          },
          "city": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City"
          },
          "detail": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detail"
          },
          "district": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "District"
          },
          "if_version": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "If Version"
          },
          "province": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Province"
          },
          "qty": {
            "default": 0,
            "title": "Qty",
            "type": "integer"
          },
          "receiver_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Receiver Name"
          },
          "receiver_phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Receiver Phone"
          },
          "row_no": {
            "maximum": 6.0,
            "minimum": 1.0,
            "title": "Row No",
            "type": "integer"
          },
          "zipcode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Zipcode"
          }
        },
        "required": [
          "row_no"
        ],
        "title": "CartLineItemIn",
        "type": "object"
      },
      "CleanupShellSchemesOut": {
        "properties": {
          "candidates": {
            "items": {
              "$ref": "#/components/schemas/ShellSchemeRow"
            },
            "title": "Candidates",
            "type": "array"
          },
          "candidates_n": {
            "title": "Candidates N",
            "type": "integer"
          },
          "deleted_n": {
            "default": 0,
            "title": "Deleted N",
            "type": "integer"
          },
          "dry_run": {
            "title": "Dry Run",
            "type": "boolean"
          },
          "include_surcharge_only": {
            "title": "Include Surcharge Only",
            "type": "boolean"
          },
          "limit": {
            "title": "Limit",
            "type": "integer"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "dry_run",
          "include_surcharge_only",
          "limit",
          "candidates_n"
        ],
        "title": "CleanupShellSchemesOut",
        "type": "object"
      },
      "CopyZoneBracketsIn": {
        "properties": {
          "active_policy": {
            "default": "preserve",
            "title": "Active Policy",
            "type": "string"
          },
          "conflict_policy": {
            "default": "skip",
            "title": "Conflict Policy",
            "type": "string"
          },
          "include_inactive": {
            "default": false,
            "title": "Include Inactive",
            "type": "boolean"
          },
          "pricing_modes": {
            "items": {
              "type": "string"
            },
            "title": "Pricing Modes",
            "type": "array"
          },
          "source_zone_id": {
            "minimum": 1.0,
            "title": "Source Zone Id",
            "type": "integer"
          }
        },
        "required": [
          "source_zone_id"
        ],
        "title": "CopyZoneBracketsIn",
        "type": "object"
      },
      "CopyZoneBracketsOut": {
        "properties": {
          "active_policy": {
            "title": "Active Policy",
            "type": "string"
          },
          "conflict_policy": {
            "title": "Conflict Policy",
            "type": "string"
          },
          "created": {
            "items": {
              "$ref": "#/components/schemas/ZoneBracketOut"
            },
            "title": "Created",
            "type": "array"
          },
          "failed": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Failed",
            "type": "array"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          },
          "skipped": {
            "items": {
              "$ref": "#/components/schemas/ZoneBracketOut"
            },
            "title": "Skipped",
            "type": "array"
          },
          "source_zone_id": {
            "title": "Source Zone Id",
            "type": "integer"
          },
          "summary": {
            "$ref": "#/components/schemas/CopyZoneBracketsSummary"
          },
          "target_zone_id": {
            "title": "Target Zone Id",
            "type": "integer"
          },
          "updated": {
            "items": {
              "$ref": "#/components/schemas/ZoneBracketOut"
            },
            "title": "Updated",
            "type": "array"
          }
        },
        "required": [
          "target_zone_id",
          "source_zone_id",
          "conflict_policy",
          "active_policy",
          "summary"
        ],
        "title": "CopyZoneBracketsOut",
        "type": "object"
      },
      "CopyZoneBracketsSummary": {
        "properties": {
          "created_count": {
            "title": "Created Count",
            "type": "integer"
          },
          "failed_count": {
            "title": "Failed Count",
            "type": "integer"
          },
          "skipped_count": {
            "title": "Skipped Count",
            "type": "integer"
          },
          "source_count": {
            "title": "Source Count",
            "type": "integer"
          },
          "updated_count": {
            "title": "Updated Count",
            "type": "integer"
          }
        },
        "required": [
          "source_count",
          "created_count",
          "updated_count",
          "skipped_count",
          "failed_count"
        ],
        "title": "CopyZoneBracketsSummary",
        "type": "object"
      },
      "CountRequest": {
        "description": "盘点校正请求（批次级）：\n  - 必填：item_id, location_id, qty(绝对量), ref\n  - batch_code：主线 A 收紧合同后：\n      * has_shelf_life=true 的商品：必须提供（非空且禁止 'none'）\n      * has_shelf_life is not true：必须为 null（禁止传任何值/假码）\n  - production_date / expiry_date：由 API 合同层按 item.has_shelf_life 决定是否必须\n  - occurred_at 使用 UTC 时间戳（时区感知），默认当前时间",
        "properties": {
          "batch_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "批次码（批次语义由 API 合同层判定）",
            "title": "Batch Code"
          },
          "expiry_date": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "有效期（可选）",
            "title": "Expiry Date"
          },
          "item_id": {
            "description": "商品ID",
            "title": "Item Id",
            "type": "integer"
          },
          "location_id": {
            "description": "库位ID",
            "title": "Location Id",
            "type": "integer"
          },
          "occurred_at": {
            "description": "盘点发生时间（UTC）；默认当前时间",
            "format": "date-time",
            "title": "Occurred At",
            "type": "string"
          },
          "production_date": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "生产日期（可选）",
            "title": "Production Date"
          },
          "qty": {
            "description": "盘点后的实际数量（绝对量）",
            "minimum": 0.0,
            "title": "Qty",
            "type": "integer"
          },
          "ref": {
            "description": "业务参考号（用于台账幂等）",
            "title": "Ref",
            "type": "string"
          }
        },
        "required": [
          "item_id",
          "location_id",
          "qty",
          "ref"
        ],
        "title": "CountRequest",
        "type": "object"
      },
      "CountResponse": {
        "properties": {
          "after": {
            "title": "After",
            "type": "integer"
          },
          "batch_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Batch Code"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "location_id": {
            "title": "Location Id",
            "type": "integer"
          },
          "occurred_at": {
            "format": "date-time",
            "title": "Occurred At",
            "type": "string"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          }
        },
        "required": [
          "after",
          "ref",
          "item_id",
          "location_id",
          "batch_code",
          "occurred_at"
        ],
        "title": "CountResponse",
        "type": "object"
      },
      "DailyPurchaseReportItem": {
        "properties": {
          "day": {
            "format": "date",
            "title": "Day",
            "type": "string"
          },
          "order_count": {
            "title": "Order Count",
            "type": "integer"
          },
          "total_amount": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Amount"
          },
          "total_qty_cases": {
            "title": "Total Qty Cases",
            "type": "integer"
          },
          "total_units": {
            "title": "Total Units",
            "type": "integer"
          }
        },
        "required": [
          "day",
          "order_count",
          "total_qty_cases",
          "total_units"
        ],
        "title": "DailyPurchaseReportItem",
        "type": "object"
      },
      "DefaultWarehouseOut": {
        "properties": {
          "data": {
            "additionalProperties": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ]
            },
            "title": "Data",
            "type": "object"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "DefaultWarehouseOut",
        "type": "object"
      },
      "DestAdjustmentOut": {
        "properties": {
          "active": {
            "title": "Active",
            "type": "boolean"
          },
          "amount": {
            "title": "Amount",
            "type": "number"
          },
          "city": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City"
          },
          "city_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City Code"
          },
          "city_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City Name"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "priority": {
            "title": "Priority",
            "type": "integer"
          },
          "province": {
            "title": "Province",
            "type": "string"
          },
          "province_code": {
            "title": "Province Code",
            "type": "string"
          },
          "province_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Province Name"
          },
          "scheme_id": {
            "title": "Scheme Id",
            "type": "integer"
          },
          "scope": {
            "title": "Scope",
            "type": "string"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          }
        },
        "required": [
          "id",
          "scheme_id",
          "scope",
          "province_code",
          "province",
          "amount",
          "active",
          "priority",
          "created_at",
          "updated_at"
        ],
        "title": "DestAdjustmentOut",
        "type": "object"
      },
      "DestAdjustmentUpdateIn": {
        "properties": {
          "active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active"
          },
          "amount": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Amount"
          },
          "city_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City Code"
          },
          "city_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City Name"
          },
          "priority": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Priority"
          },
          "province_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Province Code"
          },
          "province_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Province Name"
          },
          "scope": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Scope"
          }
        },
        "title": "DestAdjustmentUpdateIn",
        "type": "object"
      },
      "DestAdjustmentUpsertIn": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "amount": {
            "title": "Amount",
            "type": "number"
          },
          "city_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City Code"
          },
          "city_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City Name"
          },
          "priority": {
            "default": 100,
            "title": "Priority",
            "type": "integer"
          },
          "province_code": {
            "title": "Province Code",
            "type": "string"
          },
          "province_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Province Name"
          },
          "scope": {
            "description": "province|city",
            "title": "Scope",
            "type": "string"
          }
        },
        "required": [
          "scope",
          "province_code",
          "amount"
        ],
        "title": "DestAdjustmentUpsertIn",
        "type": "object"
      },
      "DevDemoOrderOut": {
        "properties": {
          "ext_order_no": {
            "title": "Ext Order No",
            "type": "string"
          },
          "order_id": {
            "title": "Order Id",
            "type": "integer"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trace Id"
          }
        },
        "required": [
          "order_id",
          "platform",
          "shop_id",
          "ext_order_no"
        ],
        "title": "DevDemoOrderOut",
        "type": "object"
      },
      "DevEnsureWarehouseOut": {
        "properties": {
          "ext_order_no": {
            "title": "Ext Order No",
            "type": "string"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          },
          "order_id": {
            "title": "Order Id",
            "type": "integer"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          },
          "source": {
            "title": "Source",
            "type": "string"
          },
          "store_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Store Id"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Id"
          }
        },
        "required": [
          "ok",
          "order_id",
          "platform",
          "shop_id",
          "ext_order_no",
          "source"
        ],
        "title": "DevEnsureWarehouseOut",
        "type": "object"
      },
      "DevFakeOrdersGenerateIn": {
        "properties": {
          "generate": {
            "$ref": "#/components/schemas/FakeGenerateParams"
          },
          "seed": {
            "additionalProperties": true,
            "title": "Seed",
            "type": "object"
          }
        },
        "required": [
          "seed"
        ],
        "title": "DevFakeOrdersGenerateIn",
        "type": "object"
      },
      "DevFakeOrdersGenerateOut": {
        "properties": {
          "batch_id": {
            "title": "Batch Id",
            "type": "string"
          },
          "gen_stats": {
            "additionalProperties": true,
            "title": "Gen Stats",
            "type": "object"
          },
          "orders": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Orders",
            "type": "array"
          }
        },
        "required": [
          "batch_id",
          "orders",
          "gen_stats"
        ],
        "title": "DevFakeOrdersGenerateOut",
        "type": "object"
      },
      "DevFakeOrdersRunIn": {
        "properties": {
          "generate": {
            "$ref": "#/components/schemas/FakeGenerateParams"
          },
          "seed": {
            "additionalProperties": true,
            "title": "Seed",
            "type": "object"
          },
          "watch_filled_codes": {
            "items": {
              "type": "string"
            },
            "title": "Watch Filled Codes",
            "type": "array"
          },
          "with_replay": {
            "default": true,
            "title": "With Replay",
            "type": "boolean"
          }
        },
        "required": [
          "seed"
        ],
        "title": "DevFakeOrdersRunIn",
        "type": "object"
      },
      "DevFakeOrdersRunOut": {
        "properties": {
          "gen_stats": {
            "additionalProperties": true,
            "title": "Gen Stats",
            "type": "object"
          },
          "report": {
            "additionalProperties": true,
            "title": "Report",
            "type": "object"
          }
        },
        "required": [
          "report",
          "gen_stats"
        ],
        "title": "DevFakeOrdersRunOut",
        "type": "object"
      },
      "DevOrderFacts": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/DevOrderItemFact"
            },
            "title": "Items",
            "type": "array"
          },
          "order": {
            "$ref": "#/components/schemas/DevOrderInfo"
          }
        },
        "required": [
          "order"
        ],
        "title": "DevOrderFacts",
        "type": "object"
      },
      "DevOrderInfo": {
        "properties": {
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "ext_order_no": {
            "title": "Ext Order No",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "order_amount": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Order Amount"
          },
          "pay_amount": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pay Amount"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trace Id"
          },
          "updated_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Id"
          }
        },
        "required": [
          "id",
          "platform",
          "shop_id",
          "ext_order_no",
          "created_at"
        ],
        "title": "DevOrderInfo",
        "type": "object"
      },
      "DevOrderItemFact": {
        "properties": {
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "qty_ordered": {
            "title": "Qty Ordered",
            "type": "integer"
          },
          "qty_remaining_refundable": {
            "title": "Qty Remaining Refundable",
            "type": "integer"
          },
          "qty_returned": {
            "title": "Qty Returned",
            "type": "integer"
          },
          "qty_shipped": {
            "title": "Qty Shipped",
            "type": "integer"
          },
          "sku_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sku Id"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          }
        },
        "required": [
          "item_id",
          "qty_ordered",
          "qty_shipped",
          "qty_returned",
          "qty_remaining_refundable"
        ],
        "title": "DevOrderItemFact",
        "type": "object"
      },
      "DevOrderReconcileLine": {
        "properties": {
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "qty_ordered": {
            "title": "Qty Ordered",
            "type": "integer"
          },
          "qty_returned": {
            "title": "Qty Returned",
            "type": "integer"
          },
          "qty_shipped": {
            "title": "Qty Shipped",
            "type": "integer"
          },
          "remaining_refundable": {
            "title": "Remaining Refundable",
            "type": "integer"
          },
          "sku_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sku Id"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          }
        },
        "required": [
          "item_id",
          "qty_ordered",
          "qty_shipped",
          "qty_returned",
          "remaining_refundable"
        ],
        "title": "DevOrderReconcileLine",
        "type": "object"
      },
      "DevOrderReconcileResultModel": {
        "properties": {
          "ext_order_no": {
            "title": "Ext Order No",
            "type": "string"
          },
          "issues": {
            "items": {
              "type": "string"
            },
            "title": "Issues",
            "type": "array"
          },
          "lines": {
            "items": {
              "$ref": "#/components/schemas/DevOrderReconcileLine"
            },
            "title": "Lines",
            "type": "array"
          },
          "order_id": {
            "title": "Order Id",
            "type": "integer"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          }
        },
        "required": [
          "order_id",
          "platform",
          "shop_id",
          "ext_order_no"
        ],
        "title": "DevOrderReconcileResultModel",
        "type": "object"
      },
      "DevOrderSummary": {
        "properties": {
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "ext_order_no": {
            "title": "Ext Order No",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "order_amount": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Order Amount"
          },
          "pay_amount": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pay Amount"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "updated_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Id"
          }
        },
        "required": [
          "id",
          "platform",
          "shop_id",
          "ext_order_no",
          "created_at"
        ],
        "title": "DevOrderSummary",
        "type": "object"
      },
      "DevOrderView": {
        "properties": {
          "order": {
            "$ref": "#/components/schemas/DevOrderInfo"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "订单关联 trace_id，可直接跳转生命周期/trace 页面",
            "title": "Trace Id"
          }
        },
        "required": [
          "order"
        ],
        "title": "DevOrderView",
        "type": "object"
      },
      "DevReconcileRangeResult": {
        "properties": {
          "count": {
            "title": "Count",
            "type": "integer"
          },
          "order_ids": {
            "items": {
              "type": "integer"
            },
            "title": "Order Ids",
            "type": "array"
          }
        },
        "required": [
          "count"
        ],
        "title": "DevReconcileRangeResult",
        "type": "object"
      },
      "ExplainAnchor": {
        "properties": {
          "ref": {
            "title": "Ref",
            "type": "string"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trace Id"
          }
        },
        "required": [
          "ref"
        ],
        "title": "ExplainAnchor",
        "type": "object"
      },
      "ExplainLedgerRow": {
        "properties": {
          "after_qty": {
            "title": "After Qty",
            "type": "integer"
          },
          "batch_code": {
            "title": "Batch Code",
            "type": "string"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "delta": {
            "title": "Delta",
            "type": "integer"
          },
          "expiry_date": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expiry Date"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "occurred_at": {
            "format": "date-time",
            "title": "Occurred At",
            "type": "string"
          },
          "production_date": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Production Date"
          },
          "reason": {
            "title": "Reason",
            "type": "string"
          },
          "reason_canon": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reason Canon"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          },
          "ref_line": {
            "title": "Ref Line",
            "type": "integer"
          },
          "sub_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sub Reason"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trace Id"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "id",
          "warehouse_id",
          "item_id",
          "batch_code",
          "reason",
          "ref",
          "ref_line",
          "delta",
          "after_qty",
          "occurred_at",
          "created_at"
        ],
        "title": "ExplainLedgerRow",
        "type": "object"
      },
      "ExplainPurchaseOrder": {
        "properties": {
          "closed_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Closed At"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "last_received_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Received At"
          },
          "lines": {
            "default": [],
            "items": {
              "$ref": "#/components/schemas/ExplainPurchaseOrderLine"
            },
            "title": "Lines",
            "type": "array"
          },
          "purchase_time": {
            "format": "date-time",
            "title": "Purchase Time",
            "type": "string"
          },
          "purchaser": {
            "title": "Purchaser",
            "type": "string"
          },
          "remark": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remark"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "supplier_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Id"
          },
          "supplier_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Name"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "id",
          "warehouse_id",
          "purchaser",
          "purchase_time",
          "status",
          "created_at",
          "updated_at"
        ],
        "title": "ExplainPurchaseOrder",
        "type": "object"
      },
      "ExplainPurchaseOrderLine": {
        "properties": {
          "base_uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Uom"
          },
          "category": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Category"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "item_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Name"
          },
          "item_sku": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Sku"
          },
          "line_no": {
            "title": "Line No",
            "type": "integer"
          },
          "po_id": {
            "title": "Po Id",
            "type": "integer"
          },
          "purchase_uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Purchase Uom"
          },
          "qty_ordered": {
            "title": "Qty Ordered",
            "type": "integer"
          },
          "qty_received": {
            "title": "Qty Received",
            "type": "integer"
          },
          "remark": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remark"
          },
          "spec_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Spec Text"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "units_per_case": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Units Per Case"
          }
        },
        "required": [
          "id",
          "po_id",
          "line_no",
          "item_id",
          "qty_ordered",
          "qty_received",
          "status"
        ],
        "title": "ExplainPurchaseOrderLine",
        "type": "object"
      },
      "ExplainReceipt": {
        "properties": {
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "occurred_at": {
            "format": "date-time",
            "title": "Occurred At",
            "type": "string"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          },
          "remark": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remark"
          },
          "source_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Id"
          },
          "source_type": {
            "title": "Source Type",
            "type": "string"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "supplier_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Id"
          },
          "supplier_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Name"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trace Id"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "id",
          "warehouse_id",
          "source_type",
          "ref",
          "status",
          "occurred_at",
          "created_at",
          "updated_at"
        ],
        "title": "ExplainReceipt",
        "type": "object"
      },
      "ExplainReceiptLine": {
        "properties": {
          "base_uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Uom"
          },
          "batch_code": {
            "title": "Batch Code",
            "type": "string"
          },
          "category": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Category"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "expiry_date": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expiry Date"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "item_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Name"
          },
          "item_sku": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Sku"
          },
          "line_amount": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Line Amount"
          },
          "line_no": {
            "title": "Line No",
            "type": "integer"
          },
          "po_line_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Po Line Id"
          },
          "production_date": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Production Date"
          },
          "purchase_uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Purchase Uom"
          },
          "qty_received": {
            "title": "Qty Received",
            "type": "integer"
          },
          "qty_units": {
            "title": "Qty Units",
            "type": "integer"
          },
          "receipt_id": {
            "title": "Receipt Id",
            "type": "integer"
          },
          "remark": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remark"
          },
          "spec_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Spec Text"
          },
          "unit_cost": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Unit Cost"
          },
          "units_per_case": {
            "title": "Units Per Case",
            "type": "integer"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          }
        },
        "required": [
          "id",
          "receipt_id",
          "line_no",
          "item_id",
          "batch_code",
          "qty_received",
          "units_per_case",
          "qty_units",
          "created_at",
          "updated_at"
        ],
        "title": "ExplainReceiptLine",
        "type": "object"
      },
      "FakeGenerateParams": {
        "properties": {
          "count": {
            "default": 10,
            "maximum": 200.0,
            "minimum": 1.0,
            "title": "Count",
            "type": "integer"
          },
          "lines_max": {
            "default": 3,
            "maximum": 10.0,
            "minimum": 1.0,
            "title": "Lines Max",
            "type": "integer"
          },
          "lines_min": {
            "default": 1,
            "maximum": 10.0,
            "minimum": 1.0,
            "title": "Lines Min",
            "type": "integer"
          },
          "qty_max": {
            "default": 3,
            "maximum": 100.0,
            "minimum": 1.0,
            "title": "Qty Max",
            "type": "integer"
          },
          "qty_min": {
            "default": 1,
            "maximum": 100.0,
            "minimum": 1.0,
            "title": "Qty Min",
            "type": "integer"
          },
          "rng_seed": {
            "default": 42,
            "maximum": 10000000.0,
            "minimum": 0.0,
            "title": "Rng Seed",
            "type": "integer"
          }
        },
        "title": "FakeGenerateParams",
        "type": "object"
      },
      "FakeOrderStatusIn": {
        "properties": {
          "delivered_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "（可选）平台侧签收时间；提供时会用于 shipping_records.delivery_time",
            "title": "Delivered At"
          },
          "ext_order_no": {
            "description": "平台订单号 / 外部订单号",
            "minLength": 1,
            "title": "Ext Order No",
            "type": "string"
          },
          "extras": {
            "additionalProperties": true,
            "description": "（可选）附加字段，将原样写入 payload，例如 order_status_desc / refund_status 等",
            "title": "Extras",
            "type": "object"
          },
          "platform": {
            "description": "平台标识，例如 PDD / JD",
            "maxLength": 32,
            "minLength": 1,
            "title": "Platform",
            "type": "string"
          },
          "platform_status": {
            "description": "平台订单状态（原始文案/状态码），以后会映射为内部 DELIVERED / RETURNED / LOST 等",
            "title": "Platform Status",
            "type": "string"
          },
          "shop_id": {
            "description": "店铺 ID",
            "minLength": 1,
            "title": "Shop Id",
            "type": "string"
          }
        },
        "required": [
          "platform",
          "shop_id",
          "ext_order_no",
          "platform_status"
        ],
        "title": "FakeOrderStatusIn",
        "type": "object"
      },
      "FakeOrderStatusOut": {
        "properties": {
          "dedup_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Dedup Key"
          },
          "ext_order_no": {
            "title": "Ext Order No",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "occurred_at": {
            "format": "date-time",
            "title": "Occurred At",
            "type": "string"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "platform_status": {
            "title": "Platform Status",
            "type": "string"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          }
        },
        "required": [
          "id",
          "platform",
          "shop_id",
          "ext_order_no",
          "platform_status",
          "occurred_at"
        ],
        "title": "FakeOrderStatusOut",
        "type": "object"
      },
      "FefoItemRisk": {
        "properties": {
          "fefo_hit_rate_7d": {
            "title": "Fefo Hit Rate 7D",
            "type": "number"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "near_expiry_batches": {
            "title": "Near Expiry Batches",
            "type": "integer"
          },
          "risk_score": {
            "title": "Risk Score",
            "type": "number"
          },
          "sku": {
            "title": "Sku",
            "type": "string"
          }
        },
        "required": [
          "item_id",
          "sku",
          "name",
          "near_expiry_batches",
          "fefo_hit_rate_7d",
          "risk_score"
        ],
        "title": "FefoItemRisk",
        "type": "object"
      },
      "FefoRiskMetricsResponse": {
        "properties": {
          "as_of": {
            "format": "date",
            "title": "As Of",
            "type": "string"
          },
          "items": {
            "items": {
              "$ref": "#/components/schemas/FefoItemRisk"
            },
            "title": "Items",
            "type": "array"
          }
        },
        "required": [
          "as_of",
          "items"
        ],
        "title": "FefoRiskMetricsResponse",
        "type": "object"
      },
      "FinanceDailyRow": {
        "properties": {
          "day": {
            "format": "date",
            "title": "Day",
            "type": "string"
          },
          "fulfillment_ratio": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fulfillment Ratio"
          },
          "gross_margin": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Gross Margin"
          },
          "gross_profit": {
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Gross Profit",
            "type": "string"
          },
          "purchase_cost": {
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Purchase Cost",
            "type": "string"
          },
          "revenue": {
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Revenue",
            "type": "string"
          },
          "shipping_cost": {
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Shipping Cost",
            "type": "string"
          }
        },
        "required": [
          "day",
          "revenue",
          "purchase_cost",
          "shipping_cost",
          "gross_profit"
        ],
        "title": "FinanceDailyRow",
        "type": "object"
      },
      "FinanceShopRow": {
        "properties": {
          "fulfillment_ratio": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fulfillment Ratio"
          },
          "gross_margin": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Gross Margin"
          },
          "gross_profit": {
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Gross Profit",
            "type": "string"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "purchase_cost": {
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Purchase Cost",
            "type": "string"
          },
          "revenue": {
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Revenue",
            "type": "string"
          },
          "shipping_cost": {
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Shipping Cost",
            "type": "string"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          }
        },
        "required": [
          "platform",
          "shop_id",
          "revenue",
          "purchase_cost",
          "shipping_cost",
          "gross_profit"
        ],
        "title": "FinanceShopRow",
        "type": "object"
      },
      "FinanceSkuRow": {
        "properties": {
          "gross_margin": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Gross Margin"
          },
          "gross_profit": {
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Gross Profit",
            "type": "string"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "purchase_cost": {
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Purchase Cost",
            "type": "string"
          },
          "qty_sold": {
            "title": "Qty Sold",
            "type": "integer"
          },
          "revenue": {
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Revenue",
            "type": "string"
          },
          "sku_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sku Id"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          }
        },
        "required": [
          "item_id",
          "qty_sold",
          "revenue",
          "purchase_cost",
          "gross_profit"
        ],
        "title": "FinanceSkuRow",
        "type": "object"
      },
      "FskuComponentIn": {
        "properties": {
          "item_id": {
            "minimum": 1.0,
            "title": "Item Id",
            "type": "integer"
          },
          "qty": {
            "minimum": 1.0,
            "title": "Qty",
            "type": "integer"
          },
          "role": {
            "enum": [
              "primary",
              "gift"
            ],
            "title": "Role",
            "type": "string"
          }
        },
        "required": [
          "item_id",
          "qty",
          "role"
        ],
        "title": "FskuComponentIn",
        "type": "object"
      },
      "FskuComponentOut": {
        "properties": {
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "qty": {
            "title": "Qty",
            "type": "integer"
          },
          "role": {
            "enum": [
              "primary",
              "gift"
            ],
            "title": "Role",
            "type": "string"
          }
        },
        "required": [
          "item_id",
          "qty",
          "role"
        ],
        "title": "FskuComponentOut",
        "type": "object"
      },
      "FskuComponentsReplaceIn": {
        "properties": {
          "components": {
            "items": {
              "$ref": "#/components/schemas/FskuComponentIn"
            },
            "title": "Components",
            "type": "array"
          }
        },
        "required": [
          "components"
        ],
        "title": "FskuComponentsReplaceIn",
        "type": "object"
      },
      "FskuCreateIn": {
        "properties": {
          "code": {
            "anyOf": [
              {
                "maxLength": 64,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "name": {
            "maxLength": 200,
            "minLength": 1,
            "title": "Name",
            "type": "string"
          },
          "shape": {
            "default": "bundle",
            "enum": [
              "single",
              "bundle"
            ],
            "title": "Shape",
            "type": "string"
          }
        },
        "required": [
          "name"
        ],
        "title": "FskuCreateIn",
        "type": "object"
      },
      "FskuDetailOut": {
        "properties": {
          "code": {
            "title": "Code",
            "type": "string"
          },
          "components": {
            "items": {
              "$ref": "#/components/schemas/FskuComponentOut"
            },
            "title": "Components",
            "type": "array"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "published_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Published At"
          },
          "retired_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Retired At"
          },
          "shape": {
            "enum": [
              "single",
              "bundle"
            ],
            "title": "Shape",
            "type": "string"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          }
        },
        "required": [
          "id",
          "code",
          "name",
          "shape",
          "status",
          "published_at",
          "retired_at",
          "created_at",
          "updated_at",
          "components"
        ],
        "title": "FskuDetailOut",
        "type": "object"
      },
      "FskuListItem": {
        "properties": {
          "code": {
            "title": "Code",
            "type": "string"
          },
          "components_summary": {
            "title": "Components Summary",
            "type": "string"
          },
          "components_summary_name": {
            "title": "Components Summary Name",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "published_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Published At"
          },
          "retired_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Retired At"
          },
          "shape": {
            "enum": [
              "single",
              "bundle"
            ],
            "title": "Shape",
            "type": "string"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          }
        },
        "required": [
          "id",
          "code",
          "name",
          "shape",
          "status",
          "updated_at",
          "published_at",
          "retired_at",
          "components_summary",
          "components_summary_name"
        ],
        "title": "FskuListItem",
        "type": "object"
      },
      "FskuListOut": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/FskuListItem"
            },
            "title": "Items",
            "type": "array"
          },
          "limit": {
            "title": "Limit",
            "type": "integer"
          },
          "offset": {
            "title": "Offset",
            "type": "integer"
          },
          "total": {
            "title": "Total",
            "type": "integer"
          }
        },
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "title": "FskuListOut",
        "type": "object"
      },
      "FskuLiteOut": {
        "properties": {
          "code": {
            "title": "Code",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "status": {
            "title": "Status",
            "type": "string"
          }
        },
        "required": [
          "id",
          "code",
          "name",
          "status"
        ],
        "title": "FskuLiteOut",
        "type": "object"
      },
      "FskuNameUpdateIn": {
        "properties": {
          "name": {
            "maxLength": 200,
            "minLength": 1,
            "title": "Name",
            "type": "string"
          }
        },
        "required": [
          "name"
        ],
        "title": "FskuNameUpdateIn",
        "type": "object"
      },
      "FulfillmentDebugAddress": {
        "properties": {
          "city": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City"
          },
          "detail": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detail"
          },
          "district": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "District"
          },
          "province": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Province"
          }
        },
        "title": "FulfillmentDebugAddress",
        "type": "object"
      },
      "FulfillmentDebugOut": {
        "description": "v4-min：只回答“归属仓是谁”\n- 不返回 fulfillment_status / blocked_reasons（blocked 事实由订单履约快照表承载）\n- 不返回 candidates / scan / check（全部砍掉）",
        "properties": {
          "address": {
            "$ref": "#/components/schemas/FulfillmentDebugAddress"
          },
          "ext_order_no": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ext Order No"
          },
          "order_id": {
            "title": "Order Id",
            "type": "integer"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "service": {
            "$ref": "#/components/schemas/FulfillmentServiceDebug"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          },
          "summary": {
            "additionalProperties": true,
            "title": "Summary",
            "type": "object"
          },
          "version": {
            "default": "v4-min",
            "title": "Version",
            "type": "string"
          }
        },
        "required": [
          "order_id",
          "platform",
          "shop_id"
        ],
        "title": "FulfillmentDebugOut",
        "type": "object"
      },
      "FulfillmentMissingLineOut": {
        "properties": {
          "available": {
            "title": "Available",
            "type": "integer"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "need": {
            "title": "Need",
            "type": "integer"
          }
        },
        "required": [
          "item_id",
          "need",
          "available"
        ],
        "title": "FulfillmentMissingLineOut",
        "type": "object"
      },
      "FulfillmentScanWarehouseOut": {
        "description": "每个候选仓的整单同仓可履约扫描结果：\n- OK / INSUFFICIENT\n- missing：缺口明细（可解释证据）",
        "properties": {
          "missing": {
            "items": {
              "$ref": "#/components/schemas/FulfillmentMissingLineOut"
            },
            "title": "Missing",
            "type": "array"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "warehouse_id",
          "status"
        ],
        "title": "FulfillmentScanWarehouseOut",
        "type": "object"
      },
      "FulfillmentServiceDebug": {
        "description": "服务仓命中诊断（当前配置事实）：\n- hit=False：city_code 未配置服务仓\n- hit=True ：给出 service_warehouse_id",
        "properties": {
          "city_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City Code"
          },
          "hit": {
            "default": false,
            "title": "Hit",
            "type": "boolean"
          },
          "province_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Province Code"
          },
          "reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reason"
          },
          "service_warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Service Warehouse Id"
          }
        },
        "title": "FulfillmentServiceDebug",
        "type": "object"
      },
      "GateOut": {
        "description": "后端裁决门禁（稳定合同）：\n- allowed: 前端直接用来禁用按钮/输入\n- error_code/message/details/next_actions：与 Problem 体系同源（前端无需猜/无需解析字符串）",
        "properties": {
          "allowed": {
            "title": "Allowed",
            "type": "boolean"
          },
          "details": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Details",
            "type": "array"
          },
          "error_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Code"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          },
          "next_actions": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Next Actions",
            "type": "array"
          }
        },
        "required": [
          "allowed"
        ],
        "title": "GateOut",
        "type": "object"
      },
      "GeoItemOut": {
        "properties": {
          "code": {
            "title": "Code",
            "type": "string"
          },
          "name": {
            "title": "Name",
            "type": "string"
          }
        },
        "required": [
          "code",
          "name"
        ],
        "title": "GeoItemOut",
        "type": "object"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "title": "Detail",
            "type": "array"
          }
        },
        "title": "HTTPValidationError",
        "type": "object"
      },
      "InboundReceiptConfirmLedgerRef": {
        "properties": {
          "applied": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Applied"
          },
          "idempotent": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Idempotent"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "qty_delta": {
            "title": "Qty Delta",
            "type": "integer"
          },
          "ref": {
            "description": "落账 ref（建议使用 receipt.ref）",
            "title": "Ref",
            "type": "string"
          },
          "ref_line": {
            "description": "落账 ref_line（在 ref 维度递增）",
            "title": "Ref Line",
            "type": "integer"
          },
          "source_line_key": {
            "description": "归一化行键（与 explain 一致）",
            "title": "Source Line Key",
            "type": "string"
          }
        },
        "required": [
          "source_line_key",
          "ref",
          "ref_line",
          "item_id",
          "qty_delta"
        ],
        "title": "InboundReceiptConfirmLedgerRef",
        "type": "object"
      },
      "InboundReceiptConfirmOut": {
        "properties": {
          "ledger_refs": {
            "items": {
              "$ref": "#/components/schemas/InboundReceiptConfirmLedgerRef"
            },
            "title": "Ledger Refs",
            "type": "array"
          },
          "ledger_written": {
            "description": "本次实际写入的 ledger 行数（幂等时为 0）",
            "title": "Ledger Written",
            "type": "integer"
          },
          "receipt": {
            "$ref": "#/components/schemas/InboundReceiptOut"
          }
        },
        "required": [
          "receipt",
          "ledger_written"
        ],
        "title": "InboundReceiptConfirmOut",
        "type": "object"
      },
      "InboundReceiptCreateIn": {
        "description": "Receipt 创建入口（最小闭环：先支持 PO -> DRAFT receipt）\n\n合同口径：\n- source_type: \"PO\"（兼容 \"PURCHASE_ORDER\"/\"purchase_order\" 等输入，router 内会归一化）\n- source_id: po_id\n\noccurred_at:\n- 可选；未传则后端用 now(UTC)",
        "properties": {
          "occurred_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "发生时间（可选，默认 now）",
            "title": "Occurred At"
          },
          "remark": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remark"
          },
          "source_id": {
            "description": "source id（PO 时为 po_id）",
            "title": "Source Id",
            "type": "integer"
          },
          "source_type": {
            "description": "PO / ORDER / OTHER（当前仅支持 PO）",
            "title": "Source Type",
            "type": "string"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Id"
          }
        },
        "required": [
          "source_type",
          "source_id"
        ],
        "title": "InboundReceiptCreateIn",
        "type": "object"
      },
      "InboundReceiptExplainOut": {
        "properties": {
          "blocking_errors": {
            "items": {
              "$ref": "#/components/schemas/ProblemItem"
            },
            "title": "Blocking Errors",
            "type": "array"
          },
          "confirmable": {
            "description": "是否满足确认硬校验",
            "title": "Confirmable",
            "type": "boolean"
          },
          "ledger_preview": {
            "items": {
              "$ref": "#/components/schemas/LedgerPreviewOut"
            },
            "title": "Ledger Preview",
            "type": "array"
          },
          "normalized_lines_preview": {
            "items": {
              "$ref": "#/components/schemas/NormalizedLinePreviewOut"
            },
            "title": "Normalized Lines Preview",
            "type": "array"
          },
          "receipt_summary": {
            "$ref": "#/components/schemas/InboundReceiptSummaryOut"
          }
        },
        "required": [
          "receipt_summary",
          "confirmable"
        ],
        "title": "InboundReceiptExplainOut",
        "type": "object"
      },
      "InboundReceiptLineOut": {
        "properties": {
          "barcode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Barcode"
          },
          "batch_code": {
            "title": "Batch Code",
            "type": "string"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "expiry_date": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expiry Date"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "item_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Name"
          },
          "item_sku": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Sku"
          },
          "line_amount": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Line Amount"
          },
          "line_no": {
            "title": "Line No",
            "type": "integer"
          },
          "po_line_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Po Line Id"
          },
          "production_date": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Production Date"
          },
          "qty_received": {
            "title": "Qty Received",
            "type": "integer"
          },
          "qty_units": {
            "title": "Qty Units",
            "type": "integer"
          },
          "receipt_id": {
            "title": "Receipt Id",
            "type": "integer"
          },
          "remark": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remark"
          },
          "unit_cost": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Unit Cost"
          },
          "units_per_case": {
            "title": "Units Per Case",
            "type": "integer"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          }
        },
        "required": [
          "id",
          "receipt_id",
          "line_no",
          "item_id",
          "batch_code",
          "qty_received",
          "units_per_case",
          "qty_units",
          "created_at",
          "updated_at"
        ],
        "title": "InboundReceiptLineOut",
        "type": "object"
      },
      "InboundReceiptOut": {
        "properties": {
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "lines": {
            "default": [],
            "items": {
              "$ref": "#/components/schemas/InboundReceiptLineOut"
            },
            "title": "Lines",
            "type": "array"
          },
          "occurred_at": {
            "format": "date-time",
            "title": "Occurred At",
            "type": "string"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          },
          "remark": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remark"
          },
          "source_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Id"
          },
          "source_type": {
            "title": "Source Type",
            "type": "string"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "supplier_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Id"
          },
          "supplier_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Name"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trace Id"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "id",
          "warehouse_id",
          "source_type",
          "ref",
          "status",
          "occurred_at",
          "created_at",
          "updated_at"
        ],
        "title": "InboundReceiptOut",
        "type": "object"
      },
      "InboundReceiptSummaryOut": {
        "properties": {
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "occurred_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Occurred At"
          },
          "ref": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ref"
          },
          "source_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Id"
          },
          "source_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Type"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trace Id"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Id"
          }
        },
        "required": [
          "id",
          "status"
        ],
        "title": "InboundReceiptSummaryOut",
        "type": "object"
      },
      "InternalOutboundConfirmIn": {
        "properties": {
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trace Id"
          }
        },
        "title": "InternalOutboundConfirmIn",
        "type": "object"
      },
      "InternalOutboundCreateDocIn": {
        "properties": {
          "doc_type": {
            "title": "Doc Type",
            "type": "string"
          },
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note"
          },
          "recipient_name": {
            "title": "Recipient Name",
            "type": "string"
          },
          "recipient_note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Recipient Note"
          },
          "recipient_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Recipient Type"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trace Id"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "warehouse_id",
          "doc_type",
          "recipient_name"
        ],
        "title": "InternalOutboundCreateDocIn",
        "type": "object"
      },
      "InternalOutboundDocOut": {
        "properties": {
          "canceled_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Canceled At"
          },
          "canceled_by": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Canceled By"
          },
          "confirmed_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confirmed At"
          },
          "confirmed_by": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confirmed By"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "created_by": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By"
          },
          "doc_no": {
            "title": "Doc No",
            "type": "string"
          },
          "doc_type": {
            "title": "Doc Type",
            "type": "string"
          },
          "extra_meta": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Extra Meta"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "lines": {
            "default": [],
            "items": {
              "$ref": "#/components/schemas/InternalOutboundLineOut"
            },
            "title": "Lines",
            "type": "array"
          },
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note"
          },
          "recipient_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Recipient Id"
          },
          "recipient_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Recipient Name"
          },
          "recipient_note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Recipient Note"
          },
          "recipient_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Recipient Type"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trace Id"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "id",
          "warehouse_id",
          "doc_no",
          "doc_type",
          "status",
          "created_at"
        ],
        "title": "InternalOutboundDocOut",
        "type": "object"
      },
      "InternalOutboundLineOut": {
        "properties": {
          "batch_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Batch Code"
          },
          "confirmed_qty": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confirmed Qty"
          },
          "doc_id": {
            "title": "Doc Id",
            "type": "integer"
          },
          "extra_meta": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Extra Meta"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "line_no": {
            "title": "Line No",
            "type": "integer"
          },
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note"
          },
          "requested_qty": {
            "title": "Requested Qty",
            "type": "integer"
          },
          "uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uom"
          }
        },
        "required": [
          "id",
          "doc_id",
          "line_no",
          "item_id",
          "requested_qty"
        ],
        "title": "InternalOutboundLineOut",
        "type": "object"
      },
      "InternalOutboundUpsertLineIn": {
        "properties": {
          "batch_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Batch Code"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note"
          },
          "qty": {
            "title": "Qty",
            "type": "integer"
          },
          "uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uom"
          }
        },
        "required": [
          "item_id",
          "qty"
        ],
        "title": "InternalOutboundUpsertLineIn",
        "type": "object"
      },
      "InventoryRow": {
        "description": "✅ Phase 2：事实口径（不可被破坏）\n\n每一行都是一个库存事实切片：\n- warehouse_id + item_id + batch_code\n- qty 为该切片在库数量（stocks.qty）",
        "properties": {
          "batch_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "批次编码（可为空，前端展示 NO-BATCH）",
            "title": "Batch Code"
          },
          "brand": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "品牌（预留字段）",
            "title": "Brand"
          },
          "category": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "品类（预留字段）",
            "title": "Category"
          },
          "days_to_expiry": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "到期剩余天数（expiry_date - today；后端算，前端不推导）",
            "title": "Days To Expiry"
          },
          "expiry_date": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "该批次到期日（来自 batches.expiry_date）",
            "title": "Expiry Date"
          },
          "item_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "商品编码（items.sku）",
            "title": "Item Code"
          },
          "item_id": {
            "description": "商品 ID",
            "minimum": 1.0,
            "title": "Item Id",
            "type": "integer"
          },
          "item_name": {
            "description": "商品名称",
            "maxLength": 128,
            "minLength": 0,
            "title": "Item Name",
            "type": "string"
          },
          "main_barcode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "主条码（单值）",
            "title": "Main Barcode"
          },
          "near_expiry": {
            "default": false,
            "description": "该批次是否临期（未来 30 天内到期）",
            "title": "Near Expiry",
            "type": "boolean"
          },
          "qty": {
            "description": "该切片数量（来自 stocks.qty）",
            "title": "Qty",
            "type": "integer"
          },
          "spec": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "规格（items.spec）",
            "title": "Spec"
          },
          "uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "单位（items.unit）",
            "title": "Uom"
          },
          "warehouse_id": {
            "description": "仓库 ID",
            "minimum": 1.0,
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "item_id",
          "item_name",
          "warehouse_id",
          "qty"
        ],
        "title": "InventoryRow",
        "type": "object"
      },
      "InventorySnapshotResponse": {
        "properties": {
          "limit": {
            "maximum": 100.0,
            "minimum": 1.0,
            "title": "Limit",
            "type": "integer"
          },
          "offset": {
            "minimum": 0.0,
            "title": "Offset",
            "type": "integer"
          },
          "rows": {
            "items": {
              "$ref": "#/components/schemas/InventoryRow"
            },
            "title": "Rows",
            "type": "array"
          },
          "total": {
            "minimum": 0.0,
            "title": "Total",
            "type": "integer"
          }
        },
        "required": [
          "total",
          "offset",
          "limit"
        ],
        "title": "InventorySnapshotResponse",
        "type": "object"
      },
      "ItemBarcodeCreate": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "barcode": {
            "title": "Barcode",
            "type": "string"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "kind": {
            "default": "CUSTOM",
            "title": "Kind",
            "type": "string"
          }
        },
        "required": [
          "item_id",
          "barcode"
        ],
        "title": "ItemBarcodeCreate",
        "type": "object"
      },
      "ItemBarcodeOut": {
        "properties": {
          "active": {
            "title": "Active",
            "type": "boolean"
          },
          "barcode": {
            "title": "Barcode",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "is_primary": {
            "title": "Is Primary",
            "type": "boolean"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "kind": {
            "title": "Kind",
            "type": "string"
          }
        },
        "required": [
          "id",
          "item_id",
          "barcode",
          "kind",
          "active",
          "is_primary"
        ],
        "title": "ItemBarcodeOut",
        "type": "object"
      },
      "ItemBarcodeUpdate": {
        "description": "PATCH 更新条码：可用于切主条码/启用/停用/修改类型",
        "properties": {
          "active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active"
          },
          "barcode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Barcode"
          },
          "is_primary": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Primary"
          },
          "kind": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Kind"
          }
        },
        "title": "ItemBarcodeUpdate",
        "type": "object"
      },
      "ItemCreate": {
        "description": "Create Item（统一由后端生成 SKU）：\n- 不接受 sku 输入",
        "properties": {
          "barcode": {
            "anyOf": [
              {
                "maxLength": 64,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Barcode"
          },
          "brand": {
            "anyOf": [
              {
                "maxLength": 64,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand"
          },
          "case_ratio": {
            "anyOf": [
              {
                "minimum": 1.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Case Ratio"
          },
          "case_uom": {
            "anyOf": [
              {
                "maxLength": 16,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Case Uom"
          },
          "category": {
            "anyOf": [
              {
                "maxLength": 64,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Category"
          },
          "enabled": {
            "default": true,
            "title": "Enabled",
            "type": "boolean"
          },
          "has_shelf_life": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Has Shelf Life"
          },
          "name": {
            "maxLength": 128,
            "minLength": 1,
            "title": "Name",
            "type": "string"
          },
          "shelf_life_unit": {
            "anyOf": [
              {
                "enum": [
                  "DAY",
                  "MONTH"
                ],
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Shelf Life Unit"
          },
          "shelf_life_value": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Shelf Life Value"
          },
          "spec": {
            "anyOf": [
              {
                "maxLength": 128,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Spec"
          },
          "supplier_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Id"
          },
          "uom": {
            "anyOf": [
              {
                "maxLength": 32,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uom"
          },
          "weight_kg": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Weight Kg"
          }
        },
        "required": [
          "name"
        ],
        "title": "ItemCreate",
        "type": "object"
      },
      "ItemDetailResponse": {
        "description": "Drawer V2：单个商品的全量“仓 + 批次”库存明细",
        "example": {
          "item_id": 777,
          "item_name": "顽皮双拼猫粮 1.5kg",
          "slices": [
            {
              "available_qty": 100,
              "batch_code": "B2025-01-A",
              "expiry_date": "2026-07-01",
              "is_top": true,
              "near_expiry": false,
              "on_hand_qty": 100,
              "pool": "MAIN",
              "production_date": "2025-01-01",
              "warehouse_id": 1,
              "warehouse_name": "WH-1 MAIN"
            }
          ],
          "totals": {
            "available_qty": 270,
            "on_hand_qty": 270
          }
        },
        "properties": {
          "item_id": {
            "description": "商品 ID",
            "minimum": 1.0,
            "title": "Item Id",
            "type": "integer"
          },
          "item_name": {
            "description": "商品名称",
            "maxLength": 128,
            "minLength": 0,
            "title": "Item Name",
            "type": "string"
          },
          "slices": {
            "items": {
              "$ref": "#/components/schemas/ItemDetailSlice"
            },
            "title": "Slices",
            "type": "array"
          },
          "totals": {
            "$ref": "#/components/schemas/ItemDetailTotals"
          }
        },
        "required": [
          "item_id",
          "item_name",
          "totals",
          "slices"
        ],
        "title": "ItemDetailResponse",
        "type": "object"
      },
      "ItemDetailSlice": {
        "description": "单条“仓 + 批次 + 数量”切片明细。",
        "example": {
          "available_qty": 100,
          "batch_code": "B2025-01-A",
          "expiry_date": "2026-07-01",
          "is_top": true,
          "near_expiry": false,
          "on_hand_qty": 100,
          "pool": "MAIN",
          "production_date": "2025-01-01",
          "warehouse_id": 1,
          "warehouse_name": "WH-1 MAIN"
        },
        "properties": {
          "available_qty": {
            "description": "可售数量",
            "minimum": 0.0,
            "title": "Available Qty",
            "type": "integer"
          },
          "batch_code": {
            "description": "批次编码",
            "maxLength": 64,
            "minLength": 1,
            "title": "Batch Code",
            "type": "string"
          },
          "expiry_date": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "到期日",
            "title": "Expiry Date"
          },
          "is_top": {
            "default": false,
            "description": "是否属于首页快照视图中的 Top2 切片（兼容历史字段，可保留）",
            "title": "Is Top",
            "type": "boolean"
          },
          "near_expiry": {
            "default": false,
            "description": "该批次是否临期（未来 30 天内到期）",
            "title": "Near Expiry",
            "type": "boolean"
          },
          "on_hand_qty": {
            "description": "在库数量",
            "minimum": 0.0,
            "title": "On Hand Qty",
            "type": "integer"
          },
          "pool": {
            "description": "库存池（MAIN / RETURNS / QUARANTINE 等，当前阶段默认 MAIN）",
            "maxLength": 32,
            "minLength": 1,
            "title": "Pool",
            "type": "string"
          },
          "production_date": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "生产日期",
            "title": "Production Date"
          },
          "warehouse_id": {
            "description": "仓库 ID",
            "minimum": 1.0,
            "title": "Warehouse Id",
            "type": "integer"
          },
          "warehouse_name": {
            "description": "仓库名称",
            "maxLength": 100,
            "minLength": 1,
            "title": "Warehouse Name",
            "type": "string"
          }
        },
        "required": [
          "warehouse_id",
          "warehouse_name",
          "pool",
          "batch_code",
          "on_hand_qty",
          "available_qty"
        ],
        "title": "ItemDetailSlice",
        "type": "object"
      },
      "ItemDetailTotals": {
        "description": "/snapshot/item-detail 的 totals 区汇总：\n- on_hand_qty: 总在库\n- available_qty: 总可售（当前 = on_hand_qty）",
        "example": {
          "available_qty": 270,
          "on_hand_qty": 270
        },
        "properties": {
          "available_qty": {
            "description": "总可售数量",
            "minimum": 0.0,
            "title": "Available Qty",
            "type": "integer"
          },
          "on_hand_qty": {
            "description": "总在库数量",
            "minimum": 0.0,
            "title": "On Hand Qty",
            "type": "integer"
          }
        },
        "required": [
          "on_hand_qty",
          "available_qty"
        ],
        "title": "ItemDetailTotals",
        "type": "object"
      },
      "ItemOut": {
        "properties": {
          "barcode": {
            "anyOf": [
              {
                "maxLength": 64,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Barcode"
          },
          "brand": {
            "anyOf": [
              {
                "maxLength": 64,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand"
          },
          "case_ratio": {
            "anyOf": [
              {
                "minimum": 1.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Case Ratio"
          },
          "case_uom": {
            "anyOf": [
              {
                "maxLength": 16,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Case Uom"
          },
          "category": {
            "anyOf": [
              {
                "maxLength": 64,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Category"
          },
          "created_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "default_batch_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Default Batch Code"
          },
          "enabled": {
            "default": true,
            "title": "Enabled",
            "type": "boolean"
          },
          "has_shelf_life": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Has Shelf Life"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "is_test": {
            "default": false,
            "title": "Is Test",
            "type": "boolean"
          },
          "name": {
            "maxLength": 128,
            "minLength": 1,
            "title": "Name",
            "type": "string"
          },
          "primary_barcode": {
            "anyOf": [
              {
                "maxLength": 64,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary Barcode"
          },
          "requires_batch": {
            "default": true,
            "title": "Requires Batch",
            "type": "boolean"
          },
          "requires_dates": {
            "default": true,
            "title": "Requires Dates",
            "type": "boolean"
          },
          "shelf_life_unit": {
            "anyOf": [
              {
                "enum": [
                  "DAY",
                  "MONTH"
                ],
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Shelf Life Unit"
          },
          "shelf_life_value": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Shelf Life Value"
          },
          "sku": {
            "maxLength": 128,
            "minLength": 1,
            "title": "Sku",
            "type": "string"
          },
          "spec": {
            "anyOf": [
              {
                "maxLength": 128,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Spec"
          },
          "supplier_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Id"
          },
          "supplier_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Name"
          },
          "uom": {
            "anyOf": [
              {
                "maxLength": 32,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uom"
          },
          "updated_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "weight_kg": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Weight Kg"
          }
        },
        "required": [
          "sku",
          "name",
          "id"
        ],
        "title": "ItemOut",
        "type": "object"
      },
      "ItemPurchaseReportItem": {
        "properties": {
          "avg_unit_price": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Unit Price"
          },
          "barcode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "主条码（来自 item_barcodes 主条码）",
            "title": "Barcode"
          },
          "brand": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "品牌（来自 items.brand）",
            "title": "Brand"
          },
          "category": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "分类（来自 items.category）",
            "title": "Category"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "item_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Name"
          },
          "item_sku": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Sku"
          },
          "order_count": {
            "title": "Order Count",
            "type": "integer"
          },
          "spec_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Spec Text"
          },
          "supplier_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Id"
          },
          "supplier_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Name"
          },
          "total_amount": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Amount"
          },
          "total_qty_cases": {
            "title": "Total Qty Cases",
            "type": "integer"
          },
          "total_units": {
            "title": "Total Units",
            "type": "integer"
          }
        },
        "required": [
          "item_id",
          "order_count",
          "total_qty_cases",
          "total_units"
        ],
        "title": "ItemPurchaseReportItem",
        "type": "object"
      },
      "ItemUpdate": {
        "properties": {
          "barcode": {
            "anyOf": [
              {
                "maxLength": 64,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Barcode"
          },
          "brand": {
            "anyOf": [
              {
                "maxLength": 64,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand"
          },
          "case_ratio": {
            "anyOf": [
              {
                "minimum": 1.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Case Ratio"
          },
          "case_uom": {
            "anyOf": [
              {
                "maxLength": 16,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Case Uom"
          },
          "category": {
            "anyOf": [
              {
                "maxLength": 64,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Category"
          },
          "enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Enabled"
          },
          "has_shelf_life": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Has Shelf Life"
          },
          "name": {
            "anyOf": [
              {
                "maxLength": 128,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "shelf_life_unit": {
            "anyOf": [
              {
                "enum": [
                  "DAY",
                  "MONTH"
                ],
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Shelf Life Unit"
          },
          "shelf_life_value": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Shelf Life Value"
          },
          "sku": {
            "anyOf": [
              {
                "maxLength": 128,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sku"
          },
          "spec": {
            "anyOf": [
              {
                "maxLength": 128,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Spec"
          },
          "supplier_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Id"
          },
          "uom": {
            "anyOf": [
              {
                "maxLength": 32,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uom"
          },
          "weight_kg": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Weight Kg"
          }
        },
        "title": "ItemUpdate",
        "type": "object"
      },
      "LedgerEnums": {
        "properties": {
          "reason_canons": {
            "items": {
              "$ref": "#/components/schemas/ReasonCanon"
            },
            "title": "Reason Canons",
            "type": "array"
          },
          "sub_reasons": {
            "items": {
              "$ref": "#/components/schemas/SubReason"
            },
            "title": "Sub Reasons",
            "type": "array"
          }
        },
        "title": "LedgerEnums",
        "type": "object"
      },
      "LedgerExplainOut": {
        "properties": {
          "anchor": {
            "$ref": "#/components/schemas/ExplainAnchor"
          },
          "ledger": {
            "items": {
              "$ref": "#/components/schemas/ExplainLedgerRow"
            },
            "title": "Ledger",
            "type": "array"
          },
          "purchase_order": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ExplainPurchaseOrder"
              },
              {
                "type": "null"
              }
            ]
          },
          "receipt": {
            "$ref": "#/components/schemas/ExplainReceipt"
          },
          "receipt_lines": {
            "items": {
              "$ref": "#/components/schemas/ExplainReceiptLine"
            },
            "title": "Receipt Lines",
            "type": "array"
          }
        },
        "required": [
          "anchor",
          "ledger",
          "receipt",
          "receipt_lines"
        ],
        "title": "LedgerExplainOut",
        "type": "object"
      },
      "LedgerList": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/LedgerRow"
            },
            "title": "Items",
            "type": "array"
          },
          "total": {
            "title": "Total",
            "type": "integer"
          }
        },
        "required": [
          "total"
        ],
        "title": "LedgerList",
        "type": "object"
      },
      "LedgerPreviewOut": {
        "properties": {
          "action": {
            "description": "动作类型（仅用于 explain 展示）",
            "title": "Action",
            "type": "string"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "qty_delta": {
            "description": "库存变化数量（预览）",
            "title": "Qty Delta",
            "type": "integer"
          },
          "source_line_key": {
            "description": "对应 normalized line_key",
            "title": "Source Line Key",
            "type": "string"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "action",
          "warehouse_id",
          "item_id",
          "qty_delta",
          "source_line_key"
        ],
        "title": "LedgerPreviewOut",
        "type": "object"
      },
      "LedgerQuery": {
        "description": "库存台账查询条件（统一合同）：",
        "properties": {
          "batch_code": {
            "anyOf": [
              {
                "maxLength": 64,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "批次编码（精确）",
            "title": "Batch Code"
          },
          "item_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "商品 ID（精确）",
            "title": "Item Id"
          },
          "item_keyword": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "商品关键词（模糊匹配 name / sku）",
            "title": "Item Keyword"
          },
          "limit": {
            "default": 100,
            "maximum": 1000.0,
            "minimum": 1.0,
            "title": "Limit",
            "type": "integer"
          },
          "offset": {
            "default": 0,
            "minimum": 0.0,
            "title": "Offset",
            "type": "integer"
          },
          "reason": {
            "anyOf": [
              {
                "maxLength": 32,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "原始 reason（如 OUTBOUND_SHIP / RECEIPT / ADJUSTMENT）",
            "title": "Reason"
          },
          "reason_canon": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ReasonCanon"
              },
              {
                "type": "null"
              }
            ],
            "description": "稳定口径（RECEIPT / SHIPMENT / ADJUSTMENT）"
          },
          "ref": {
            "anyOf": [
              {
                "maxLength": 128,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "关联单据（精确匹配）",
            "title": "Ref"
          },
          "sub_reason": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/SubReason"
              },
              {
                "type": "null"
              }
            ],
            "description": "具体动作（PO_RECEIPT / ORDER_SHIP / COUNT_ADJUST 等）"
          },
          "time_from": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "开始时间（含，基于 occurred_at）",
            "title": "Time From"
          },
          "time_to": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "结束时间（含，基于 occurred_at）",
            "title": "Time To"
          },
          "trace_id": {
            "anyOf": [
              {
                "maxLength": 64,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "追溯号 trace_id（精确匹配）",
            "title": "Trace Id"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "仓库 ID",
            "title": "Warehouse Id"
          }
        },
        "title": "LedgerQuery",
        "type": "object"
      },
      "LedgerReasonStat": {
        "properties": {
          "count": {
            "title": "Count",
            "type": "integer"
          },
          "reason": {
            "title": "Reason",
            "type": "string"
          },
          "total_delta": {
            "title": "Total Delta",
            "type": "integer"
          }
        },
        "required": [
          "reason",
          "count",
          "total_delta"
        ],
        "title": "LedgerReasonStat",
        "type": "object"
      },
      "LedgerReconcileResult": {
        "properties": {
          "rows": {
            "items": {
              "$ref": "#/components/schemas/LedgerReconcileRow"
            },
            "title": "Rows",
            "type": "array"
          }
        },
        "title": "LedgerReconcileResult",
        "type": "object"
      },
      "LedgerReconcileRow": {
        "properties": {
          "batch_code": {
            "title": "Batch Code",
            "type": "string"
          },
          "diff": {
            "title": "Diff",
            "type": "integer"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "ledger_sum_delta": {
            "title": "Ledger Sum Delta",
            "type": "integer"
          },
          "stock_qty": {
            "title": "Stock Qty",
            "type": "integer"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "warehouse_id",
          "item_id",
          "batch_code",
          "ledger_sum_delta",
          "stock_qty",
          "diff"
        ],
        "title": "LedgerReconcileRow",
        "type": "object"
      },
      "LedgerRow": {
        "properties": {
          "after_qty": {
            "title": "After Qty",
            "type": "integer"
          },
          "batch_code": {
            "title": "Batch Code",
            "type": "string"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "delta": {
            "title": "Delta",
            "type": "integer"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "item_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Name"
          },
          "movement_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Movement Type"
          },
          "occurred_at": {
            "format": "date-time",
            "title": "Occurred At",
            "type": "string"
          },
          "reason": {
            "title": "Reason",
            "type": "string"
          },
          "reason_canon": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reason Canon"
          },
          "ref": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ref"
          },
          "ref_line": {
            "title": "Ref Line",
            "type": "integer"
          },
          "sub_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sub Reason"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trace Id"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "id",
          "delta",
          "after_qty",
          "reason",
          "ref_line",
          "occurred_at",
          "created_at",
          "warehouse_id",
          "item_id",
          "batch_code"
        ],
        "title": "LedgerRow",
        "type": "object"
      },
      "LedgerSummary": {
        "properties": {
          "by_reason": {
            "items": {
              "$ref": "#/components/schemas/LedgerReasonStat"
            },
            "title": "By Reason",
            "type": "array"
          },
          "filters": {
            "$ref": "#/components/schemas/LedgerQuery"
          },
          "net_delta": {
            "title": "Net Delta",
            "type": "integer"
          }
        },
        "required": [
          "filters",
          "net_delta"
        ],
        "title": "LedgerSummary",
        "type": "object"
      },
      "ManualAssignRequest": {
        "description": "Phase 5.1：人工指定执行仓（执行期履约决策）",
        "properties": {
          "note": {
            "anyOf": [
              {
                "maxLength": 1000,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note"
          },
          "reason": {
            "maxLength": 500,
            "minLength": 1,
            "title": "Reason",
            "type": "string"
          },
          "warehouse_id": {
            "minimum": 1.0,
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "warehouse_id",
          "reason"
        ],
        "title": "ManualAssignRequest",
        "type": "object"
      },
      "ManualAssignResponse": {
        "properties": {
          "from_warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "From Warehouse Id"
          },
          "fulfillment_status": {
            "title": "Fulfillment Status",
            "type": "string"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "to_warehouse_id": {
            "title": "To Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "status",
          "ref",
          "to_warehouse_id",
          "fulfillment_status"
        ],
        "title": "ManualAssignResponse",
        "type": "object"
      },
      "ManualBindMerchantCodeIn": {
        "properties": {
          "filled_code": {
            "description": "填写码（商家规格编码 / filled_code）",
            "maxLength": 128,
            "minLength": 1,
            "title": "Filled Code",
            "type": "string"
          },
          "fsku_id": {
            "description": "目标 FSKU.id（必须为 published）",
            "minimum": 1.0,
            "title": "Fsku Id",
            "type": "integer"
          },
          "platform": {
            "description": "平台（DEMO/PDD/TB），大小写不敏感",
            "maxLength": 32,
            "minLength": 1,
            "title": "Platform",
            "type": "string"
          },
          "reason": {
            "anyOf": [
              {
                "maxLength": 500,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "绑定原因（可选）",
            "title": "Reason"
          },
          "store_id": {
            "description": "内部店铺 store_id（stores.id）",
            "minimum": 1.0,
            "title": "Store Id",
            "type": "integer"
          }
        },
        "required": [
          "platform",
          "store_id",
          "filled_code",
          "fsku_id"
        ],
        "title": "ManualBindMerchantCodeIn",
        "type": "object"
      },
      "ManualDecisionLineOut": {
        "description": "人工救火明细行（证据表读侧输出）。\n\nPhase N+4：line_key（内部幂等锚点）与 locator（对外定位语义）分层。",
        "properties": {
          "fact_qty": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fact Qty"
          },
          "filled_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "商家后台填写码（对外语义字段）",
            "title": "Filled Code"
          },
          "item_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Id"
          },
          "line_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Line Key"
          },
          "line_no": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Line No"
          },
          "locator_kind": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "对外定位类型（推荐）：FILLED_CODE / LINE_NO",
            "title": "Locator Kind"
          },
          "locator_value": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "对外定位值（推荐）",
            "title": "Locator Value"
          },
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note"
          },
          "qty": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Qty"
          }
        },
        "title": "ManualDecisionLineOut",
        "type": "object"
      },
      "ManualDecisionOrderOut": {
        "properties": {
          "batch_id": {
            "description": "治理事实批次 id（platform_order_manual_decisions.batch_id）",
            "title": "Batch Id",
            "type": "string"
          },
          "created_at": {
            "description": "该批次最新写入时间（MAX(created_at)）",
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "ext_order_no": {
            "title": "Ext Order No",
            "type": "string"
          },
          "manual_decisions": {
            "items": {
              "$ref": "#/components/schemas/ManualDecisionLineOut"
            },
            "title": "Manual Decisions",
            "type": "array"
          },
          "manual_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Manual Reason"
          },
          "order_id": {
            "title": "Order Id",
            "type": "integer"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          },
          "risk_flags": {
            "items": {
              "type": "string"
            },
            "title": "Risk Flags",
            "type": "array"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          },
          "store_id": {
            "title": "Store Id",
            "type": "integer"
          }
        },
        "required": [
          "batch_id",
          "created_at",
          "order_id",
          "platform",
          "shop_id",
          "ext_order_no",
          "ref",
          "store_id"
        ],
        "title": "ManualDecisionOrderOut",
        "type": "object"
      },
      "ManualDecisionOrdersOut": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/ManualDecisionOrderOut"
            },
            "title": "Items",
            "type": "array"
          },
          "limit": {
            "title": "Limit",
            "type": "integer"
          },
          "offset": {
            "title": "Offset",
            "type": "integer"
          },
          "total": {
            "title": "Total",
            "type": "integer"
          }
        },
        "required": [
          "total",
          "limit",
          "offset"
        ],
        "title": "ManualDecisionOrdersOut",
        "type": "object"
      },
      "MarkFailedIn": {
        "properties": {
          "error": {
            "description": "失败原因（可直接展示给操作员）",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Error",
            "type": "string"
          }
        },
        "required": [
          "error"
        ],
        "title": "MarkFailedIn",
        "type": "object"
      },
      "MarkPrintedIn": {
        "properties": {
          "printed_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "打印完成时间；不传则后端取 now()",
            "title": "Printed At"
          }
        },
        "title": "MarkPrintedIn",
        "type": "object"
      },
      "MerchantCodeBindingBindIn": {
        "properties": {
          "fsku_id": {
            "description": "要绑定到的 published FSKU.id",
            "minimum": 1.0,
            "title": "Fsku Id",
            "type": "integer"
          },
          "merchant_code": {
            "description": "商家后端规格编码（merchant_code / filled_code）",
            "maxLength": 128,
            "minLength": 1,
            "title": "Merchant Code",
            "type": "string"
          },
          "platform": {
            "description": "平台（DEMO/PDD/TB...）",
            "maxLength": 32,
            "minLength": 1,
            "title": "Platform",
            "type": "string"
          },
          "reason": {
            "anyOf": [
              {
                "maxLength": 500,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "绑定原因（可选）",
            "title": "Reason"
          },
          "shop_id": {
            "description": "平台店铺 ID（字符串，与 platform 对齐）",
            "maxLength": 64,
            "minLength": 1,
            "title": "Shop Id",
            "type": "string"
          }
        },
        "required": [
          "platform",
          "shop_id",
          "merchant_code",
          "fsku_id"
        ],
        "title": "MerchantCodeBindingBindIn",
        "type": "object"
      },
      "MerchantCodeBindingCloseIn": {
        "properties": {
          "merchant_code": {
            "description": "商家后端规格编码（merchant_code / filled_code）",
            "maxLength": 128,
            "minLength": 1,
            "title": "Merchant Code",
            "type": "string"
          },
          "platform": {
            "description": "平台（DEMO/PDD/TB...）",
            "maxLength": 32,
            "minLength": 1,
            "title": "Platform",
            "type": "string"
          },
          "shop_id": {
            "description": "平台店铺 ID（字符串，与 platform 对齐）",
            "maxLength": 64,
            "minLength": 1,
            "title": "Shop Id",
            "type": "string"
          }
        },
        "required": [
          "platform",
          "shop_id",
          "merchant_code"
        ],
        "title": "MerchantCodeBindingCloseIn",
        "type": "object"
      },
      "MerchantCodeBindingListDataOut": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/MerchantCodeBindingRowOut"
            },
            "title": "Items",
            "type": "array"
          },
          "limit": {
            "title": "Limit",
            "type": "integer"
          },
          "offset": {
            "title": "Offset",
            "type": "integer"
          },
          "total": {
            "title": "Total",
            "type": "integer"
          }
        },
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "title": "MerchantCodeBindingListDataOut",
        "type": "object"
      },
      "MerchantCodeBindingListOut": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/MerchantCodeBindingListDataOut"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "MerchantCodeBindingListOut",
        "type": "object"
      },
      "MerchantCodeBindingOut": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/MerchantCodeBindingRowOut"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "MerchantCodeBindingOut",
        "type": "object"
      },
      "MerchantCodeBindingRowOut": {
        "properties": {
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "fsku": {
            "$ref": "#/components/schemas/FskuLiteOut"
          },
          "fsku_id": {
            "title": "Fsku Id",
            "type": "integer"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "merchant_code": {
            "title": "Merchant Code",
            "type": "string"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reason"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          },
          "store": {
            "$ref": "#/components/schemas/StoreLiteOut"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          }
        },
        "required": [
          "id",
          "platform",
          "shop_id",
          "store",
          "merchant_code",
          "fsku_id",
          "fsku",
          "reason",
          "created_at",
          "updated_at"
        ],
        "title": "MerchantCodeBindingRowOut",
        "type": "object"
      },
      "MerchantLineItemIn": {
        "properties": {
          "filled_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filled Code"
          },
          "if_version": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "可选乐观锁版本；不传则强制覆盖",
            "title": "If Version"
          },
          "row_no": {
            "maximum": 6.0,
            "minimum": 1.0,
            "title": "Row No",
            "type": "integer"
          },
          "spec": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Spec"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          }
        },
        "required": [
          "row_no"
        ],
        "title": "MerchantLineItemIn",
        "type": "object"
      },
      "MetaPlatformItem": {
        "properties": {
          "enabled": {
            "default": true,
            "title": "Enabled",
            "type": "boolean"
          },
          "label": {
            "maxLength": 64,
            "minLength": 1,
            "title": "Label",
            "type": "string"
          },
          "platform": {
            "maxLength": 32,
            "minLength": 1,
            "title": "Platform",
            "type": "string"
          }
        },
        "required": [
          "platform",
          "label"
        ],
        "title": "MetaPlatformItem",
        "type": "object"
      },
      "MetaPlatformsOut": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/MetaPlatformItem"
            },
            "title": "Data",
            "type": "array"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "MetaPlatformsOut",
        "type": "object"
      },
      "NextSkuOut": {
        "properties": {
          "sku": {
            "title": "Sku",
            "type": "string"
          }
        },
        "required": [
          "sku"
        ],
        "title": "NextSkuOut",
        "type": "object"
      },
      "NormalizedLinePreviewOut": {
        "properties": {
          "batch_code": {
            "title": "Batch Code",
            "type": "string"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "line_key": {
            "description": "归一化后的行键（可用于 explain 展示/合并提示）",
            "title": "Line Key",
            "type": "string"
          },
          "po_line_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Po Line Id"
          },
          "production_date": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Production Date"
          },
          "qty_total": {
            "description": "归一化汇总数量",
            "title": "Qty Total",
            "type": "integer"
          },
          "source_line_indexes": {
            "description": "来自哪些原始行 index",
            "items": {
              "type": "integer"
            },
            "title": "Source Line Indexes",
            "type": "array"
          }
        },
        "required": [
          "line_key",
          "qty_total",
          "item_id",
          "batch_code"
        ],
        "title": "NormalizedLinePreviewOut",
        "type": "object"
      },
      "OAuthStartOut": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "title": "Data",
            "type": "object"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "ok",
          "data"
        ],
        "title": "OAuthStartOut",
        "type": "object"
      },
      "OpsActiveSchemeRow": {
        "properties": {
          "scheme_id": {
            "title": "Scheme Id",
            "type": "integer"
          },
          "scheme_name": {
            "title": "Scheme Name",
            "type": "string"
          },
          "shipping_provider_id": {
            "title": "Shipping Provider Id",
            "type": "integer"
          },
          "shipping_provider_name": {
            "title": "Shipping Provider Name",
            "type": "string"
          }
        },
        "required": [
          "scheme_id",
          "scheme_name",
          "shipping_provider_id",
          "shipping_provider_name"
        ],
        "title": "OpsActiveSchemeRow",
        "type": "object"
      },
      "OpsActiveSchemesOut": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/OpsActiveSchemeRow"
            },
            "title": "Data",
            "type": "array"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "title": "OpsActiveSchemesOut",
        "type": "object"
      },
      "OrderAddrIn": {
        "properties": {
          "city": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City"
          },
          "detail": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detail"
          },
          "district": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "District"
          },
          "province": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Province"
          },
          "receiver_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Receiver Name"
          },
          "receiver_phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Receiver Phone"
          },
          "zipcode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Zipcode"
          }
        },
        "title": "OrderAddrIn",
        "type": "object"
      },
      "OrderCreateIn": {
        "description": "标准口径：最小必填 platform/shop_id/ext_order_no，其余尽量宽松。",
        "properties": {
          "address": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/OrderAddrIn"
              },
              {
                "type": "null"
              }
            ]
          },
          "buyer_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Buyer Name"
          },
          "buyer_phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Buyer Phone"
          },
          "ext_order_no": {
            "minLength": 1,
            "title": "Ext Order No",
            "type": "string"
          },
          "lines": {
            "items": {
              "$ref": "#/components/schemas/OrderLineIn"
            },
            "title": "Lines",
            "type": "array"
          },
          "occurred_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Occurred At"
          },
          "order_amount": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "default": 0.0,
            "title": "Order Amount"
          },
          "pay_amount": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "default": 0.0,
            "title": "Pay Amount"
          },
          "platform": {
            "maxLength": 32,
            "minLength": 1,
            "title": "Platform",
            "type": "string"
          },
          "shop_id": {
            "minLength": 1,
            "title": "Shop Id",
            "type": "string"
          },
          "store_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Store Name"
          }
        },
        "required": [
          "platform",
          "shop_id",
          "ext_order_no"
        ],
        "title": "OrderCreateIn",
        "type": "object"
      },
      "OrderCreateOut": {
        "properties": {
          "fulfillment": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/OrderFulfillmentOut"
              },
              {
                "type": "null"
              }
            ]
          },
          "id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Id"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          },
          "status": {
            "title": "Status",
            "type": "string"
          }
        },
        "required": [
          "status",
          "ref"
        ],
        "title": "OrderCreateOut",
        "type": "object"
      },
      "OrderFactItemOut": {
        "description": "facts：订单镜像的“数量事实”（只读、无履约语义）。\n\n说明：\n- 镜像详情里“数量”有意义（qty_ordered）\n- shipped/returned 等履约累积字段对“平台镜像详情”无意义，因此不输出",
        "properties": {
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "qty_ordered": {
            "default": 0,
            "title": "Qty Ordered",
            "type": "integer"
          },
          "sku_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sku Id"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          }
        },
        "required": [
          "item_id"
        ],
        "title": "OrderFactItemOut",
        "type": "object"
      },
      "OrderFactsResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/OrderFactItemOut"
            },
            "title": "Items",
            "type": "array"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "items"
        ],
        "title": "OrderFactsResponse",
        "type": "object"
      },
      "OrderFulfillmentOut": {
        "description": "Phase 5.2：履约事实快照（产品化输出）\n\n兼容字段名（对外）：\n- service_warehouse_id：服务归属仓（planned_warehouse_id）\n- warehouse_id：执行出库仓（actual_warehouse_id）\n- fulfillment_status：履约状态（SERVICE_ASSIGNED / READY_TO_FULFILL / MANUALLY_ASSIGNED / BLOCKED）\n\n✅ 系统事实来源：order_fulfillment",
        "properties": {
          "auto_assign_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auto Assign Status"
          },
          "fulfillment_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fulfillment Status"
          },
          "ingest_state": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ingest State"
          },
          "route_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Route Status"
          },
          "service_warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Service Warehouse Id"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Id"
          }
        },
        "title": "OrderFulfillmentOut",
        "type": "object"
      },
      "OrderLineIn": {
        "description": "更宽松的行项目：只必需 qty，其他字段尽量可选，服务层自行兜底",
        "properties": {
          "amount": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "default": 0.0,
            "title": "Amount"
          },
          "discount": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "default": 0.0,
            "title": "Discount"
          },
          "item_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Id"
          },
          "price": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "default": 0.0,
            "title": "Price"
          },
          "qty": {
            "default": 1,
            "exclusiveMinimum": 0.0,
            "title": "Qty",
            "type": "integer"
          },
          "sku_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sku Id"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          }
        },
        "title": "OrderLineIn",
        "type": "object"
      },
      "OrderSimCartGetOut": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "title": "Data",
            "type": "object"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "ok",
          "data"
        ],
        "title": "OrderSimCartGetOut",
        "type": "object"
      },
      "OrderSimCartPutIn": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/CartLineItemIn"
            },
            "title": "Items",
            "type": "array"
          }
        },
        "title": "OrderSimCartPutIn",
        "type": "object"
      },
      "OrderSimCartPutOut": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "title": "Data",
            "type": "object"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "ok",
          "data"
        ],
        "title": "OrderSimCartPutOut",
        "type": "object"
      },
      "OrderSimFilledCodeOptionOut": {
        "properties": {
          "components_summary": {
            "description": "FSKU components 摘要（spec 只读展示，不参与解析）",
            "title": "Components Summary",
            "type": "string"
          },
          "filled_code": {
            "description": "商家后台填写码（merchant_code / filled_code）",
            "maxLength": 128,
            "minLength": 1,
            "title": "Filled Code",
            "type": "string"
          },
          "suggested_title": {
            "description": "下拉选中后默认带出的标题（可编辑）",
            "title": "Suggested Title",
            "type": "string"
          }
        },
        "required": [
          "filled_code",
          "suggested_title",
          "components_summary"
        ],
        "title": "OrderSimFilledCodeOptionOut",
        "type": "object"
      },
      "OrderSimFilledCodeOptionsData": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/OrderSimFilledCodeOptionOut"
            },
            "title": "Items",
            "type": "array"
          }
        },
        "title": "OrderSimFilledCodeOptionsData",
        "type": "object"
      },
      "OrderSimFilledCodeOptionsOut": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/OrderSimFilledCodeOptionsData"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "ok",
          "data"
        ],
        "title": "OrderSimFilledCodeOptionsOut",
        "type": "object"
      },
      "OrderSimGenerateOrderIn": {
        "properties": {
          "idempotency_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "可选：用于 ext_order_no 幂等锚点（同 key → 同 ext_order_no）",
            "title": "Idempotency Key"
          }
        },
        "title": "OrderSimGenerateOrderIn",
        "type": "object"
      },
      "OrderSimGenerateOrderOut": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "title": "Data",
            "type": "object"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "ok",
          "data"
        ],
        "title": "OrderSimGenerateOrderOut",
        "type": "object"
      },
      "OrderSimMerchantLinesGetOut": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "title": "Data",
            "type": "object"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "ok",
          "data"
        ],
        "title": "OrderSimMerchantLinesGetOut",
        "type": "object"
      },
      "OrderSimMerchantLinesPutIn": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/MerchantLineItemIn"
            },
            "title": "Items",
            "type": "array"
          }
        },
        "title": "OrderSimMerchantLinesPutIn",
        "type": "object"
      },
      "OrderSimMerchantLinesPutOut": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "title": "Data",
            "type": "object"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "ok",
          "data"
        ],
        "title": "OrderSimMerchantLinesPutOut",
        "type": "object"
      },
      "OrderSimPreviewOrderIn": {
        "properties": {
          "idempotency_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "可选：用于 preview 的 ext_order_no（与 generate-order 对齐）",
            "title": "Idempotency Key"
          }
        },
        "title": "OrderSimPreviewOrderIn",
        "type": "object"
      },
      "OrderSimPreviewOrderOut": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "title": "Data",
            "type": "object"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "ok",
          "data"
        ],
        "title": "OrderSimPreviewOrderOut",
        "type": "object"
      },
      "OrderSummaryOut": {
        "properties": {
          "can_manual_assign_execution_warehouse": {
            "default": false,
            "title": "Can Manual Assign Execution Warehouse",
            "type": "boolean"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "ext_order_no": {
            "title": "Ext Order No",
            "type": "string"
          },
          "fulfillment_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fulfillment Status"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "manual_assign_hint": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Manual Assign Hint"
          },
          "order_amount": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Order Amount"
          },
          "pay_amount": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pay Amount"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "service_warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Service Warehouse Id"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "store_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Store Id"
          },
          "updated_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "warehouse_assign_mode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Assign Mode"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Id"
          }
        },
        "required": [
          "id",
          "platform",
          "shop_id",
          "ext_order_no",
          "created_at"
        ],
        "title": "OrderSummaryOut",
        "type": "object"
      },
      "OrderViewResponse": {
        "properties": {
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          },
          "order": {
            "$ref": "#/components/schemas/PlatformOrderOut"
          }
        },
        "required": [
          "order"
        ],
        "title": "OrderViewResponse",
        "type": "object"
      },
      "OrderWarehouseAvailabilityResponse": {
        "properties": {
          "lines": {
            "items": {
              "$ref": "#/components/schemas/AvailabilityLineOut"
            },
            "title": "Lines",
            "type": "array"
          },
          "matrix": {
            "items": {
              "$ref": "#/components/schemas/AvailabilityCellOut"
            },
            "title": "Matrix",
            "type": "array"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          },
          "order_id": {
            "title": "Order Id",
            "type": "integer"
          },
          "scope": {
            "title": "Scope",
            "type": "string"
          },
          "warehouses": {
            "items": {
              "$ref": "#/components/schemas/WarehouseBriefOut"
            },
            "title": "Warehouses",
            "type": "array"
          }
        },
        "required": [
          "order_id",
          "scope",
          "warehouses",
          "lines",
          "matrix"
        ],
        "title": "OrderWarehouseAvailabilityResponse",
        "type": "object"
      },
      "OrdersDailyStatsModel": {
        "description": "单日汇总：创建 / 发货 / 退货 订单数",
        "properties": {
          "date": {
            "description": "统计日期（UTC，自然日）",
            "format": "date",
            "title": "Date",
            "type": "string"
          },
          "orders_created": {
            "description": "当天创建的订单数量",
            "title": "Orders Created",
            "type": "integer"
          },
          "orders_returned": {
            "description": "当天有退货入库的订单数量（source_type=ORDER 的收货任务）",
            "title": "Orders Returned",
            "type": "integer"
          },
          "orders_shipped": {
            "description": "当天发货的订单数量（按 ref=ORD:* 的 distinct ref 计）",
            "title": "Orders Shipped",
            "type": "integer"
          },
          "platform": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "可选平台过滤（如 PDD），大写",
            "title": "Platform"
          },
          "shop_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "可选店铺过滤（字符串，与 orders.shop_id 一致）",
            "title": "Shop Id"
          }
        },
        "required": [
          "date",
          "orders_created",
          "orders_shipped",
          "orders_returned"
        ],
        "title": "OrdersDailyStatsModel",
        "type": "object"
      },
      "OrdersDailyTrendItem": {
        "properties": {
          "date": {
            "format": "date",
            "title": "Date",
            "type": "string"
          },
          "orders_created": {
            "title": "Orders Created",
            "type": "integer"
          },
          "orders_returned": {
            "title": "Orders Returned",
            "type": "integer"
          },
          "orders_shipped": {
            "title": "Orders Shipped",
            "type": "integer"
          },
          "return_rate": {
            "description": "退货率 = orders_returned / orders_shipped（若分母为 0 则为 0.0）",
            "title": "Return Rate",
            "type": "number"
          }
        },
        "required": [
          "date",
          "orders_created",
          "orders_shipped",
          "orders_returned",
          "return_rate"
        ],
        "title": "OrdersDailyTrendItem",
        "type": "object"
      },
      "OrdersSlaStatsModel": {
        "description": "发货 SLA 统计：\n\n- total_orders    : 时间窗口内有发货记录的订单数\n- avg_ship_hours  : 平均发货耗时（小时）\n- p95_ship_hours  : 95 分位发货耗时（小时）\n- on_time_orders  : 在 SLA 小时内发货的订单数\n- on_time_rate    : 准时率 = on_time_orders / total_orders",
        "properties": {
          "avg_ship_hours": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "description": "平均发货耗时（小时），无订单时为 null",
            "title": "Avg Ship Hours"
          },
          "on_time_orders": {
            "description": "在 SLA 小时内发货的订单数",
            "title": "On Time Orders",
            "type": "integer"
          },
          "on_time_rate": {
            "description": "准时率 = on_time_orders / total_orders（无订单时为 0.0）",
            "title": "On Time Rate",
            "type": "number"
          },
          "p95_ship_hours": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "description": "95 分位发货耗时（小时），无订单时为 null",
            "title": "P95 Ship Hours"
          },
          "total_orders": {
            "description": "时间窗口内有发货记录的订单数量",
            "title": "Total Orders",
            "type": "integer"
          }
        },
        "required": [
          "total_orders",
          "on_time_orders",
          "on_time_rate"
        ],
        "title": "OrdersSlaStatsModel",
        "type": "object"
      },
      "OrdersSummaryResponse": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/OrderSummaryOut"
            },
            "title": "Data",
            "type": "array"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          },
          "warehouses": {
            "items": {
              "$ref": "#/components/schemas/WarehouseOptionOut"
            },
            "title": "Warehouses",
            "type": "array"
          }
        },
        "required": [
          "data",
          "warehouses"
        ],
        "title": "OrdersSummaryResponse",
        "type": "object"
      },
      "OrdersTrendResponseModel": {
        "properties": {
          "days": {
            "description": "按日期升序排列的 7 天趋势",
            "items": {
              "$ref": "#/components/schemas/OrdersDailyTrendItem"
            },
            "title": "Days",
            "type": "array"
          }
        },
        "title": "OrdersTrendResponseModel",
        "type": "object"
      },
      "OutboundDaySummary": {
        "properties": {
          "day": {
            "format": "date",
            "title": "Day",
            "type": "string"
          },
          "fallback_rate": {
            "title": "Fallback Rate",
            "type": "number"
          },
          "fefo_hit_rate": {
            "title": "Fefo Hit Rate",
            "type": "number"
          },
          "success_rate": {
            "title": "Success Rate",
            "type": "number"
          },
          "total_orders": {
            "title": "Total Orders",
            "type": "integer"
          }
        },
        "required": [
          "day",
          "total_orders",
          "success_rate",
          "fallback_rate",
          "fefo_hit_rate"
        ],
        "title": "OutboundDaySummary",
        "type": "object"
      },
      "OutboundDistributionPoint": {
        "properties": {
          "hour": {
            "title": "Hour",
            "type": "string"
          },
          "orders": {
            "title": "Orders",
            "type": "integer"
          },
          "pick_qty": {
            "title": "Pick Qty",
            "type": "integer"
          }
        },
        "required": [
          "hour",
          "orders",
          "pick_qty"
        ],
        "title": "OutboundDistributionPoint",
        "type": "object"
      },
      "OutboundFailureDetail": {
        "properties": {
          "fail_point": {
            "title": "Fail Point",
            "type": "string"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trace Id"
          }
        },
        "required": [
          "ref",
          "fail_point"
        ],
        "title": "OutboundFailureDetail",
        "type": "object"
      },
      "OutboundFailuresMetricsResponse": {
        "properties": {
          "day": {
            "format": "date",
            "title": "Day",
            "type": "string"
          },
          "details": {
            "default": [],
            "items": {
              "$ref": "#/components/schemas/OutboundFailureDetail"
            },
            "title": "Details",
            "type": "array"
          },
          "inventory_failures_by_code": {
            "additionalProperties": {
              "type": "integer"
            },
            "default": {},
            "title": "Inventory Failures By Code",
            "type": "object"
          },
          "inventory_insufficient": {
            "title": "Inventory Insufficient",
            "type": "integer"
          },
          "pick_failed": {
            "title": "Pick Failed",
            "type": "integer"
          },
          "pick_failures_by_code": {
            "additionalProperties": {
              "type": "integer"
            },
            "default": {},
            "title": "Pick Failures By Code",
            "type": "object"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "routing_failed": {
            "title": "Routing Failed",
            "type": "integer"
          },
          "routing_failures_by_code": {
            "additionalProperties": {
              "type": "integer"
            },
            "default": {},
            "title": "Routing Failures By Code",
            "type": "object"
          },
          "ship_failed": {
            "title": "Ship Failed",
            "type": "integer"
          },
          "ship_failures_by_code": {
            "additionalProperties": {
              "type": "integer"
            },
            "default": {},
            "title": "Ship Failures By Code",
            "type": "object"
          }
        },
        "required": [
          "day",
          "platform",
          "routing_failed",
          "pick_failed",
          "ship_failed",
          "inventory_insufficient"
        ],
        "title": "OutboundFailuresMetricsResponse",
        "type": "object"
      },
      "OutboundLineIn": {
        "description": "出库行：按 (warehouse_id, item_id, batch_code) 粒度扣减。",
        "properties": {
          "batch_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Batch Code"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "qty": {
            "exclusiveMinimum": 0.0,
            "title": "Qty",
            "type": "integer"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "warehouse_id",
          "item_id",
          "qty"
        ],
        "title": "OutboundLineIn",
        "type": "object"
      },
      "OutboundMetricsV2": {
        "description": "单日 + 单平台的出库指标大盘：\n- total_orders      总订单数（ORDER_CREATED）\n- success_orders    成功订单数（SHIP_COMMIT）\n- success_rate      成功率（%）\n\n- fallback_times    fallback 次数\n- fallback_rate     fallback 占比（%）\n\n- fefo_hit_rate     FEFO 命中率（%）\n\n- distribution      当天按小时的出库分布（orders + pick_qty）",
        "properties": {
          "day": {
            "format": "date",
            "title": "Day",
            "type": "string"
          },
          "distribution": {
            "default": [],
            "items": {
              "$ref": "#/components/schemas/OutboundDistributionPoint"
            },
            "title": "Distribution",
            "type": "array"
          },
          "fallback_rate": {
            "title": "Fallback Rate",
            "type": "number"
          },
          "fallback_times": {
            "title": "Fallback Times",
            "type": "integer"
          },
          "fefo_hit_rate": {
            "title": "Fefo Hit Rate",
            "type": "number"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "success_orders": {
            "title": "Success Orders",
            "type": "integer"
          },
          "success_rate": {
            "title": "Success Rate",
            "type": "number"
          },
          "total_orders": {
            "title": "Total Orders",
            "type": "integer"
          }
        },
        "required": [
          "day",
          "platform",
          "total_orders",
          "success_orders",
          "success_rate",
          "fallback_times",
          "fallback_rate",
          "fefo_hit_rate"
        ],
        "title": "OutboundMetricsV2",
        "type": "object"
      },
      "OutboundRangeMetricsResponse": {
        "properties": {
          "days": {
            "items": {
              "$ref": "#/components/schemas/OutboundDaySummary"
            },
            "title": "Days",
            "type": "array"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          }
        },
        "required": [
          "platform",
          "days"
        ],
        "title": "OutboundRangeMetricsResponse",
        "type": "object"
      },
      "OutboundShipIn": {
        "description": "出库请求体（v2+v3 统一版）：\n\n  - platform / shop_id / ref：业务键，用于生成幂等用的 order_id\n  - external_order_ref：可选，挂渠道订单号（当前仅透传给审计/上层，不影响扣减）\n  - occurred_at：可选，不传则用当前时间\n  - lines：一组出库行",
        "properties": {
          "external_order_ref": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "External Order Ref"
          },
          "lines": {
            "items": {
              "$ref": "#/components/schemas/OutboundLineIn"
            },
            "title": "Lines",
            "type": "array"
          },
          "occurred_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Occurred At"
          },
          "platform": {
            "maxLength": 32,
            "minLength": 1,
            "title": "Platform",
            "type": "string"
          },
          "ref": {
            "minLength": 1,
            "title": "Ref",
            "type": "string"
          },
          "shop_id": {
            "minLength": 1,
            "title": "Shop Id",
            "type": "string"
          }
        },
        "required": [
          "platform",
          "shop_id",
          "ref",
          "lines"
        ],
        "title": "OutboundShipIn",
        "type": "object"
      },
      "OutboundShipOut": {
        "properties": {
          "idempotent": {
            "default": false,
            "title": "Idempotent",
            "type": "boolean"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "total_qty": {
            "title": "Total Qty",
            "type": "integer"
          },
          "trace_id": {
            "title": "Trace Id",
            "type": "string"
          }
        },
        "required": [
          "status",
          "total_qty",
          "trace_id"
        ],
        "title": "OutboundShipOut",
        "type": "object"
      },
      "OutboundShopMetric": {
        "properties": {
          "fallback_rate": {
            "title": "Fallback Rate",
            "type": "number"
          },
          "fallback_times": {
            "title": "Fallback Times",
            "type": "integer"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          },
          "success_orders": {
            "title": "Success Orders",
            "type": "integer"
          },
          "success_rate": {
            "title": "Success Rate",
            "type": "number"
          },
          "total_orders": {
            "title": "Total Orders",
            "type": "integer"
          }
        },
        "required": [
          "shop_id",
          "total_orders",
          "success_orders",
          "success_rate",
          "fallback_times",
          "fallback_rate"
        ],
        "title": "OutboundShopMetric",
        "type": "object"
      },
      "OutboundShopMetricsResponse": {
        "properties": {
          "day": {
            "format": "date",
            "title": "Day",
            "type": "string"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "shops": {
            "items": {
              "$ref": "#/components/schemas/OutboundShopMetric"
            },
            "title": "Shops",
            "type": "array"
          }
        },
        "required": [
          "day",
          "platform",
          "shops"
        ],
        "title": "OutboundShopMetricsResponse",
        "type": "object"
      },
      "OutboundWarehouseMetric": {
        "properties": {
          "pick_qty": {
            "title": "Pick Qty",
            "type": "integer"
          },
          "success_orders": {
            "title": "Success Orders",
            "type": "integer"
          },
          "success_rate": {
            "title": "Success Rate",
            "type": "number"
          },
          "total_orders": {
            "title": "Total Orders",
            "type": "integer"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "warehouse_id",
          "total_orders",
          "success_orders",
          "success_rate",
          "pick_qty"
        ],
        "title": "OutboundWarehouseMetric",
        "type": "object"
      },
      "OutboundWarehouseMetricsResponse": {
        "properties": {
          "day": {
            "format": "date",
            "title": "Day",
            "type": "string"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "warehouses": {
            "items": {
              "$ref": "#/components/schemas/OutboundWarehouseMetric"
            },
            "title": "Warehouses",
            "type": "array"
          }
        },
        "required": [
          "day",
          "platform",
          "warehouses"
        ],
        "title": "OutboundWarehouseMetricsResponse",
        "type": "object"
      },
      "PasswordChangeIn": {
        "properties": {
          "new_password": {
            "title": "New Password",
            "type": "string"
          },
          "old_password": {
            "title": "Old Password",
            "type": "string"
          }
        },
        "required": [
          "old_password",
          "new_password"
        ],
        "title": "PasswordChangeIn",
        "type": "object"
      },
      "PasswordResetIn": {
        "properties": {},
        "title": "PasswordResetIn",
        "type": "object"
      },
      "PermissionCreate": {
        "description": "新建权限\n- name 建议形如：`stock.read` / `order.approve`",
        "example": {
          "description": "读取库存数据",
          "name": "stock.read"
        },
        "properties": {
          "description": {
            "anyOf": [
              {
                "maxLength": 256,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "name": {
            "description": "权限名（唯一）",
            "maxLength": 64,
            "minLength": 1,
            "title": "Name",
            "type": "string"
          }
        },
        "required": [
          "name"
        ],
        "title": "PermissionCreate",
        "type": "object"
      },
      "PermissionOut": {
        "example": {
          "description": "读取库存数据",
          "id": 1,
          "name": "stock.read"
        },
        "properties": {
          "description": {
            "anyOf": [
              {
                "maxLength": 256,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "id": {
            "description": "权限ID（整数）",
            "title": "Id",
            "type": "integer"
          },
          "name": {
            "maxLength": 64,
            "minLength": 1,
            "title": "Name",
            "type": "string"
          }
        },
        "required": [
          "id",
          "name"
        ],
        "title": "PermissionOut",
        "type": "object"
      },
      "PickIn": {
        "description": "v2 拣货请求体（与 PickService.record_pick 对齐）：\n\n- 必填：\n    * item_id: 商品 ID\n    * qty: 本次拣货数量（>0）\n    * warehouse_id: 仓库 ID\n    * batch_code: 扣减的批次编码（主线 A：将语义前置到 API 合同）\n    * ref: 拣货引用（用于台账幂等，如 SCAN-xxx）\n- 可选：\n    * occurred_at: 拣货时间，默认当前时间（UTC）\n    * task_line_id: 若有拣货任务行，可用于后续扩展 remain 计算\n    * location_id / device_id / operator: 仅作为审计/扩展信息，当前不影响扣减逻辑",
        "properties": {
          "batch_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "批次编码（批次商品必填；非批次商品必须为 null）",
            "title": "Batch Code"
          },
          "device_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "设备 ID（扫描枪等）",
            "title": "Device Id"
          },
          "item_id": {
            "description": "商品 ID",
            "minimum": 1.0,
            "title": "Item Id",
            "type": "integer"
          },
          "location_id": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "拣货库位 ID（当前不参与扣减，仅作记录）",
            "title": "Location Id"
          },
          "occurred_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "拣货时间（缺省为当前 UTC 时间）",
            "title": "Occurred At"
          },
          "operator": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "操作人 ID 或姓名",
            "title": "Operator"
          },
          "qty": {
            "description": "拣货数量",
            "minimum": 1.0,
            "title": "Qty",
            "type": "integer"
          },
          "ref": {
            "description": "拣货引用（如扫描号）",
            "minLength": 1,
            "title": "Ref",
            "type": "string"
          },
          "task_line_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "可选：拣货任务行 ID，用于后续扩展 remain 计算",
            "title": "Task Line Id"
          },
          "warehouse_id": {
            "description": "仓库 ID",
            "minimum": 1.0,
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "item_id",
          "qty",
          "warehouse_id",
          "ref"
        ],
        "title": "PickIn",
        "type": "object"
      },
      "PickLineIn": {
        "properties": {
          "item_id": {
            "exclusiveMinimum": 0.0,
            "title": "Item Id",
            "type": "integer"
          },
          "qty": {
            "exclusiveMinimum": 0.0,
            "title": "Qty",
            "type": "integer"
          }
        },
        "required": [
          "item_id",
          "qty"
        ],
        "title": "PickLineIn",
        "type": "object"
      },
      "PickOut": {
        "description": "拣货结果（与前端展示需求对齐）：\n- picked: 本次实际扣减数量\n- stock_after: 扣减后库存余额（如果 StockService 有返回）\n- warehouse_id / batch_code / item_id: 标识拣货槽位\n- status: OK / IDEMPOTENT / ERROR",
        "properties": {
          "batch_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Batch Code"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "picked": {
            "title": "Picked",
            "type": "integer"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "stock_after": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Stock After"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "item_id",
          "warehouse_id",
          "batch_code",
          "picked",
          "ref",
          "status"
        ],
        "title": "PickOut",
        "type": "object"
      },
      "PickRequest": {
        "properties": {
          "batch_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "批次编码：批次商品必填且非空；非批次商品必须为 null（合同校验在 API 层完成）",
            "title": "Batch Code"
          },
          "lines": {
            "items": {
              "$ref": "#/components/schemas/PickLineIn"
            },
            "title": "Lines",
            "type": "array"
          },
          "occurred_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "拣货时间（缺省为当前 UTC 时间）",
            "title": "Occurred At"
          },
          "warehouse_id": {
            "description": "拣货仓库 ID（>0，允许 1）",
            "exclusiveMinimum": 0.0,
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "warehouse_id"
        ],
        "title": "PickRequest",
        "type": "object"
      },
      "PickResponse": {
        "properties": {
          "batch_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Batch Code"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "picked": {
            "title": "Picked",
            "type": "integer"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "stock_after": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Stock After"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "item_id",
          "warehouse_id",
          "batch_code",
          "picked",
          "ref",
          "status"
        ],
        "title": "PickResponse",
        "type": "object"
      },
      "PickTaskCommitCheckOut": {
        "description": "只读预检输出（与 Problem 体系同源）：\n- 前端可复用同一套 Problem 渲染组件，不需要做字段映射",
        "properties": {
          "allowed": {
            "title": "Allowed",
            "type": "boolean"
          },
          "context": {
            "additionalProperties": true,
            "title": "Context",
            "type": "object"
          },
          "details": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Details",
            "type": "array"
          },
          "error_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Code"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          },
          "next_actions": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Next Actions",
            "type": "array"
          }
        },
        "required": [
          "allowed"
        ],
        "title": "PickTaskCommitCheckOut",
        "type": "object"
      },
      "PickTaskCommitDiffLineOut": {
        "properties": {
          "delta": {
            "title": "Delta",
            "type": "integer"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "picked_qty": {
            "title": "Picked Qty",
            "type": "integer"
          },
          "req_qty": {
            "title": "Req Qty",
            "type": "integer"
          },
          "status": {
            "title": "Status",
            "type": "string"
          }
        },
        "required": [
          "item_id",
          "req_qty",
          "picked_qty",
          "delta",
          "status"
        ],
        "title": "PickTaskCommitDiffLineOut",
        "type": "object"
      },
      "PickTaskCommitDiffOut": {
        "properties": {
          "has_over": {
            "title": "Has Over",
            "type": "boolean"
          },
          "has_temp_lines": {
            "title": "Has Temp Lines",
            "type": "boolean"
          },
          "has_under": {
            "title": "Has Under",
            "type": "boolean"
          },
          "lines": {
            "items": {
              "$ref": "#/components/schemas/PickTaskCommitDiffLineOut"
            },
            "title": "Lines",
            "type": "array"
          },
          "task_id": {
            "title": "Task Id",
            "type": "integer"
          },
          "temp_lines_n": {
            "title": "Temp Lines N",
            "type": "integer"
          }
        },
        "required": [
          "task_id",
          "has_over",
          "has_under",
          "has_temp_lines",
          "temp_lines_n",
          "lines"
        ],
        "title": "PickTaskCommitDiffOut",
        "type": "object"
      },
      "PickTaskCommitIn": {
        "properties": {
          "allow_diff": {
            "default": true,
            "description": "是否允许在存在 OVER/UNDER 的情况下仍然 commit 出库",
            "title": "Allow Diff",
            "type": "boolean"
          },
          "handoff_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "（已废弃/兼容字段）订单确认码。新主线不需要；若传入则会做一致性校验。",
            "title": "Handoff Code"
          },
          "platform": {
            "description": "平台标识，如 PDD / TAOBAO",
            "title": "Platform",
            "type": "string"
          },
          "shop_id": {
            "description": "店铺 ID（字符串）",
            "title": "Shop Id",
            "type": "string"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "链路 trace_id，可选；若空则由服务层 fallback 到 ref",
            "title": "Trace Id"
          }
        },
        "required": [
          "platform",
          "shop_id"
        ],
        "title": "PickTaskCommitIn",
        "type": "object"
      },
      "PickTaskCommitResult": {
        "properties": {
          "committed_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "本次提交时间（ISO8601，UTC；幂等重放时为首次提交 created_at）",
            "title": "Committed At"
          },
          "diff": {
            "$ref": "#/components/schemas/PickTaskCommitDiffOut"
          },
          "idempotent": {
            "default": false,
            "description": "是否为幂等重放结果（True 表示未重复落账/未重复扣库）",
            "title": "Idempotent",
            "type": "boolean"
          },
          "next_actions": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Next Actions",
            "type": "array"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "task_id": {
            "title": "Task Id",
            "type": "integer"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "本次提交最终使用的 trace_id（幂等重放时为已存在的 trace_id）",
            "title": "Trace Id"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "status",
          "task_id",
          "warehouse_id",
          "platform",
          "shop_id",
          "ref",
          "diff"
        ],
        "title": "PickTaskCommitResult",
        "type": "object"
      },
      "PickTaskCreateFromOrder": {
        "properties": {
          "priority": {
            "default": 100,
            "description": "任务优先级（整数，越小越高，一般 100 即可）",
            "minimum": 0.0,
            "title": "Priority",
            "type": "integer"
          },
          "source": {
            "default": "ORDER",
            "description": "任务来源标记（默认 'ORDER'）",
            "title": "Source",
            "type": "string"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "拣货仓库 ID；手工模式必须显式提供。",
            "title": "Warehouse Id"
          }
        },
        "title": "PickTaskCreateFromOrder",
        "type": "object"
      },
      "PickTaskDiffLineOut": {
        "properties": {
          "delta": {
            "title": "Delta",
            "type": "integer"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "picked_qty": {
            "title": "Picked Qty",
            "type": "integer"
          },
          "req_qty": {
            "title": "Req Qty",
            "type": "integer"
          },
          "status": {
            "title": "Status",
            "type": "string"
          }
        },
        "required": [
          "item_id",
          "req_qty",
          "picked_qty",
          "delta",
          "status"
        ],
        "title": "PickTaskDiffLineOut",
        "type": "object"
      },
      "PickTaskDiffSummaryOut": {
        "properties": {
          "has_over": {
            "title": "Has Over",
            "type": "boolean"
          },
          "has_under": {
            "title": "Has Under",
            "type": "boolean"
          },
          "lines": {
            "items": {
              "$ref": "#/components/schemas/PickTaskDiffLineOut"
            },
            "title": "Lines",
            "type": "array"
          },
          "task_id": {
            "title": "Task Id",
            "type": "integer"
          }
        },
        "required": [
          "task_id",
          "has_over",
          "has_under",
          "lines"
        ],
        "title": "PickTaskDiffSummaryOut",
        "type": "object"
      },
      "PickTaskLineOut": {
        "properties": {
          "batch_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Batch Code"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "delta": {
            "readOnly": true,
            "title": "Delta",
            "type": "integer"
          },
          "diff_status": {
            "readOnly": true,
            "title": "Diff Status",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note"
          },
          "order_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Order Id"
          },
          "order_line_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Order Line Id"
          },
          "picked_qty": {
            "title": "Picked Qty",
            "type": "integer"
          },
          "remain_qty": {
            "readOnly": true,
            "title": "Remain Qty",
            "type": "integer"
          },
          "req_qty": {
            "title": "Req Qty",
            "type": "integer"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "task_id": {
            "title": "Task Id",
            "type": "integer"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          }
        },
        "required": [
          "id",
          "task_id",
          "order_id",
          "order_line_id",
          "item_id",
          "req_qty",
          "picked_qty",
          "batch_code",
          "status",
          "note",
          "created_at",
          "updated_at",
          "remain_qty",
          "delta",
          "diff_status"
        ],
        "title": "PickTaskLineOut",
        "type": "object"
      },
      "PickTaskOut": {
        "properties": {
          "assigned_to": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Assigned To"
          },
          "commit_gate": {
            "$ref": "#/components/schemas/GateOut",
            "readOnly": true
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "has_over": {
            "readOnly": true,
            "title": "Has Over",
            "type": "boolean"
          },
          "has_under": {
            "readOnly": true,
            "title": "Has Under",
            "type": "boolean"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "lines": {
            "items": {
              "$ref": "#/components/schemas/PickTaskLineOut"
            },
            "title": "Lines",
            "type": "array"
          },
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note"
          },
          "picked_total": {
            "readOnly": true,
            "title": "Picked Total",
            "type": "integer"
          },
          "print_job": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/PrintJobOut"
              },
              {
                "type": "null"
              }
            ]
          },
          "priority": {
            "title": "Priority",
            "type": "integer"
          },
          "ref": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ref"
          },
          "remain_total": {
            "readOnly": true,
            "title": "Remain Total",
            "type": "integer"
          },
          "req_total": {
            "readOnly": true,
            "title": "Req Total",
            "type": "integer"
          },
          "scan_gate": {
            "$ref": "#/components/schemas/GateOut",
            "readOnly": true
          },
          "source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "id",
          "warehouse_id",
          "ref",
          "source",
          "priority",
          "status",
          "assigned_to",
          "note",
          "created_at",
          "updated_at",
          "req_total",
          "picked_total",
          "remain_total",
          "has_over",
          "has_under",
          "scan_gate",
          "commit_gate"
        ],
        "title": "PickTaskOut",
        "type": "object"
      },
      "PickTaskPrintPickListIn": {
        "properties": {
          "order_id": {
            "description": "订单 ID（手工触发打印必须显式提供）",
            "minimum": 1.0,
            "title": "Order Id",
            "type": "integer"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "可选：打印 payload 里的 trace_id；为空则使用订单 trace_id（如果存在）",
            "title": "Trace Id"
          }
        },
        "required": [
          "order_id"
        ],
        "title": "PickTaskPrintPickListIn",
        "type": "object"
      },
      "PickTaskScanIn": {
        "properties": {
          "batch_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "批次编码（可选；若为空，后续 commit_ship 会按批次规则决定是否拒绝）",
            "title": "Batch Code"
          },
          "item_id": {
            "description": "商品 ID",
            "title": "Item Id",
            "type": "integer"
          },
          "qty": {
            "description": "本次拣货数量（>0）",
            "exclusiveMinimum": 0.0,
            "title": "Qty",
            "type": "integer"
          }
        },
        "required": [
          "item_id",
          "qty"
        ],
        "title": "PickTaskScanIn",
        "type": "object"
      },
      "PlatformEventListOut": {
        "properties": {
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          },
          "rows": {
            "items": {
              "$ref": "#/components/schemas/PlatformEventRow"
            },
            "title": "Rows",
            "type": "array"
          }
        },
        "required": [
          "rows"
        ],
        "title": "PlatformEventListOut",
        "type": "object"
      },
      "PlatformEventRow": {
        "properties": {
          "dedup_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Dedup Key"
          },
          "event_type": {
            "title": "Event Type",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "occurred_at": {
            "format": "date-time",
            "title": "Occurred At",
            "type": "string"
          },
          "payload": {
            "additionalProperties": true,
            "title": "Payload",
            "type": "object"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          },
          "status": {
            "title": "Status",
            "type": "string"
          }
        },
        "required": [
          "id",
          "platform",
          "shop_id",
          "event_type",
          "status",
          "occurred_at",
          "payload"
        ],
        "title": "PlatformEventRow",
        "type": "object"
      },
      "PlatformOrderAddressOut": {
        "description": "平台订单收件信息（镜像用）\n字段命名对齐你们 ingest 的 receiver_* / province/city/district/detail",
        "properties": {
          "city": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City"
          },
          "detail": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detail"
          },
          "district": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "District"
          },
          "province": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Province"
          },
          "receiver_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Receiver Name"
          },
          "receiver_phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Receiver Phone"
          },
          "zipcode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Zipcode"
          }
        },
        "title": "PlatformOrderAddressOut",
        "type": "object"
      },
      "PlatformOrderConfirmCreateDecisionIn": {
        "description": "Phase N+4 · 人工决策输入（单行）\n\n说明：\n- filled_code 是“填写码”唯一语义字段\n- line_key 是内部幂等锚点（不推荐外部使用）\n- locator_kind/locator_value 是对外定位语义（推荐）\n  * FILLED_CODE + filled_code\n  * LINE_NO + str(line_no)",
        "properties": {
          "filled_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "商家后台填写码（推荐；唯一语义字段）",
            "title": "Filled Code"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "line_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Line Key"
          },
          "line_no": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Line No"
          },
          "locator_kind": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "对外定位类型（推荐）：FILLED_CODE / LINE_NO",
            "title": "Locator Kind"
          },
          "locator_value": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "对外定位值（推荐）：当 FILLED_CODE 时为 filled_code；当 LINE_NO 时为 line_no 文本",
            "title": "Locator Value"
          },
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note"
          },
          "platform_sku_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "已废弃：出现即报错（请使用 filled_code）",
            "title": "Platform Sku Id"
          },
          "qty": {
            "title": "Qty",
            "type": "integer"
          }
        },
        "required": [
          "item_id",
          "qty"
        ],
        "title": "PlatformOrderConfirmCreateDecisionIn",
        "type": "object"
      },
      "PlatformOrderConfirmCreateDecisionOut": {
        "description": "Phase N+4 · 人工决策明细（输出）\n\n说明：\n- filled_code 为唯一语义字段\n- locator_kind/value 为推荐定位语义（与 line_key 分层）",
        "properties": {
          "fact_qty": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fact Qty"
          },
          "filled_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "商家后台填写码（唯一语义字段）",
            "title": "Filled Code"
          },
          "item_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Id"
          },
          "line_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Line Key"
          },
          "line_no": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Line No"
          },
          "locator_kind": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "对外定位类型（推荐）：FILLED_CODE / LINE_NO",
            "title": "Locator Kind"
          },
          "locator_value": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "对外定位值（推荐）",
            "title": "Locator Value"
          },
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note"
          },
          "qty": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Qty"
          }
        },
        "title": "PlatformOrderConfirmCreateDecisionOut",
        "type": "object"
      },
      "PlatformOrderConfirmCreateIn": {
        "description": "Phase N+4 · 当单执行（人工确认后创建订单）\n\n解析语义：\n- 决策行优先使用 locator（locator_kind/value）\n- 其次使用 filled_code / line_no\n- line_key 仅作为旧链路兼容",
        "properties": {
          "decisions": {
            "description": "人工决策行列表",
            "items": {
              "$ref": "#/components/schemas/PlatformOrderConfirmCreateDecisionIn"
            },
            "title": "Decisions",
            "type": "array"
          },
          "ext_order_no": {
            "title": "Ext Order No",
            "type": "string"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reason"
          },
          "store_id": {
            "title": "Store Id",
            "type": "integer"
          }
        },
        "required": [
          "platform",
          "store_id",
          "ext_order_no"
        ],
        "title": "PlatformOrderConfirmCreateIn",
        "type": "object"
      },
      "PlatformOrderConfirmCreateOut": {
        "properties": {
          "blocked_reasons": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Blocked Reasons"
          },
          "decisions": {
            "items": {
              "$ref": "#/components/schemas/PlatformOrderConfirmCreateDecisionOut"
            },
            "title": "Decisions",
            "type": "array"
          },
          "ext_order_no": {
            "title": "Ext Order No",
            "type": "string"
          },
          "facts_n": {
            "title": "Facts N",
            "type": "integer"
          },
          "fulfillment_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fulfillment Status"
          },
          "id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Id"
          },
          "manual_batch_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Manual Batch Id"
          },
          "manual_override": {
            "title": "Manual Override",
            "type": "boolean"
          },
          "manual_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Manual Reason"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          },
          "risk_flags": {
            "items": {
              "type": "string"
            },
            "title": "Risk Flags",
            "type": "array"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "store_id": {
            "title": "Store Id",
            "type": "integer"
          }
        },
        "required": [
          "status",
          "id",
          "ref",
          "platform",
          "store_id",
          "ext_order_no",
          "manual_override",
          "facts_n"
        ],
        "title": "PlatformOrderConfirmCreateOut",
        "type": "object"
      },
      "PlatformOrderIngestIn": {
        "description": "Phase N+2 · 平台订单接入（宽进严出）",
        "properties": {
          "buyer_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Buyer Name"
          },
          "buyer_phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Buyer Phone"
          },
          "city": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City"
          },
          "detail": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detail"
          },
          "district": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "District"
          },
          "ext_order_no": {
            "minLength": 1,
            "title": "Ext Order No",
            "type": "string"
          },
          "lines": {
            "description": "订单行列表（可含 legacy 形态行）",
            "items": {
              "$ref": "#/components/schemas/PlatformOrderLineIn"
            },
            "title": "Lines",
            "type": "array"
          },
          "occurred_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Occurred At"
          },
          "platform": {
            "maxLength": 32,
            "minLength": 1,
            "title": "Platform",
            "type": "string"
          },
          "province": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Province"
          },
          "raw_payload": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Raw Payload"
          },
          "receiver_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Receiver Name"
          },
          "receiver_phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Receiver Phone"
          },
          "shop_id": {
            "anyOf": [
              {
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Shop Id"
          },
          "store_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Store Id"
          },
          "store_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Store Name"
          },
          "zipcode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Zipcode"
          }
        },
        "required": [
          "platform",
          "ext_order_no"
        ],
        "title": "PlatformOrderIngestIn",
        "type": "object"
      },
      "PlatformOrderIngestOut": {
        "description": "Phase D · 证据结构化输出（顶层）\n\n- reason_code：单一主因（稳定治理锚点）\n- next_actions：面向操作者的全局动作建议（可执行）",
        "properties": {
          "allow_manual_continue": {
            "default": false,
            "title": "Allow Manual Continue",
            "type": "boolean"
          },
          "blocked_reasons": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Blocked Reasons"
          },
          "facts_written": {
            "title": "Facts Written",
            "type": "integer"
          },
          "fulfillment_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fulfillment Status"
          },
          "id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Id"
          },
          "next_actions": {
            "description": "面向操作者的下一步动作建议（可执行）",
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Next Actions",
            "type": "array"
          },
          "reason_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "单一主因（OK / CODE_NOT_BOUND / MISSING_FILLED_CODE / ROUTING_BLOCKED 等）",
            "title": "Reason Code"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          },
          "resolved": {
            "items": {
              "$ref": "#/components/schemas/PlatformOrderLineResult"
            },
            "title": "Resolved",
            "type": "array"
          },
          "risk_flags": {
            "items": {
              "type": "string"
            },
            "title": "Risk Flags",
            "type": "array"
          },
          "risk_level": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Risk Level"
          },
          "risk_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Risk Reason"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "store_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Store Id"
          },
          "unresolved": {
            "items": {
              "$ref": "#/components/schemas/PlatformOrderLineResult"
            },
            "title": "Unresolved",
            "type": "array"
          }
        },
        "required": [
          "status",
          "id",
          "ref",
          "store_id",
          "facts_written"
        ],
        "title": "PlatformOrderIngestOut",
        "type": "object"
      },
      "PlatformOrderLineIn": {
        "description": "Phase N+2 · 平台订单行输入\n\n说明：\n- filled_code 为推荐字段（Phase N+2 语义）\n- 二者均可缺失，是否可执行由 resolver 判定（而非 schema 阶段）",
        "properties": {
          "extras": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "description": "行级扩展字段",
            "title": "Extras"
          },
          "filled_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "商家后台填写码（Phase N+2 推荐字段）",
            "title": "Filled Code"
          },
          "qty": {
            "default": 1,
            "description": "数量（>0）",
            "exclusiveMinimum": 0.0,
            "title": "Qty",
            "type": "integer"
          },
          "spec": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "规格描述（可选）",
            "title": "Spec"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "商品标题（可选）",
            "title": "Title"
          }
        },
        "title": "PlatformOrderLineIn",
        "type": "object"
      },
      "PlatformOrderLineOut": {
        "description": "平台订单“原始行”（镜像用）\n只输出平台侧可理解字段，不输出作业字段。\n\nPhase 5+ 镜像口径：\n- 基础字段来自 order_items：item_id/sku_id/title/qty/price/discount/amount/extras\n- extras（JSONB）用于承载平台原始字段（规格、属性、平台 SKU 信息等）",
        "properties": {
          "amount": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Amount"
          },
          "discount": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Discount"
          },
          "extras": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Extras"
          },
          "item_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Id"
          },
          "price": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Price"
          },
          "qty": {
            "default": 0,
            "title": "Qty",
            "type": "integer"
          },
          "sku": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sku"
          },
          "spec": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Spec"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          }
        },
        "title": "PlatformOrderLineOut",
        "type": "object"
      },
      "PlatformOrderLineResult": {
        "description": "行级解析结果（Phase N+2 输出）",
        "properties": {
          "expanded_items": {
            "anyOf": [
              {
                "items": {
                  "additionalProperties": true,
                  "type": "object"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expanded Items"
          },
          "filled_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filled Code"
          },
          "fsku_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fsku Id"
          },
          "hint": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hint"
          },
          "next_actions": {
            "anyOf": [
              {
                "items": {
                  "additionalProperties": true,
                  "type": "object"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Next Actions"
          },
          "qty": {
            "title": "Qty",
            "type": "integer"
          },
          "reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reason"
          },
          "risk_flags": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Risk Flags"
          },
          "risk_level": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Risk Level"
          },
          "risk_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Risk Reason"
          }
        },
        "required": [
          "qty"
        ],
        "title": "PlatformOrderLineResult",
        "type": "object"
      },
      "PlatformOrderOut": {
        "description": "平台订单“镜像头” + “原始行 items”\n\nraw：\n- 为详情页/排障保留的“原始包”（orders/order_items/order_address 原始行的 json-friendly 版本）\n- 不携带履约累积语义（shipped/returned 等）",
        "properties": {
          "address": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/PlatformOrderAddressOut"
              },
              {
                "type": "null"
              }
            ]
          },
          "buyer_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Buyer Name"
          },
          "buyer_phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Buyer Phone"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "ext_order_no": {
            "title": "Ext Order No",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "items": {
            "default": [],
            "items": {
              "$ref": "#/components/schemas/PlatformOrderLineOut"
            },
            "title": "Items",
            "type": "array"
          },
          "order_amount": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Order Amount"
          },
          "pay_amount": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pay Amount"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "raw": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Raw"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "updated_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          }
        },
        "required": [
          "id",
          "platform",
          "shop_id",
          "ext_order_no",
          "created_at"
        ],
        "title": "PlatformOrderOut",
        "type": "object"
      },
      "PlatformOrderReplayIn": {
        "description": "平台订单事实重放解码（内部治理接口）：\n- 入参只接收 store_id（stores.id）\n- 读取 platform_order_lines 事实行\n- 复用 resolver + OrderService.ingest 主线幂等",
        "properties": {
          "ext_order_no": {
            "minLength": 1,
            "title": "Ext Order No",
            "type": "string"
          },
          "platform": {
            "maxLength": 32,
            "minLength": 1,
            "title": "Platform",
            "type": "string"
          },
          "store_id": {
            "minimum": 1.0,
            "title": "Store Id",
            "type": "integer"
          }
        },
        "required": [
          "platform",
          "store_id",
          "ext_order_no"
        ],
        "title": "PlatformOrderReplayIn",
        "type": "object"
      },
      "PlatformOrderReplayOut": {
        "properties": {
          "blocked_reasons": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Blocked Reasons"
          },
          "ext_order_no": {
            "title": "Ext Order No",
            "type": "string"
          },
          "facts_n": {
            "default": 0,
            "title": "Facts N",
            "type": "integer"
          },
          "fulfillment_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fulfillment Status"
          },
          "id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Id"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          },
          "resolved": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Resolved",
            "type": "array"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "store_id": {
            "title": "Store Id",
            "type": "integer"
          },
          "unresolved": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Unresolved",
            "type": "array"
          }
        },
        "required": [
          "status",
          "ref",
          "platform",
          "store_id",
          "ext_order_no"
        ],
        "title": "PlatformOrderReplayOut",
        "type": "object"
      },
      "PlatformShopCredentialsIn": {
        "description": "手工录入平台店铺凭据（例如：为了快速联调用，不走 OAuth 流程）。",
        "properties": {
          "access_token": {
            "minLength": 1,
            "title": "Access Token",
            "type": "string"
          },
          "platform": {
            "maxLength": 16,
            "minLength": 1,
            "title": "Platform",
            "type": "string"
          },
          "shop_id": {
            "maxLength": 64,
            "minLength": 1,
            "title": "Shop Id",
            "type": "string"
          },
          "status": {
            "anyOf": [
              {
                "maxLength": 32,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": "ACTIVE",
            "title": "Status"
          },
          "store_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Store Name"
          },
          "token_expires_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Token Expires At"
          }
        },
        "required": [
          "platform",
          "shop_id",
          "access_token"
        ],
        "title": "PlatformShopCredentialsIn",
        "type": "object"
      },
      "PoSummaryOut": {
        "properties": {
          "occurred_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Occurred At"
          },
          "po_id": {
            "title": "Po Id",
            "type": "integer"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "supplier_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Id"
          },
          "supplier_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Name"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "po_id",
          "warehouse_id"
        ],
        "title": "PoSummaryOut",
        "type": "object"
      },
      "PricingIntegrityArchivedTemplateStillReferencedIssue": {
        "properties": {
          "referencing_zone_ids": {
            "items": {
              "type": "integer"
            },
            "title": "Referencing Zone Ids",
            "type": "array"
          },
          "referencing_zone_n": {
            "default": 0,
            "title": "Referencing Zone N",
            "type": "integer"
          },
          "referencing_zone_names": {
            "items": {
              "type": "string"
            },
            "title": "Referencing Zone Names",
            "type": "array"
          },
          "scheme_id": {
            "title": "Scheme Id",
            "type": "integer"
          },
          "suggested_action": {
            "default": "UNBIND_ARCHIVED_TEMPLATE",
            "title": "Suggested Action",
            "type": "string"
          },
          "template_id": {
            "title": "Template Id",
            "type": "integer"
          },
          "template_name": {
            "title": "Template Name",
            "type": "string"
          },
          "template_status": {
            "title": "Template Status",
            "type": "string"
          }
        },
        "required": [
          "scheme_id",
          "template_id",
          "template_name",
          "template_status"
        ],
        "title": "PricingIntegrityArchivedTemplateStillReferencedIssue",
        "type": "object"
      },
      "PricingIntegrityArchivedZoneIssue": {
        "properties": {
          "province_member_n": {
            "default": 0,
            "title": "Province Member N",
            "type": "integer"
          },
          "province_members": {
            "items": {
              "type": "string"
            },
            "title": "Province Members",
            "type": "array"
          },
          "scheme_id": {
            "title": "Scheme Id",
            "type": "integer"
          },
          "suggested_action": {
            "default": "ARCHIVE_RELEASE_PROVINCES",
            "title": "Suggested Action",
            "type": "string"
          },
          "zone_active": {
            "title": "Zone Active",
            "type": "boolean"
          },
          "zone_id": {
            "title": "Zone Id",
            "type": "integer"
          },
          "zone_name": {
            "title": "Zone Name",
            "type": "string"
          }
        },
        "required": [
          "scheme_id",
          "zone_id",
          "zone_name",
          "zone_active"
        ],
        "title": "PricingIntegrityArchivedZoneIssue",
        "type": "object"
      },
      "PricingIntegrityFixArchiveReleaseIn": {
        "properties": {
          "dry_run": {
            "default": false,
            "title": "Dry Run",
            "type": "boolean"
          },
          "scheme_id": {
            "minimum": 1.0,
            "title": "Scheme Id",
            "type": "integer"
          },
          "zone_ids": {
            "items": {
              "type": "integer"
            },
            "minItems": 1,
            "title": "Zone Ids",
            "type": "array"
          }
        },
        "required": [
          "scheme_id",
          "zone_ids"
        ],
        "title": "PricingIntegrityFixArchiveReleaseIn",
        "type": "object"
      },
      "PricingIntegrityFixArchiveReleaseItemOut": {
        "properties": {
          "after_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "After Active"
          },
          "after_province_member_n": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "After Province Member N"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          },
          "would_release_n": {
            "default": 0,
            "title": "Would Release N",
            "type": "integer"
          },
          "would_release_provinces": {
            "items": {
              "type": "string"
            },
            "title": "Would Release Provinces",
            "type": "array"
          },
          "zone_id": {
            "title": "Zone Id",
            "type": "integer"
          },
          "zone_name": {
            "title": "Zone Name",
            "type": "string"
          }
        },
        "required": [
          "zone_id",
          "zone_name",
          "ok"
        ],
        "title": "PricingIntegrityFixArchiveReleaseItemOut",
        "type": "object"
      },
      "PricingIntegrityFixArchiveReleaseOut": {
        "properties": {
          "dry_run": {
            "title": "Dry Run",
            "type": "boolean"
          },
          "items": {
            "items": {
              "$ref": "#/components/schemas/PricingIntegrityFixArchiveReleaseItemOut"
            },
            "title": "Items",
            "type": "array"
          },
          "scheme_id": {
            "title": "Scheme Id",
            "type": "integer"
          }
        },
        "required": [
          "scheme_id",
          "dry_run"
        ],
        "title": "PricingIntegrityFixArchiveReleaseOut",
        "type": "object"
      },
      "PricingIntegrityFixDetachZoneBracketsIn": {
        "properties": {
          "dry_run": {
            "default": false,
            "title": "Dry Run",
            "type": "boolean"
          },
          "scheme_id": {
            "minimum": 1.0,
            "title": "Scheme Id",
            "type": "integer"
          },
          "zone_ids": {
            "items": {
              "type": "integer"
            },
            "minItems": 1,
            "title": "Zone Ids",
            "type": "array"
          }
        },
        "required": [
          "scheme_id",
          "zone_ids"
        ],
        "title": "PricingIntegrityFixDetachZoneBracketsIn",
        "type": "object"
      },
      "PricingIntegrityFixDetachZoneBracketsItemOut": {
        "properties": {
          "after_brackets_n": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "After Brackets N"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          },
          "province_member_n": {
            "default": 0,
            "title": "Province Member N",
            "type": "integer"
          },
          "would_delete_brackets_n": {
            "default": 0,
            "title": "Would Delete Brackets N",
            "type": "integer"
          },
          "would_delete_ranges_preview": {
            "items": {
              "type": "string"
            },
            "title": "Would Delete Ranges Preview",
            "type": "array"
          },
          "zone_id": {
            "title": "Zone Id",
            "type": "integer"
          },
          "zone_name": {
            "title": "Zone Name",
            "type": "string"
          }
        },
        "required": [
          "zone_id",
          "zone_name",
          "ok"
        ],
        "title": "PricingIntegrityFixDetachZoneBracketsItemOut",
        "type": "object"
      },
      "PricingIntegrityFixDetachZoneBracketsOut": {
        "properties": {
          "dry_run": {
            "title": "Dry Run",
            "type": "boolean"
          },
          "items": {
            "items": {
              "$ref": "#/components/schemas/PricingIntegrityFixDetachZoneBracketsItemOut"
            },
            "title": "Items",
            "type": "array"
          },
          "scheme_id": {
            "title": "Scheme Id",
            "type": "integer"
          }
        },
        "required": [
          "scheme_id",
          "dry_run"
        ],
        "title": "PricingIntegrityFixDetachZoneBracketsOut",
        "type": "object"
      },
      "PricingIntegrityFixUnbindArchivedTemplatesIn": {
        "properties": {
          "dry_run": {
            "default": false,
            "title": "Dry Run",
            "type": "boolean"
          },
          "scheme_id": {
            "minimum": 1.0,
            "title": "Scheme Id",
            "type": "integer"
          },
          "template_ids": {
            "items": {
              "type": "integer"
            },
            "minItems": 1,
            "title": "Template Ids",
            "type": "array"
          }
        },
        "required": [
          "scheme_id",
          "template_ids"
        ],
        "title": "PricingIntegrityFixUnbindArchivedTemplatesIn",
        "type": "object"
      },
      "PricingIntegrityFixUnbindArchivedTemplatesItemOut": {
        "properties": {
          "after_unbound_zone_n": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "After Unbound Zone N"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          },
          "template_id": {
            "title": "Template Id",
            "type": "integer"
          },
          "template_name": {
            "title": "Template Name",
            "type": "string"
          },
          "template_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Template Status"
          },
          "would_unbind_zone_ids": {
            "items": {
              "type": "integer"
            },
            "title": "Would Unbind Zone Ids",
            "type": "array"
          },
          "would_unbind_zone_n": {
            "default": 0,
            "title": "Would Unbind Zone N",
            "type": "integer"
          },
          "would_unbind_zone_names": {
            "items": {
              "type": "string"
            },
            "title": "Would Unbind Zone Names",
            "type": "array"
          }
        },
        "required": [
          "template_id",
          "template_name",
          "ok"
        ],
        "title": "PricingIntegrityFixUnbindArchivedTemplatesItemOut",
        "type": "object"
      },
      "PricingIntegrityFixUnbindArchivedTemplatesOut": {
        "properties": {
          "dry_run": {
            "title": "Dry Run",
            "type": "boolean"
          },
          "items": {
            "items": {
              "$ref": "#/components/schemas/PricingIntegrityFixUnbindArchivedTemplatesItemOut"
            },
            "title": "Items",
            "type": "array"
          },
          "scheme_id": {
            "title": "Scheme Id",
            "type": "integer"
          }
        },
        "required": [
          "scheme_id",
          "dry_run"
        ],
        "title": "PricingIntegrityFixUnbindArchivedTemplatesOut",
        "type": "object"
      },
      "PricingIntegrityReleasedZoneStillPricedIssue": {
        "properties": {
          "brackets_n": {
            "default": 0,
            "title": "Brackets N",
            "type": "integer"
          },
          "province_member_n": {
            "default": 0,
            "title": "Province Member N",
            "type": "integer"
          },
          "scheme_id": {
            "title": "Scheme Id",
            "type": "integer"
          },
          "segment_template_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Segment Template Id"
          },
          "suggested_action": {
            "default": "DETACH_ZONE_BRACKETS",
            "title": "Suggested Action",
            "type": "string"
          },
          "zone_active": {
            "title": "Zone Active",
            "type": "boolean"
          },
          "zone_id": {
            "title": "Zone Id",
            "type": "integer"
          },
          "zone_name": {
            "title": "Zone Name",
            "type": "string"
          }
        },
        "required": [
          "scheme_id",
          "zone_id",
          "zone_name",
          "zone_active"
        ],
        "title": "PricingIntegrityReleasedZoneStillPricedIssue",
        "type": "object"
      },
      "PricingIntegrityReportOut": {
        "properties": {
          "archived_templates_still_referenced": {
            "items": {
              "$ref": "#/components/schemas/PricingIntegrityArchivedTemplateStillReferencedIssue"
            },
            "title": "Archived Templates Still Referenced",
            "type": "array"
          },
          "archived_zones_still_occupying": {
            "items": {
              "$ref": "#/components/schemas/PricingIntegrityArchivedZoneIssue"
            },
            "title": "Archived Zones Still Occupying",
            "type": "array"
          },
          "released_zones_still_priced": {
            "items": {
              "$ref": "#/components/schemas/PricingIntegrityReleasedZoneStillPricedIssue"
            },
            "title": "Released Zones Still Priced",
            "type": "array"
          },
          "scheme_id": {
            "title": "Scheme Id",
            "type": "integer"
          },
          "summary": {
            "$ref": "#/components/schemas/PricingIntegrityReportSummary"
          }
        },
        "required": [
          "scheme_id",
          "summary"
        ],
        "title": "PricingIntegrityReportOut",
        "type": "object"
      },
      "PricingIntegrityReportSummary": {
        "properties": {
          "blocking": {
            "default": 0,
            "title": "Blocking",
            "type": "integer"
          },
          "warning": {
            "default": 0,
            "title": "Warning",
            "type": "integer"
          }
        },
        "title": "PricingIntegrityReportSummary",
        "type": "object"
      },
      "PrintJobOut": {
        "properties": {
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "kind": {
            "title": "Kind",
            "type": "string"
          },
          "payload": {
            "additionalProperties": true,
            "title": "Payload",
            "type": "object"
          },
          "printed_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Printed At"
          },
          "ref_id": {
            "title": "Ref Id",
            "type": "integer"
          },
          "ref_type": {
            "title": "Ref Type",
            "type": "string"
          },
          "requested_at": {
            "format": "date-time",
            "title": "Requested At",
            "type": "string"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          }
        },
        "required": [
          "id",
          "kind",
          "ref_type",
          "ref_id",
          "status",
          "payload",
          "requested_at",
          "printed_at",
          "error",
          "created_at",
          "updated_at"
        ],
        "title": "PrintJobOut",
        "type": "object"
      },
      "ProblemItem": {
        "description": "统一 Problem.errors 形状（前端可直接定位到 header 或 line[index]）",
        "properties": {
          "field": {
            "description": "对外语义字段名（不暴露内部变量名）",
            "title": "Field",
            "type": "string"
          },
          "index": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "当 scope=line 时，指向 lines 的索引",
            "title": "Index"
          },
          "message": {
            "description": "错误提示（面向使用者）",
            "title": "Message",
            "type": "string"
          },
          "scope": {
            "description": "错误范围：header 或 line",
            "enum": [
              "header",
              "line"
            ],
            "title": "Scope",
            "type": "string"
          }
        },
        "required": [
          "scope",
          "field",
          "message"
        ],
        "title": "ProblemItem",
        "type": "object"
      },
      "ProvinceRouteCreateIn": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "priority": {
            "default": 100,
            "maximum": 100000.0,
            "minimum": 0.0,
            "title": "Priority",
            "type": "integer"
          },
          "province": {
            "maxLength": 32,
            "minLength": 1,
            "title": "Province",
            "type": "string"
          },
          "warehouse_id": {
            "minimum": 1.0,
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "province",
          "warehouse_id"
        ],
        "title": "ProvinceRouteCreateIn",
        "type": "object"
      },
      "ProvinceRouteItem": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "priority": {
            "default": 100,
            "title": "Priority",
            "type": "integer"
          },
          "province": {
            "title": "Province",
            "type": "string"
          },
          "store_id": {
            "title": "Store Id",
            "type": "integer"
          },
          "warehouse_active": {
            "default": true,
            "title": "Warehouse Active",
            "type": "boolean"
          },
          "warehouse_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Code"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          },
          "warehouse_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Name"
          }
        },
        "required": [
          "id",
          "store_id",
          "province",
          "warehouse_id"
        ],
        "title": "ProvinceRouteItem",
        "type": "object"
      },
      "ProvinceRouteListOut": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/ProvinceRouteItem"
            },
            "title": "Data",
            "type": "array"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "ProvinceRouteListOut",
        "type": "object"
      },
      "ProvinceRouteUpdateIn": {
        "properties": {
          "active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active"
          },
          "priority": {
            "anyOf": [
              {
                "maximum": 100000.0,
                "minimum": 0.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Priority"
          },
          "province": {
            "anyOf": [
              {
                "maxLength": 32,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Province"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "minimum": 1.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Id"
          }
        },
        "title": "ProvinceRouteUpdateIn",
        "type": "object"
      },
      "ProvinceRouteWriteOut": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "title": "Data",
            "type": "object"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "ProvinceRouteWriteOut",
        "type": "object"
      },
      "PurchaseOrderCloseIn": {
        "properties": {
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "关闭备注（可选）",
            "title": "Note"
          }
        },
        "title": "PurchaseOrderCloseIn",
        "type": "object"
      },
      "PurchaseOrderCreateV2": {
        "properties": {
          "lines": {
            "description": "采购行列表，至少一行",
            "items": {
              "$ref": "#/components/schemas/PurchaseOrderLineCreate"
            },
            "minItems": 1,
            "title": "Lines",
            "type": "array"
          },
          "purchase_time": {
            "description": "采购时间（下单/确认时间）",
            "format": "date-time",
            "title": "Purchase Time",
            "type": "string"
          },
          "purchaser": {
            "description": "采购人姓名或编码",
            "title": "Purchaser",
            "type": "string"
          },
          "remark": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "采购单备注（可选）",
            "title": "Remark"
          },
          "supplier_id": {
            "description": "供应商 ID（必填，对应 suppliers.id）",
            "title": "Supplier Id",
            "type": "integer"
          },
          "warehouse_id": {
            "description": "仓库 ID",
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "supplier_id",
          "warehouse_id",
          "purchaser",
          "purchase_time",
          "lines"
        ],
        "title": "PurchaseOrderCreateV2",
        "type": "object"
      },
      "PurchaseOrderLineCreate": {
        "properties": {
          "base_uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "最小包装单位，如 袋/包/罐",
            "title": "Base Uom"
          },
          "discount_amount": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "整行减免金额（>=0）。行金额不落库，按 base 口径计算",
            "title": "Discount Amount"
          },
          "discount_note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "折扣说明（可选）",
            "title": "Discount Note"
          },
          "item_id": {
            "description": "商品 ID",
            "title": "Item Id",
            "type": "integer"
          },
          "item_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "商品名称快照（后端生成，前端无权覆盖）",
            "title": "Item Name"
          },
          "item_sku": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "SKU 快照（后端生成，前端无权覆盖）",
            "title": "Item Sku"
          },
          "line_no": {
            "description": "行号，从 1 开始递增",
            "exclusiveMinimum": 0.0,
            "title": "Line No",
            "type": "integer"
          },
          "purchase_uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "采购单位，如 件/箱",
            "title": "Purchase Uom"
          },
          "qty_ordered": {
            "description": "订购数量（按采购单位 purchase_uom）",
            "exclusiveMinimum": 0.0,
            "title": "Qty Ordered",
            "type": "integer"
          },
          "remark": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "行备注",
            "title": "Remark"
          },
          "spec_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "规格描述，如 1.5kg*8袋",
            "title": "Spec Text"
          },
          "supply_price": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "采购单价（按 base_uom 计价的单价快照）",
            "title": "Supply Price"
          },
          "units_per_case": {
            "anyOf": [
              {
                "minimum": 1.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "换算因子：每 1 采购单位包含多少最小单位（>=1）。主线以 base 口径为真相",
            "title": "Units Per Case"
          }
        },
        "required": [
          "line_no",
          "item_id",
          "qty_ordered"
        ],
        "title": "PurchaseOrderLineCreate",
        "type": "object"
      },
      "PurchaseOrderLineListOut": {
        "properties": {
          "base_uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Uom"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "discount_amount": {
            "default": "0",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Discount Amount",
            "type": "string"
          },
          "discount_note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Discount Note"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "line_no": {
            "title": "Line No",
            "type": "integer"
          },
          "po_id": {
            "title": "Po Id",
            "type": "integer"
          },
          "purchase_uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Purchase Uom"
          },
          "qty_ordered": {
            "title": "Qty Ordered",
            "type": "integer"
          },
          "qty_ordered_base": {
            "description": "订购数量（最小单位 base，事实字段）",
            "minimum": 0.0,
            "title": "Qty Ordered Base",
            "type": "integer"
          },
          "qty_received_base": {
            "description": "已收数量（最小单位 base，Receipt(CONFIRMED) 聚合）",
            "minimum": 0.0,
            "title": "Qty Received Base",
            "type": "integer"
          },
          "qty_remaining_base": {
            "description": "剩余可收数量（最小单位 base，派生）",
            "minimum": 0.0,
            "title": "Qty Remaining Base",
            "type": "integer"
          },
          "remark": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remark"
          },
          "supply_price": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supply Price"
          },
          "units_per_case": {
            "description": "换算因子（>=1）",
            "minimum": 1.0,
            "title": "Units Per Case",
            "type": "integer"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          }
        },
        "required": [
          "id",
          "po_id",
          "line_no",
          "item_id",
          "qty_ordered",
          "units_per_case",
          "qty_ordered_base",
          "qty_received_base",
          "qty_remaining_base",
          "created_at",
          "updated_at"
        ],
        "title": "PurchaseOrderLineListOut",
        "type": "object"
      },
      "PurchaseOrderLineOut": {
        "properties": {
          "base_uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Uom"
          },
          "brand": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand"
          },
          "category": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Category"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "discount_amount": {
            "default": "0",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Discount Amount",
            "type": "string"
          },
          "discount_note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Discount Note"
          },
          "enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Enabled"
          },
          "has_shelf_life": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Has Shelf Life"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "item_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Name"
          },
          "item_sku": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Sku"
          },
          "line_no": {
            "title": "Line No",
            "type": "integer"
          },
          "po_id": {
            "title": "Po Id",
            "type": "integer"
          },
          "primary_barcode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary Barcode"
          },
          "purchase_uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Purchase Uom"
          },
          "qty_ordered": {
            "description": "订购数量（采购单位，展示用）",
            "exclusiveMinimum": 0.0,
            "title": "Qty Ordered",
            "type": "integer"
          },
          "qty_ordered_base": {
            "description": "订购数量（最小单位 base，事实字段）",
            "minimum": 0.0,
            "title": "Qty Ordered Base",
            "type": "integer"
          },
          "qty_received": {
            "description": "已收数量（采购单位口径，展示/兼容）",
            "minimum": 0.0,
            "title": "Qty Received",
            "type": "integer"
          },
          "qty_received_base": {
            "description": "已收数量（最小单位 base，Receipt(CONFIRMED) 聚合）",
            "minimum": 0.0,
            "title": "Qty Received Base",
            "type": "integer"
          },
          "qty_remaining": {
            "description": "剩余可收数量（采购单位口径，展示/兼容）",
            "minimum": 0.0,
            "title": "Qty Remaining",
            "type": "integer"
          },
          "qty_remaining_base": {
            "description": "剩余可收数量（最小单位 base，派生）",
            "minimum": 0.0,
            "title": "Qty Remaining Base",
            "type": "integer"
          },
          "remark": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remark"
          },
          "shelf_life_unit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Shelf Life Unit"
          },
          "shelf_life_value": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Shelf Life Value"
          },
          "sku": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sku"
          },
          "spec_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Spec Text"
          },
          "supplier_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Id"
          },
          "supplier_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Name"
          },
          "supply_price": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supply Price"
          },
          "units_per_case": {
            "description": "换算因子（>=1）",
            "minimum": 1.0,
            "title": "Units Per Case",
            "type": "integer"
          },
          "uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uom"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          },
          "weight_kg": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Weight Kg"
          }
        },
        "required": [
          "id",
          "po_id",
          "line_no",
          "item_id",
          "item_name",
          "item_sku",
          "spec_text",
          "base_uom",
          "purchase_uom",
          "supply_price",
          "units_per_case",
          "qty_ordered",
          "qty_ordered_base",
          "qty_received_base",
          "qty_remaining_base",
          "qty_received",
          "qty_remaining",
          "remark",
          "created_at",
          "updated_at"
        ],
        "title": "PurchaseOrderLineOut",
        "type": "object"
      },
      "PurchaseOrderListItemOut": {
        "properties": {
          "canceled_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Canceled At"
          },
          "canceled_by": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Canceled By"
          },
          "canceled_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Canceled Reason"
          },
          "close_note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Close Note"
          },
          "close_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Close Reason"
          },
          "closed_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Closed At"
          },
          "closed_by": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Closed By"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "last_received_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Received At"
          },
          "lines": {
            "default": [],
            "items": {
              "$ref": "#/components/schemas/PurchaseOrderLineListOut"
            },
            "title": "Lines",
            "type": "array"
          },
          "purchase_time": {
            "format": "date-time",
            "title": "Purchase Time",
            "type": "string"
          },
          "purchaser": {
            "title": "Purchaser",
            "type": "string"
          },
          "remark": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remark"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "supplier_id": {
            "title": "Supplier Id",
            "type": "integer"
          },
          "supplier_name": {
            "title": "Supplier Name",
            "type": "string"
          },
          "total_amount": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Amount"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          },
          "warehouse_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Name"
          }
        },
        "required": [
          "id",
          "warehouse_id",
          "supplier_id",
          "supplier_name",
          "total_amount",
          "purchaser",
          "purchase_time",
          "remark",
          "status",
          "created_at",
          "updated_at"
        ],
        "title": "PurchaseOrderListItemOut",
        "type": "object"
      },
      "PurchaseOrderReceiptEventOut": {
        "description": "采购单“历史收货事实”（用于 UI 展示与审计）。\n口径：直接来自 stock_ledger（reason=RECEIPT, ref=PO-{po_id}）。",
        "properties": {
          "after_qty": {
            "description": "收货后库存余额（after_qty）",
            "title": "After Qty",
            "type": "integer"
          },
          "batch_code": {
            "description": "批次号（事实键）",
            "title": "Batch Code",
            "type": "string"
          },
          "expiry_date": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "到期日期（可空）",
            "title": "Expiry Date"
          },
          "item_id": {
            "description": "商品 ID",
            "exclusiveMinimum": 0.0,
            "title": "Item Id",
            "type": "integer"
          },
          "line_no": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "采购单行号（若可映射）",
            "title": "Line No"
          },
          "occurred_at": {
            "description": "发生时间（事实时间）",
            "format": "date-time",
            "title": "Occurred At",
            "type": "string"
          },
          "production_date": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "生产日期（可空）",
            "title": "Production Date"
          },
          "qty": {
            "description": "本次收货数量（delta）",
            "title": "Qty",
            "type": "integer"
          },
          "ref": {
            "description": "引用，如 PO-123",
            "title": "Ref",
            "type": "string"
          },
          "ref_line": {
            "description": "ref 内顺序号（与台账一致）",
            "exclusiveMinimum": 0.0,
            "title": "Ref Line",
            "type": "integer"
          },
          "warehouse_id": {
            "description": "仓库",
            "exclusiveMinimum": 0.0,
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "ref",
          "ref_line",
          "warehouse_id",
          "item_id",
          "batch_code",
          "qty",
          "after_qty",
          "occurred_at"
        ],
        "title": "PurchaseOrderReceiptEventOut",
        "type": "object"
      },
      "PurchaseOrderReceiveLineIn": {
        "properties": {
          "barcode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "本次收货条码（快照，写入 receipt_lines.barcode，可选）",
            "title": "Barcode"
          },
          "expiry_date": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "到期日期（无法推算时必填）",
            "title": "Expiry Date"
          },
          "line_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "行 ID（可选，优先使用）",
            "title": "Line Id"
          },
          "line_no": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "行号（可选，line_id 缺失时用）",
            "title": "Line No"
          },
          "production_date": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "生产日期（有效期商品必填）",
            "title": "Production Date"
          },
          "qty": {
            "description": "本次收货数量（最小单位 base，>0）",
            "exclusiveMinimum": 0.0,
            "title": "Qty",
            "type": "integer"
          }
        },
        "required": [
          "qty"
        ],
        "title": "PurchaseOrderReceiveLineIn",
        "type": "object"
      },
      "PurchaseOrderReceiveWorkbenchOut": {
        "properties": {
          "caps": {
            "$ref": "#/components/schemas/WorkbenchCapsOut"
          },
          "explain": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/WorkbenchExplainOut"
              },
              {
                "type": "null"
              }
            ]
          },
          "po_summary": {
            "$ref": "#/components/schemas/PoSummaryOut"
          },
          "receipt": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ReceiptSummaryOut"
              },
              {
                "type": "null"
              }
            ]
          },
          "rows": {
            "items": {
              "$ref": "#/components/schemas/WorkbenchRowOut"
            },
            "title": "Rows",
            "type": "array"
          }
        },
        "required": [
          "po_summary",
          "rows",
          "caps"
        ],
        "title": "PurchaseOrderReceiveWorkbenchOut",
        "type": "object"
      },
      "PurchaseOrderWithLinesOut": {
        "properties": {
          "canceled_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Canceled At"
          },
          "canceled_by": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Canceled By"
          },
          "canceled_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Canceled Reason"
          },
          "close_note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Close Note"
          },
          "close_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Close Reason"
          },
          "closed_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Closed At"
          },
          "closed_by": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Closed By"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "last_received_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Received At"
          },
          "lines": {
            "default": [],
            "items": {
              "$ref": "#/components/schemas/PurchaseOrderLineOut"
            },
            "title": "Lines",
            "type": "array"
          },
          "purchase_time": {
            "format": "date-time",
            "title": "Purchase Time",
            "type": "string"
          },
          "purchaser": {
            "title": "Purchaser",
            "type": "string"
          },
          "remark": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remark"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "supplier_id": {
            "title": "Supplier Id",
            "type": "integer"
          },
          "supplier_name": {
            "title": "Supplier Name",
            "type": "string"
          },
          "total_amount": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Amount"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "id",
          "warehouse_id",
          "supplier_id",
          "supplier_name",
          "total_amount",
          "purchaser",
          "purchase_time",
          "remark",
          "status",
          "created_at",
          "updated_at"
        ],
        "title": "PurchaseOrderWithLinesOut",
        "type": "object"
      },
      "QuoteCalcIn": {
        "properties": {
          "dest": {
            "$ref": "#/components/schemas/QuoteDestIn"
          },
          "flags": {
            "items": {
              "type": "string"
            },
            "title": "Flags",
            "type": "array"
          },
          "height_cm": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Height Cm"
          },
          "length_cm": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Length Cm"
          },
          "real_weight_kg": {
            "minimum": 0.0,
            "title": "Real Weight Kg",
            "type": "number"
          },
          "scheme_id": {
            "minimum": 1.0,
            "title": "Scheme Id",
            "type": "integer"
          },
          "warehouse_id": {
            "minimum": 1.0,
            "title": "Warehouse Id",
            "type": "integer"
          },
          "width_cm": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Width Cm"
          }
        },
        "required": [
          "warehouse_id",
          "scheme_id",
          "dest",
          "real_weight_kg"
        ],
        "title": "QuoteCalcIn",
        "type": "object"
      },
      "QuoteCalcOut": {
        "properties": {
          "bracket": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bracket"
          },
          "breakdown": {
            "additionalProperties": true,
            "title": "Breakdown",
            "type": "object"
          },
          "currency": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Currency"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          },
          "quote_status": {
            "title": "Quote Status",
            "type": "string"
          },
          "reasons": {
            "items": {
              "type": "string"
            },
            "title": "Reasons",
            "type": "array"
          },
          "total_amount": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Amount"
          },
          "weight": {
            "additionalProperties": true,
            "title": "Weight",
            "type": "object"
          },
          "zone": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Zone"
          }
        },
        "required": [
          "ok",
          "quote_status",
          "weight",
          "breakdown"
        ],
        "title": "QuoteCalcOut",
        "type": "object"
      },
      "QuoteDestIn": {
        "properties": {
          "city": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City"
          },
          "city_code": {
            "anyOf": [
              {
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City Code"
          },
          "district": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "District"
          },
          "province": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Province"
          },
          "province_code": {
            "minLength": 1,
            "title": "Province Code",
            "type": "string"
          }
        },
        "required": [
          "province_code"
        ],
        "title": "QuoteDestIn",
        "type": "object"
      },
      "QuoteRecommendIn": {
        "description": "Phase 3/4 严格合同（无兼容）：\n- warehouse_id 必填：推荐必须发生在“起运仓边界”内\n- provider_ids 仅作为“过滤交集”，不允许绕过仓库边界（即不允许 warehouse_id 缺失）",
        "properties": {
          "dest": {
            "$ref": "#/components/schemas/QuoteDestIn"
          },
          "flags": {
            "items": {
              "type": "string"
            },
            "title": "Flags",
            "type": "array"
          },
          "height_cm": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Height Cm"
          },
          "length_cm": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Length Cm"
          },
          "max_results": {
            "default": 10,
            "maximum": 50.0,
            "minimum": 1.0,
            "title": "Max Results",
            "type": "integer"
          },
          "provider_ids": {
            "items": {
              "type": "integer"
            },
            "title": "Provider Ids",
            "type": "array"
          },
          "real_weight_kg": {
            "minimum": 0.0,
            "title": "Real Weight Kg",
            "type": "number"
          },
          "warehouse_id": {
            "minimum": 1.0,
            "title": "Warehouse Id",
            "type": "integer"
          },
          "width_cm": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Width Cm"
          }
        },
        "required": [
          "warehouse_id",
          "dest",
          "real_weight_kg"
        ],
        "title": "QuoteRecommendIn",
        "type": "object"
      },
      "QuoteRecommendItemOut": {
        "properties": {
          "bracket": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bracket"
          },
          "breakdown": {
            "additionalProperties": true,
            "title": "Breakdown",
            "type": "object"
          },
          "carrier_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Carrier Code"
          },
          "carrier_name": {
            "title": "Carrier Name",
            "type": "string"
          },
          "currency": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Currency"
          },
          "provider_id": {
            "title": "Provider Id",
            "type": "integer"
          },
          "quote_status": {
            "title": "Quote Status",
            "type": "string"
          },
          "reasons": {
            "items": {
              "type": "string"
            },
            "title": "Reasons",
            "type": "array"
          },
          "scheme_id": {
            "title": "Scheme Id",
            "type": "integer"
          },
          "scheme_name": {
            "title": "Scheme Name",
            "type": "string"
          },
          "total_amount": {
            "title": "Total Amount",
            "type": "number"
          },
          "weight": {
            "additionalProperties": true,
            "title": "Weight",
            "type": "object"
          },
          "zone": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Zone"
          }
        },
        "required": [
          "provider_id",
          "carrier_name",
          "scheme_id",
          "scheme_name",
          "total_amount",
          "quote_status",
          "weight",
          "breakdown"
        ],
        "title": "QuoteRecommendItemOut",
        "type": "object"
      },
      "QuoteRecommendOut": {
        "properties": {
          "ok": {
            "title": "Ok",
            "type": "boolean"
          },
          "quotes": {
            "items": {
              "$ref": "#/components/schemas/QuoteRecommendItemOut"
            },
            "title": "Quotes",
            "type": "array"
          },
          "recommended_scheme_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Recommended Scheme Id"
          }
        },
        "required": [
          "ok",
          "quotes"
        ],
        "title": "QuoteRecommendOut",
        "type": "object"
      },
      "ReasonCanon": {
        "enum": [
          "RECEIPT",
          "SHIPMENT",
          "ADJUSTMENT"
        ],
        "title": "ReasonCanon",
        "type": "string"
      },
      "ReceiptSummaryOut": {
        "properties": {
          "occurred_at": {
            "format": "date-time",
            "title": "Occurred At",
            "type": "string"
          },
          "receipt_id": {
            "title": "Receipt Id",
            "type": "integer"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          },
          "status": {
            "title": "Status",
            "type": "string"
          }
        },
        "required": [
          "receipt_id",
          "ref",
          "status",
          "occurred_at"
        ],
        "title": "ReceiptSummaryOut",
        "type": "object"
      },
      "ReconcileSummaryPayload": {
        "properties": {
          "time_from": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Time From"
          },
          "time_to": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Time To"
          }
        },
        "title": "ReconcileSummaryPayload",
        "type": "object"
      },
      "ReturnOrderRefDetailOut": {
        "properties": {
          "ext_order_no": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ext Order No"
          },
          "order_ref": {
            "title": "Order Ref",
            "type": "string"
          },
          "platform": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Platform"
          },
          "remaining_qty": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remaining Qty"
          },
          "shipping": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ReturnOrderRefShippingOut"
              },
              {
                "type": "null"
              }
            ]
          },
          "shop_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Shop Id"
          },
          "summary": {
            "$ref": "#/components/schemas/ReturnOrderRefSummaryOut"
          }
        },
        "required": [
          "order_ref",
          "summary"
        ],
        "title": "ReturnOrderRefDetailOut",
        "type": "object"
      },
      "ReturnOrderRefItem": {
        "properties": {
          "last_ship_at": {
            "format": "date-time",
            "title": "Last Ship At",
            "type": "string"
          },
          "order_ref": {
            "title": "Order Ref",
            "type": "string"
          },
          "remaining_qty": {
            "description": "剩余可退数量（shipped - returned）",
            "title": "Remaining Qty",
            "type": "integer"
          },
          "total_lines": {
            "title": "Total Lines",
            "type": "integer"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Id"
          }
        },
        "required": [
          "order_ref",
          "last_ship_at",
          "total_lines",
          "remaining_qty"
        ],
        "title": "ReturnOrderRefItem",
        "type": "object"
      },
      "ReturnOrderRefReceiverOut": {
        "properties": {
          "city": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City"
          },
          "detail": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detail"
          },
          "district": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "District"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Phone"
          },
          "province": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Province"
          }
        },
        "title": "ReturnOrderRefReceiverOut",
        "type": "object"
      },
      "ReturnOrderRefShippingOut": {
        "properties": {
          "carrier_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Carrier Code"
          },
          "carrier_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Carrier Name"
          },
          "cost_estimated": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cost Estimated"
          },
          "gross_weight_kg": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Gross Weight Kg"
          },
          "meta": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Meta"
          },
          "receiver": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ReturnOrderRefReceiverOut"
              },
              {
                "type": "null"
              }
            ]
          },
          "shipped_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Shipped At"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "tracking_no": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tracking No"
          }
        },
        "title": "ReturnOrderRefShippingOut",
        "type": "object"
      },
      "ReturnOrderRefSummaryLine": {
        "properties": {
          "batch_code": {
            "title": "Batch Code",
            "type": "string"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "item_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Name"
          },
          "shipped_qty": {
            "title": "Shipped Qty",
            "type": "integer"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "warehouse_id",
          "item_id",
          "batch_code",
          "shipped_qty"
        ],
        "title": "ReturnOrderRefSummaryLine",
        "type": "object"
      },
      "ReturnOrderRefSummaryOut": {
        "properties": {
          "lines": {
            "items": {
              "$ref": "#/components/schemas/ReturnOrderRefSummaryLine"
            },
            "title": "Lines",
            "type": "array"
          },
          "order_ref": {
            "title": "Order Ref",
            "type": "string"
          },
          "ship_reasons": {
            "items": {
              "type": "string"
            },
            "title": "Ship Reasons",
            "type": "array"
          }
        },
        "required": [
          "order_ref",
          "lines"
        ],
        "title": "ReturnOrderRefSummaryOut",
        "type": "object"
      },
      "ReturnTaskCommitIn": {
        "properties": {
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "用于跨表追踪的 trace_id，可选（建议填订单 trace_id）",
            "title": "Trace Id"
          }
        },
        "title": "ReturnTaskCommitIn",
        "type": "object"
      },
      "ReturnTaskCreateFromOrder": {
        "properties": {
          "include_zero_shipped": {
            "default": false,
            "description": "是否包含出库数量为 0 的行（通常不需要）",
            "title": "Include Zero Shipped",
            "type": "boolean"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "回仓仓库 ID；不传则由服务层决定（默认=原出库仓库，若不唯一则要求显式传入）",
            "title": "Warehouse Id"
          }
        },
        "title": "ReturnTaskCreateFromOrder",
        "type": "object"
      },
      "ReturnTaskLineOut": {
        "properties": {
          "batch_code": {
            "title": "Batch Code",
            "type": "string"
          },
          "committed_qty": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Committed Qty"
          },
          "expected_qty": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expected Qty"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "item_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Name"
          },
          "order_line_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Order Line Id"
          },
          "picked_qty": {
            "title": "Picked Qty",
            "type": "integer"
          },
          "remark": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remark"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "task_id": {
            "title": "Task Id",
            "type": "integer"
          }
        },
        "required": [
          "id",
          "task_id",
          "item_id",
          "item_name",
          "batch_code",
          "expected_qty",
          "picked_qty",
          "committed_qty",
          "status",
          "remark"
        ],
        "title": "ReturnTaskLineOut",
        "type": "object"
      },
      "ReturnTaskOut": {
        "properties": {
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "lines": {
            "default": [],
            "items": {
              "$ref": "#/components/schemas/ReturnTaskLineOut"
            },
            "title": "Lines",
            "type": "array"
          },
          "order_id": {
            "title": "Order Id",
            "type": "string"
          },
          "remark": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remark"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "id",
          "order_id",
          "warehouse_id",
          "status",
          "remark",
          "created_at",
          "updated_at"
        ],
        "title": "ReturnTaskOut",
        "type": "object"
      },
      "ReturnTaskReceiveIn": {
        "properties": {
          "item_id": {
            "description": "商品 ID",
            "title": "Item Id",
            "type": "integer"
          },
          "qty": {
            "description": "本次回仓数量（可正可负，用于撤销误扫）",
            "title": "Qty",
            "type": "integer"
          }
        },
        "required": [
          "item_id",
          "qty"
        ],
        "title": "ReturnTaskReceiveIn",
        "type": "object"
      },
      "RoleCreate": {
        "example": {
          "description": "仓库管理员，可管理库存与订单",
          "name": "warehouse.admin"
        },
        "properties": {
          "description": {
            "anyOf": [
              {
                "maxLength": 256,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "name": {
            "description": "角色名称",
            "maxLength": 64,
            "minLength": 1,
            "title": "Name",
            "type": "string"
          }
        },
        "required": [
          "name"
        ],
        "title": "RoleCreate",
        "type": "object"
      },
      "RoleOut": {
        "example": {
          "description": "仓库管理员，可管理库存与订单",
          "id": 1,
          "name": "warehouse.admin",
          "permissions": [
            {
              "description": "读取库存",
              "id": 1,
              "name": "stock.read",
              "scope": "stock"
            },
            {
              "description": "订单审批",
              "id": 2,
              "name": "order.approve",
              "scope": "order"
            }
          ]
        },
        "properties": {
          "description": {
            "anyOf": [
              {
                "maxLength": 256,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "id": {
            "description": "角色ID（整数）",
            "title": "Id",
            "type": "integer"
          },
          "name": {
            "maxLength": 64,
            "minLength": 1,
            "title": "Name",
            "type": "string"
          },
          "permissions": {
            "items": {
              "$ref": "#/components/schemas/PermissionOut"
            },
            "title": "Permissions",
            "type": "array"
          }
        },
        "required": [
          "id",
          "name"
        ],
        "title": "RoleOut",
        "type": "object"
      },
      "RolePermissionsBody": {
        "description": "/roles/{role_id}/permissions 的请求体：\n\n{\n  \"permission_ids\": [\"1\", \"2\", \"3\"]\n}",
        "properties": {
          "permission_ids": {
            "items": {
              "type": "string"
            },
            "title": "Permission Ids",
            "type": "array"
          }
        },
        "required": [
          "permission_ids"
        ],
        "title": "RolePermissionsBody",
        "type": "object"
      },
      "RoutingHealthOut": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "title": "Data",
            "type": "object"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "RoutingHealthOut",
        "type": "object"
      },
      "ScanCountCommitRequest": {
        "description": "LEGACY：基于 location 的盘点请求。\n当前 /scan/count/commit 仍按旧合同工作，未来可并入 /scan + ScanRequest(mode='count')。",
        "properties": {
          "batch_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Batch Code"
          },
          "expiry_date": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expiry Date"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "location_id": {
            "title": "Location Id",
            "type": "integer"
          },
          "occurred_at": {
            "format": "date-time",
            "title": "Occurred At",
            "type": "string"
          },
          "production_date": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Production Date"
          },
          "qty": {
            "description": "盘点后的绝对量",
            "minimum": 0.0,
            "title": "Qty",
            "type": "integer"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          }
        },
        "required": [
          "item_id",
          "location_id",
          "qty",
          "ref"
        ],
        "title": "ScanCountCommitRequest",
        "type": "object"
      },
      "ScanRequest": {
        "description": "v2 通用 Scan 请求体（与前端 ScanRequest 对齐）：\n\n- mode: \"receive\" | \"pick\" | \"count\"\n- item_id + qty: 主参数\n- warehouse_id: 仓库维度（当前版本已无 scan-level location 概念）\n- batch_code / production_date / expiry_date: 猫粮批次/保质期信息\n- task_line_id: 拣货任务行（mode=pick 时可用）\n- probe: 探针模式，只试算不落账\n- ctx: 扩展上下文（device_id / operator 等），用于生成 scan_ref 与审计",
        "properties": {
          "barcode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "原始扫码内容（可选）",
            "title": "Barcode"
          },
          "batch_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "批次编码（可选；批次语义由 API 合同层判定）",
            "title": "Batch Code"
          },
          "ctx": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "description": "扩展上下文（device_id/operator 等）",
            "title": "Ctx"
          },
          "expiry_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "到期日期，建议 YYYY-MM-DD 或 YYYYMMDD",
            "title": "Expiry Date"
          },
          "item_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "商品 ID",
            "title": "Item Id"
          },
          "mode": {
            "description": "receive | pick | count",
            "title": "Mode",
            "type": "string"
          },
          "probe": {
            "default": false,
            "description": "探针模式，仅试算不落账",
            "title": "Probe",
            "type": "boolean"
          },
          "production_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "生产日期，建议 YYYY-MM-DD 或 YYYYMMDD",
            "title": "Production Date"
          },
          "qty": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": 1,
            "description": "本次扫描数量，缺省为 1",
            "title": "Qty"
          },
          "task_line_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "拣货任务行 ID（mode=pick 时可用）",
            "title": "Task Line Id"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "仓库 ID（缺省时由后端兜底为 1）",
            "title": "Warehouse Id"
          }
        },
        "required": [
          "mode"
        ],
        "title": "ScanRequest",
        "type": "object"
      },
      "ScanResponse": {
        "properties": {
          "actual": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Actual"
          },
          "after": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "After"
          },
          "after_qty": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "After Qty"
          },
          "batch_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Batch Code"
          },
          "before": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Before"
          },
          "before_qty": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Before Qty"
          },
          "committed": {
            "default": true,
            "title": "Committed",
            "type": "boolean"
          },
          "delta": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Delta"
          },
          "errors": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Errors",
            "type": "array"
          },
          "event_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Event Id"
          },
          "evidence": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Evidence",
            "type": "array"
          },
          "expiry_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expiry Date"
          },
          "item_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Id"
          },
          "location_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Location Id"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          },
          "production_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Production Date"
          },
          "qty": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Qty"
          },
          "scan_ref": {
            "title": "Scan Ref",
            "type": "string"
          },
          "source": {
            "title": "Source",
            "type": "string"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Id"
          }
        },
        "required": [
          "scan_ref",
          "source"
        ],
        "title": "ScanResponse",
        "type": "object"
      },
      "SchemeCreateIn": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "billable_weight_rule": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Billable Weight Rule"
          },
          "currency": {
            "default": "CNY",
            "maxLength": 8,
            "minLength": 1,
            "title": "Currency",
            "type": "string"
          },
          "default_pricing_mode": {
            "default": "linear_total",
            "maxLength": 32,
            "minLength": 1,
            "title": "Default Pricing Mode",
            "type": "string"
          },
          "effective_from": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effective From"
          },
          "effective_to": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effective To"
          },
          "name": {
            "maxLength": 128,
            "minLength": 1,
            "title": "Name",
            "type": "string"
          },
          "segments_json": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/WeightSegmentIn"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Segments Json"
          }
        },
        "required": [
          "name"
        ],
        "title": "SchemeCreateIn",
        "type": "object"
      },
      "SchemeDefaultSegmentTemplateIn": {
        "properties": {
          "template_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Template Id"
          }
        },
        "title": "SchemeDefaultSegmentTemplateIn",
        "type": "object"
      },
      "SchemeDetailOut": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/SchemeOut"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "SchemeDetailOut",
        "type": "object"
      },
      "SchemeListOut": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/SchemeOut"
            },
            "title": "Data",
            "type": "array"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "SchemeListOut",
        "type": "object"
      },
      "SchemeOut": {
        "properties": {
          "active": {
            "title": "Active",
            "type": "boolean"
          },
          "archived_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Archived At"
          },
          "billable_weight_rule": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Billable Weight Rule"
          },
          "currency": {
            "title": "Currency",
            "type": "string"
          },
          "default_pricing_mode": {
            "title": "Default Pricing Mode",
            "type": "string"
          },
          "default_segment_template_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Default Segment Template Id"
          },
          "dest_adjustments": {
            "items": {
              "$ref": "#/components/schemas/DestAdjustmentOut"
            },
            "title": "Dest Adjustments",
            "type": "array"
          },
          "effective_from": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effective From"
          },
          "effective_to": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effective To"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "segments": {
            "items": {
              "$ref": "#/components/schemas/SchemeSegmentOut"
            },
            "title": "Segments",
            "type": "array"
          },
          "segments_json": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/WeightSegmentIn"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Segments Json"
          },
          "segments_updated_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Segments Updated At"
          },
          "shipping_provider_id": {
            "title": "Shipping Provider Id",
            "type": "integer"
          },
          "shipping_provider_name": {
            "title": "Shipping Provider Name",
            "type": "string"
          },
          "surcharges": {
            "items": {
              "$ref": "#/components/schemas/SurchargeOut"
            },
            "title": "Surcharges",
            "type": "array"
          },
          "zones": {
            "items": {
              "$ref": "#/components/schemas/ZoneOut"
            },
            "title": "Zones",
            "type": "array"
          }
        },
        "required": [
          "id",
          "shipping_provider_id",
          "shipping_provider_name",
          "name",
          "active",
          "currency",
          "default_pricing_mode"
        ],
        "title": "SchemeOut",
        "type": "object"
      },
      "SchemeSegmentActivePatchIn": {
        "properties": {
          "active": {
            "title": "Active",
            "type": "boolean"
          }
        },
        "required": [
          "active"
        ],
        "title": "SchemeSegmentActivePatchIn",
        "type": "object"
      },
      "SchemeSegmentOut": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "max_kg": {
            "title": "Max Kg"
          },
          "min_kg": {
            "title": "Min Kg"
          },
          "ord": {
            "title": "Ord",
            "type": "integer"
          },
          "scheme_id": {
            "title": "Scheme Id",
            "type": "integer"
          }
        },
        "required": [
          "id",
          "scheme_id",
          "ord",
          "min_kg"
        ],
        "title": "SchemeSegmentOut",
        "type": "object"
      },
      "SchemeUpdateIn": {
        "properties": {
          "active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active"
          },
          "archived_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Archived At"
          },
          "billable_weight_rule": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Billable Weight Rule"
          },
          "currency": {
            "anyOf": [
              {
                "maxLength": 8,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Currency"
          },
          "default_pricing_mode": {
            "anyOf": [
              {
                "maxLength": 32,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Default Pricing Mode"
          },
          "effective_from": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effective From"
          },
          "effective_to": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effective To"
          },
          "name": {
            "anyOf": [
              {
                "maxLength": 128,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "segments_json": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/WeightSegmentIn"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Segments Json"
          }
        },
        "title": "SchemeUpdateIn",
        "type": "object"
      },
      "SchemeWarehouseBindIn": {
        "description": "绑定单个起运仓（事实写入）。\n\n语义：\n- 绑定存在 = 具备“起运适用资格”\n- active=true = 该资格当前启用",
        "properties": {
          "active": {
            "default": false,
            "title": "Active",
            "type": "boolean"
          },
          "warehouse_id": {
            "minimum": 1.0,
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "warehouse_id"
        ],
        "title": "SchemeWarehouseBindIn",
        "type": "object"
      },
      "SchemeWarehouseBindOut": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/SchemeWarehouseOut"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "ok",
          "data"
        ],
        "title": "SchemeWarehouseBindOut",
        "type": "object"
      },
      "SchemeWarehouseDeleteOut": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "title": "Data",
            "type": "object"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "ok",
          "data"
        ],
        "title": "SchemeWarehouseDeleteOut",
        "type": "object"
      },
      "SchemeWarehouseOut": {
        "properties": {
          "active": {
            "title": "Active",
            "type": "boolean"
          },
          "scheme_id": {
            "title": "Scheme Id",
            "type": "integer"
          },
          "warehouse": {
            "$ref": "#/components/schemas/WarehouseLiteOut"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "scheme_id",
          "warehouse_id",
          "active",
          "warehouse"
        ],
        "title": "SchemeWarehouseOut",
        "type": "object"
      },
      "SchemeWarehousePatchIn": {
        "properties": {
          "active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active"
          }
        },
        "title": "SchemeWarehousePatchIn",
        "type": "object"
      },
      "SchemeWarehousePatchOut": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/SchemeWarehouseOut"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "ok",
          "data"
        ],
        "title": "SchemeWarehousePatchOut",
        "type": "object"
      },
      "SchemeWarehousesGetOut": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/SchemeWarehouseOut"
            },
            "title": "Data",
            "type": "array"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "ok",
          "data"
        ],
        "title": "SchemeWarehousesGetOut",
        "type": "object"
      },
      "SegmentRangeOut": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "max_kg": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Kg"
          },
          "min_kg": {
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Min Kg",
            "type": "string"
          },
          "ord": {
            "title": "Ord",
            "type": "integer"
          }
        },
        "required": [
          "ord",
          "min_kg"
        ],
        "title": "SegmentRangeOut",
        "type": "object"
      },
      "SegmentTemplateCreateIn": {
        "properties": {
          "effective_from": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effective From"
          },
          "name": {
            "anyOf": [
              {
                "maxLength": 128,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          }
        },
        "title": "SegmentTemplateCreateIn",
        "type": "object"
      },
      "SegmentTemplateDetailOut": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/SegmentTemplateOut"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "SegmentTemplateDetailOut",
        "type": "object"
      },
      "SegmentTemplateItemActivePatchIn": {
        "properties": {
          "active": {
            "title": "Active",
            "type": "boolean"
          }
        },
        "required": [
          "active"
        ],
        "title": "SegmentTemplateItemActivePatchIn",
        "type": "object"
      },
      "SegmentTemplateItemIn": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "max_kg": {
            "title": "Max Kg"
          },
          "min_kg": {
            "title": "Min Kg"
          },
          "ord": {
            "minimum": 0.0,
            "title": "Ord",
            "type": "integer"
          }
        },
        "required": [
          "ord",
          "min_kg"
        ],
        "title": "SegmentTemplateItemIn",
        "type": "object"
      },
      "SegmentTemplateItemOut": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "max_kg": {
            "title": "Max Kg"
          },
          "min_kg": {
            "title": "Min Kg"
          },
          "ord": {
            "title": "Ord",
            "type": "integer"
          },
          "template_id": {
            "title": "Template Id",
            "type": "integer"
          }
        },
        "required": [
          "id",
          "template_id",
          "ord",
          "min_kg"
        ],
        "title": "SegmentTemplateItemOut",
        "type": "object"
      },
      "SegmentTemplateItemsPutIn": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/SegmentTemplateItemIn"
            },
            "title": "Items",
            "type": "array"
          }
        },
        "required": [
          "items"
        ],
        "title": "SegmentTemplateItemsPutIn",
        "type": "object"
      },
      "SegmentTemplateListOut": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/SegmentTemplateOut"
            },
            "title": "Data",
            "type": "array"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "SegmentTemplateListOut",
        "type": "object"
      },
      "SegmentTemplateOut": {
        "properties": {
          "created_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "effective_from": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effective From"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "is_active": {
            "title": "Is Active",
            "type": "boolean"
          },
          "items": {
            "items": {
              "$ref": "#/components/schemas/SegmentTemplateItemOut"
            },
            "title": "Items",
            "type": "array"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "published_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Published At"
          },
          "scheme_id": {
            "title": "Scheme Id",
            "type": "integer"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "updated_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          }
        },
        "required": [
          "id",
          "scheme_id",
          "name",
          "status",
          "is_active"
        ],
        "title": "SegmentTemplateOut",
        "type": "object"
      },
      "SegmentTemplateRenameIn": {
        "properties": {
          "name": {
            "description": "模板名称（用于运营识别）",
            "maxLength": 80,
            "minLength": 1,
            "title": "Name",
            "type": "string"
          }
        },
        "required": [
          "name"
        ],
        "title": "SegmentTemplateRenameIn",
        "type": "object"
      },
      "ShellSchemeRow": {
        "properties": {
          "active": {
            "title": "Active",
            "type": "boolean"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "scheme_id": {
            "title": "Scheme Id",
            "type": "integer"
          },
          "seg_n": {
            "default": 0,
            "title": "Seg N",
            "type": "integer"
          },
          "surcharge_n": {
            "default": 0,
            "title": "Surcharge N",
            "type": "integer"
          },
          "tpl_n": {
            "default": 0,
            "title": "Tpl N",
            "type": "integer"
          },
          "wh_n": {
            "default": 0,
            "title": "Wh N",
            "type": "integer"
          },
          "zone_n": {
            "default": 0,
            "title": "Zone N",
            "type": "integer"
          }
        },
        "required": [
          "scheme_id",
          "name",
          "active"
        ],
        "title": "ShellSchemeRow",
        "type": "object"
      },
      "ShipCalcRequest": {
        "properties": {
          "city": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City"
          },
          "debug_ref": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "调试用标记，不参与计算，仅写入日志/事件",
            "title": "Debug Ref"
          },
          "district": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "District"
          },
          "province": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Province"
          },
          "warehouse_id": {
            "description": "发货仓库 ID（Phase 3 强前置事实）",
            "minimum": 1.0,
            "title": "Warehouse Id",
            "type": "integer"
          },
          "weight_kg": {
            "description": "包裹总重量（kg）",
            "exclusiveMinimum": 0.0,
            "title": "Weight Kg",
            "type": "number"
          }
        },
        "required": [
          "warehouse_id",
          "weight_kg"
        ],
        "title": "ShipCalcRequest",
        "type": "object"
      },
      "ShipCalcResponse": {
        "properties": {
          "dest": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Dest"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          },
          "quotes": {
            "items": {
              "$ref": "#/components/schemas/ShipQuoteOut"
            },
            "title": "Quotes",
            "type": "array"
          },
          "recommended": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ShipRecommendedOut"
              },
              {
                "type": "null"
              }
            ]
          },
          "weight_kg": {
            "title": "Weight Kg",
            "type": "number"
          }
        },
        "required": [
          "weight_kg",
          "quotes"
        ],
        "title": "ShipCalcResponse",
        "type": "object"
      },
      "ShipConfirmRequest": {
        "properties": {
          "carrier": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "选用的物流公司编码，例如 ZTO / JT / SF",
            "title": "Carrier"
          },
          "carrier_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "物流公司名称（冗余字段）",
            "title": "Carrier Name"
          },
          "cost_estimated": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "description": "系统计算预估费用（元）",
            "title": "Cost Estimated"
          },
          "cost_real": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "description": "月结账单对账后的实际费用（元）",
            "title": "Cost Real"
          },
          "delivery_time": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "实际送达时间（可选）",
            "title": "Delivery Time"
          },
          "error_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "错误码",
            "title": "Error Code"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "错误信息",
            "title": "Error Message"
          },
          "gross_weight_kg": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "description": "实际称重毛重（kg）",
            "title": "Gross Weight Kg"
          },
          "meta": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "description": "附加元数据，会写入审计事件 / 发货记录表",
            "title": "Meta"
          },
          "packaging_weight_kg": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "description": "包材重量（kg）",
            "title": "Packaging Weight Kg"
          },
          "platform": {
            "description": "平台，如 PDD",
            "title": "Platform",
            "type": "string"
          },
          "ref": {
            "description": "业务引用，如 ORD:PDD:1:EXT123",
            "minLength": 1,
            "title": "Ref",
            "type": "string"
          },
          "scheme_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "选用的运价方案 ID（建议必填）",
            "title": "Scheme Id"
          },
          "shop_id": {
            "description": "店铺 ID，如 '1'",
            "title": "Shop Id",
            "type": "string"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "IN_TRANSIT / DELIVERED / LOST / RETURNED 等",
            "title": "Status"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trace Id"
          },
          "tracking_no": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "快递运单号 / 电子面单号",
            "title": "Tracking No"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "发货仓库 ID（建议必填）",
            "title": "Warehouse Id"
          }
        },
        "required": [
          "ref",
          "platform",
          "shop_id"
        ],
        "title": "ShipConfirmRequest",
        "type": "object"
      },
      "ShipConfirmResponse": {
        "properties": {
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trace Id"
          }
        },
        "required": [
          "ref"
        ],
        "title": "ShipConfirmResponse",
        "type": "object"
      },
      "ShipLineIn": {
        "properties": {
          "item_id": {
            "exclusiveMinimum": 0.0,
            "title": "Item Id",
            "type": "integer"
          },
          "qty": {
            "exclusiveMinimum": 0.0,
            "title": "Qty",
            "type": "integer"
          }
        },
        "required": [
          "item_id",
          "qty"
        ],
        "title": "ShipLineIn",
        "type": "object"
      },
      "ShipPrepareItem": {
        "properties": {
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "qty": {
            "title": "Qty",
            "type": "integer"
          }
        },
        "required": [
          "item_id",
          "qty"
        ],
        "title": "ShipPrepareItem",
        "type": "object"
      },
      "ShipPrepareRequest": {
        "properties": {
          "ext_order_no": {
            "description": "平台订单号",
            "title": "Ext Order No",
            "type": "string"
          },
          "platform": {
            "description": "平台，例如 PDD",
            "title": "Platform",
            "type": "string"
          },
          "shop_id": {
            "description": "店铺 ID，例如 '1'",
            "title": "Shop Id",
            "type": "string"
          }
        },
        "required": [
          "platform",
          "shop_id",
          "ext_order_no"
        ],
        "title": "ShipPrepareRequest",
        "type": "object"
      },
      "ShipPrepareResponse": {
        "properties": {
          "address_detail": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Address Detail"
          },
          "blocked_reasons": {
            "items": {
              "type": "string"
            },
            "title": "Blocked Reasons",
            "type": "array"
          },
          "candidate_warehouses": {
            "items": {
              "$ref": "#/components/schemas/CandidateWarehouseOut"
            },
            "title": "Candidate Warehouses",
            "type": "array"
          },
          "city": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City"
          },
          "district": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "District"
          },
          "ext_order_no": {
            "title": "Ext Order No",
            "type": "string"
          },
          "fulfillment_scan": {
            "items": {
              "$ref": "#/components/schemas/FulfillmentScanWarehouseOut"
            },
            "title": "Fulfillment Scan",
            "type": "array"
          },
          "fulfillment_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fulfillment Status"
          },
          "items": {
            "items": {
              "$ref": "#/components/schemas/ShipPrepareItem"
            },
            "title": "Items",
            "type": "array"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          },
          "order_id": {
            "title": "Order Id",
            "type": "integer"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "province": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Province"
          },
          "receiver_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Receiver Name"
          },
          "receiver_phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Receiver Phone"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          },
          "total_qty": {
            "default": 0,
            "title": "Total Qty",
            "type": "integer"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trace Id"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Id"
          },
          "warehouse_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Reason"
          },
          "weight_kg": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Weight Kg"
          }
        },
        "required": [
          "order_id",
          "platform",
          "shop_id",
          "ext_order_no",
          "ref"
        ],
        "title": "ShipPrepareResponse",
        "type": "object"
      },
      "ShipQuoteOut": {
        "properties": {
          "breakdown": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Breakdown"
          },
          "carrier_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Carrier Code"
          },
          "carrier_name": {
            "title": "Carrier Name",
            "type": "string"
          },
          "currency": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Currency"
          },
          "est_cost": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Est Cost"
          },
          "eta": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Eta"
          },
          "provider_id": {
            "title": "Provider Id",
            "type": "integer"
          },
          "quote_status": {
            "title": "Quote Status",
            "type": "string"
          },
          "reasons": {
            "items": {
              "type": "string"
            },
            "title": "Reasons",
            "type": "array"
          },
          "scheme_id": {
            "title": "Scheme Id",
            "type": "integer"
          },
          "scheme_name": {
            "title": "Scheme Name",
            "type": "string"
          }
        },
        "required": [
          "provider_id",
          "carrier_name",
          "scheme_id",
          "scheme_name",
          "quote_status"
        ],
        "title": "ShipQuoteOut",
        "type": "object"
      },
      "ShipRecommendedOut": {
        "properties": {
          "carrier_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Carrier Code"
          },
          "currency": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Currency"
          },
          "est_cost": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Est Cost"
          },
          "provider_id": {
            "title": "Provider Id",
            "type": "integer"
          },
          "scheme_id": {
            "title": "Scheme Id",
            "type": "integer"
          }
        },
        "required": [
          "provider_id",
          "scheme_id"
        ],
        "title": "ShipRecommendedOut",
        "type": "object"
      },
      "ShipRequest": {
        "properties": {
          "lines": {
            "items": {
              "$ref": "#/components/schemas/ShipLineIn"
            },
            "title": "Lines",
            "type": "array"
          },
          "occurred_at": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "发运时间（缺省为当前 UTC 时间）",
            "title": "Occurred At"
          },
          "warehouse_id": {
            "exclusiveMinimum": 0.0,
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "warehouse_id"
        ],
        "title": "ShipRequest",
        "type": "object"
      },
      "ShipResponse": {
        "properties": {
          "event": {
            "default": "SHIP_COMMIT",
            "title": "Event",
            "type": "string"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          },
          "status": {
            "title": "Status",
            "type": "string"
          }
        },
        "required": [
          "status",
          "ref"
        ],
        "title": "ShipResponse",
        "type": "object"
      },
      "ShipWithWaybillRequest": {
        "properties": {
          "address_detail": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Address Detail"
          },
          "carrier_code": {
            "description": "快递公司编码，例如 ZTO / JT / SF",
            "minLength": 1,
            "title": "Carrier Code",
            "type": "string"
          },
          "carrier_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "快递公司名称（冗余字段）",
            "title": "Carrier Name"
          },
          "city": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City"
          },
          "district": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "District"
          },
          "meta": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "description": "必须包含 quote_snapshot（input + selected_quote）",
            "title": "Meta"
          },
          "province": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Province"
          },
          "receiver_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Receiver Name"
          },
          "receiver_phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Receiver Phone"
          },
          "warehouse_id": {
            "description": "发货仓库 ID",
            "exclusiveMinimum": 0.0,
            "title": "Warehouse Id",
            "type": "integer"
          },
          "weight_kg": {
            "description": "包裹毛重（kg）",
            "exclusiveMinimum": 0.0,
            "title": "Weight Kg",
            "type": "number"
          }
        },
        "required": [
          "warehouse_id",
          "carrier_code",
          "weight_kg"
        ],
        "title": "ShipWithWaybillRequest",
        "type": "object"
      },
      "ShipWithWaybillResponse": {
        "properties": {
          "carrier_code": {
            "title": "Carrier Code",
            "type": "string"
          },
          "carrier_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Carrier Name"
          },
          "label_base64": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Label Base64"
          },
          "label_format": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Label Format"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          },
          "status": {
            "default": "IN_TRANSIT",
            "title": "Status",
            "type": "string"
          },
          "tracking_no": {
            "title": "Tracking No",
            "type": "string"
          }
        },
        "required": [
          "ok",
          "ref",
          "tracking_no",
          "carrier_code"
        ],
        "title": "ShipWithWaybillResponse",
        "type": "object"
      },
      "ShippingByCarrierResponse": {
        "properties": {
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          },
          "rows": {
            "items": {
              "$ref": "#/components/schemas/ShippingByCarrierRow"
            },
            "title": "Rows",
            "type": "array"
          }
        },
        "required": [
          "rows"
        ],
        "title": "ShippingByCarrierResponse",
        "type": "object"
      },
      "ShippingByCarrierRow": {
        "properties": {
          "avg_cost": {
            "title": "Avg Cost",
            "type": "number"
          },
          "carrier_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Carrier Code"
          },
          "carrier_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Carrier Name"
          },
          "ship_cnt": {
            "title": "Ship Cnt",
            "type": "integer"
          },
          "total_cost": {
            "title": "Total Cost",
            "type": "number"
          }
        },
        "required": [
          "ship_cnt",
          "total_cost",
          "avg_cost"
        ],
        "title": "ShippingByCarrierRow",
        "type": "object"
      },
      "ShippingByProvinceResponse": {
        "properties": {
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          },
          "rows": {
            "items": {
              "$ref": "#/components/schemas/ShippingByProvinceRow"
            },
            "title": "Rows",
            "type": "array"
          }
        },
        "required": [
          "rows"
        ],
        "title": "ShippingByProvinceResponse",
        "type": "object"
      },
      "ShippingByProvinceRow": {
        "properties": {
          "avg_cost": {
            "title": "Avg Cost",
            "type": "number"
          },
          "province": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Province"
          },
          "ship_cnt": {
            "title": "Ship Cnt",
            "type": "integer"
          },
          "total_cost": {
            "title": "Total Cost",
            "type": "number"
          }
        },
        "required": [
          "ship_cnt",
          "total_cost",
          "avg_cost"
        ],
        "title": "ShippingByProvinceRow",
        "type": "object"
      },
      "ShippingByShopResponse": {
        "properties": {
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          },
          "rows": {
            "items": {
              "$ref": "#/components/schemas/ShippingByShopRow"
            },
            "title": "Rows",
            "type": "array"
          }
        },
        "required": [
          "rows"
        ],
        "title": "ShippingByShopResponse",
        "type": "object"
      },
      "ShippingByShopRow": {
        "properties": {
          "avg_cost": {
            "title": "Avg Cost",
            "type": "number"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "ship_cnt": {
            "title": "Ship Cnt",
            "type": "integer"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          },
          "total_cost": {
            "title": "Total Cost",
            "type": "number"
          }
        },
        "required": [
          "platform",
          "shop_id",
          "ship_cnt",
          "total_cost",
          "avg_cost"
        ],
        "title": "ShippingByShopRow",
        "type": "object"
      },
      "ShippingByWarehouseResponse": {
        "properties": {
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          },
          "rows": {
            "items": {
              "$ref": "#/components/schemas/ShippingByWarehouseRow"
            },
            "title": "Rows",
            "type": "array"
          }
        },
        "required": [
          "rows"
        ],
        "title": "ShippingByWarehouseResponse",
        "type": "object"
      },
      "ShippingByWarehouseRow": {
        "properties": {
          "avg_cost": {
            "title": "Avg Cost",
            "type": "number"
          },
          "ship_cnt": {
            "title": "Ship Cnt",
            "type": "integer"
          },
          "total_cost": {
            "title": "Total Cost",
            "type": "number"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Id"
          }
        },
        "required": [
          "ship_cnt",
          "total_cost",
          "avg_cost"
        ],
        "title": "ShippingByWarehouseRow",
        "type": "object"
      },
      "ShippingDailyResponse": {
        "properties": {
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          },
          "rows": {
            "items": {
              "$ref": "#/components/schemas/ShippingDailyRow"
            },
            "title": "Rows",
            "type": "array"
          }
        },
        "required": [
          "rows"
        ],
        "title": "ShippingDailyResponse",
        "type": "object"
      },
      "ShippingDailyRow": {
        "properties": {
          "avg_cost": {
            "title": "Avg Cost",
            "type": "number"
          },
          "ship_cnt": {
            "title": "Ship Cnt",
            "type": "integer"
          },
          "stat_date": {
            "title": "Stat Date",
            "type": "string"
          },
          "total_cost": {
            "title": "Total Cost",
            "type": "number"
          }
        },
        "required": [
          "stat_date",
          "ship_cnt",
          "total_cost",
          "avg_cost"
        ],
        "title": "ShippingDailyRow",
        "type": "object"
      },
      "ShippingListResponse": {
        "properties": {
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          },
          "rows": {
            "items": {
              "$ref": "#/components/schemas/ShippingListRow"
            },
            "title": "Rows",
            "type": "array"
          },
          "total": {
            "title": "Total",
            "type": "integer"
          }
        },
        "required": [
          "rows",
          "total"
        ],
        "title": "ShippingListResponse",
        "type": "object"
      },
      "ShippingListRow": {
        "properties": {
          "carrier_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Carrier Code"
          },
          "carrier_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Carrier Name"
          },
          "cost_estimated": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cost Estimated"
          },
          "created_at": {
            "title": "Created At",
            "type": "string"
          },
          "gross_weight_kg": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Gross Weight Kg"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "meta": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Meta"
          },
          "order_ref": {
            "title": "Order Ref",
            "type": "string"
          },
          "packaging_weight_kg": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Packaging Weight Kg"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trace Id"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Id"
          }
        },
        "required": [
          "id",
          "order_ref",
          "platform",
          "shop_id",
          "created_at"
        ],
        "title": "ShippingListRow",
        "type": "object"
      },
      "ShippingProviderContactCreateIn": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "email": {
            "anyOf": [
              {
                "format": "email",
                "maxLength": 255,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "is_primary": {
            "default": false,
            "title": "Is Primary",
            "type": "boolean"
          },
          "name": {
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "type": "string"
          },
          "phone": {
            "anyOf": [
              {
                "maxLength": 50,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Phone"
          },
          "role": {
            "default": "other",
            "maxLength": 32,
            "title": "Role",
            "type": "string"
          },
          "wechat": {
            "anyOf": [
              {
                "maxLength": 64,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Wechat"
          }
        },
        "required": [
          "name"
        ],
        "title": "ShippingProviderContactCreateIn",
        "type": "object"
      },
      "ShippingProviderContactOut": {
        "properties": {
          "active": {
            "title": "Active",
            "type": "boolean"
          },
          "email": {
            "anyOf": [
              {
                "format": "email",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "is_primary": {
            "title": "Is Primary",
            "type": "boolean"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Phone"
          },
          "role": {
            "title": "Role",
            "type": "string"
          },
          "shipping_provider_id": {
            "title": "Shipping Provider Id",
            "type": "integer"
          },
          "wechat": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Wechat"
          }
        },
        "required": [
          "id",
          "shipping_provider_id",
          "name",
          "role",
          "is_primary",
          "active"
        ],
        "title": "ShippingProviderContactOut",
        "type": "object"
      },
      "ShippingProviderContactUpdateIn": {
        "properties": {
          "active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active"
          },
          "email": {
            "anyOf": [
              {
                "format": "email",
                "maxLength": 255,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "is_primary": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Primary"
          },
          "name": {
            "anyOf": [
              {
                "maxLength": 100,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "phone": {
            "anyOf": [
              {
                "maxLength": 50,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Phone"
          },
          "role": {
            "anyOf": [
              {
                "maxLength": 32,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Role"
          },
          "wechat": {
            "anyOf": [
              {
                "anyOf": [
                  {
                    "format": "email",
                    "type": "string"
                  },
                  {
                    "type": "string"
                  }
                ],
                "maxLength": 64
              },
              {
                "type": "null"
              }
            ],
            "title": "Wechat"
          }
        },
        "title": "ShippingProviderContactUpdateIn",
        "type": "object"
      },
      "ShippingProviderCreateIn": {
        "description": "刚性契约（Phase 6）：\n- warehouse_id 必填\n- code 在 write 路由内仍保持必填（不允许空白/None）",
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "address": {
            "anyOf": [
              {
                "maxLength": 255,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Address"
          },
          "code": {
            "anyOf": [
              {
                "maxLength": 64,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "name": {
            "maxLength": 255,
            "minLength": 1,
            "title": "Name",
            "type": "string"
          },
          "pricing_model": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "description": "计费模型 JSON，例如 {type: 'by_weight', base_weight: 1, base_cost: 3.5, extra_unit: 1, extra_cost: 1.2}",
            "title": "Pricing Model"
          },
          "priority": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": 100,
            "description": "排序优先级，数值越小优先级越高",
            "title": "Priority"
          },
          "region_rules": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "description": "区域覆盖规则 JSON，例如 {'广东省': {base_cost: 3.2}}",
            "title": "Region Rules"
          },
          "warehouse_id": {
            "description": "所属仓库（单仓归属，必填）",
            "minimum": 1.0,
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "name",
          "warehouse_id"
        ],
        "title": "ShippingProviderCreateIn",
        "type": "object"
      },
      "ShippingProviderCreateOut": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ShippingProviderOut"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "ShippingProviderCreateOut",
        "type": "object"
      },
      "ShippingProviderDetailOut": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ShippingProviderOut"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "ShippingProviderDetailOut",
        "type": "object"
      },
      "ShippingProviderListOut": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/ShippingProviderOut"
            },
            "title": "Data",
            "type": "array"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "ShippingProviderListOut",
        "type": "object"
      },
      "ShippingProviderLiteOut": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "name": {
            "title": "Name",
            "type": "string"
          }
        },
        "required": [
          "id",
          "name"
        ],
        "title": "ShippingProviderLiteOut",
        "type": "object"
      },
      "ShippingProviderOut": {
        "description": "刚性契约（Phase 6）：\n- 本对象语义升级为「仓库可用快递网点」\n- 必须绑定 warehouse_id（单仓归属）",
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "address": {
            "anyOf": [
              {
                "maxLength": 255,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Address"
          },
          "code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "contacts": {
            "items": {
              "$ref": "#/components/schemas/ShippingProviderContactOut"
            },
            "title": "Contacts",
            "type": "array"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "pricing_model": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pricing Model"
          },
          "priority": {
            "default": 100,
            "title": "Priority",
            "type": "integer"
          },
          "region_rules": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Region Rules"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "id",
          "name",
          "warehouse_id"
        ],
        "title": "ShippingProviderOut",
        "type": "object"
      },
      "ShippingProviderUpdateIn": {
        "properties": {
          "active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active"
          },
          "address": {
            "anyOf": [
              {
                "maxLength": 255,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Address"
          },
          "code": {
            "anyOf": [
              {
                "maxLength": 64,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "name": {
            "anyOf": [
              {
                "maxLength": 255,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "pricing_model": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pricing Model"
          },
          "priority": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Priority"
          },
          "region_rules": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Region Rules"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "minimum": 1.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Id"
          }
        },
        "title": "ShippingProviderUpdateIn",
        "type": "object"
      },
      "ShippingProviderUpdateOut": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ShippingProviderOut"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "ShippingProviderUpdateOut",
        "type": "object"
      },
      "ShippingQuoteFailureDetail": {
        "properties": {
          "created_at": {
            "title": "Created At",
            "type": "string"
          },
          "error_code": {
            "title": "Error Code",
            "type": "string"
          },
          "event": {
            "title": "Event",
            "type": "string"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          },
          "ref": {
            "title": "Ref",
            "type": "string"
          }
        },
        "required": [
          "ref",
          "event",
          "error_code",
          "created_at"
        ],
        "title": "ShippingQuoteFailureDetail",
        "type": "object"
      },
      "ShippingQuoteFailuresMetricsResponse": {
        "properties": {
          "calc_failed_total": {
            "title": "Calc Failed Total",
            "type": "integer"
          },
          "calc_failures_by_code": {
            "additionalProperties": {
              "type": "integer"
            },
            "default": {},
            "title": "Calc Failures By Code",
            "type": "object"
          },
          "day": {
            "format": "date",
            "title": "Day",
            "type": "string"
          },
          "details": {
            "default": [],
            "items": {
              "$ref": "#/components/schemas/ShippingQuoteFailureDetail"
            },
            "title": "Details",
            "type": "array"
          },
          "platform": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Platform"
          },
          "recommend_failed_total": {
            "title": "Recommend Failed Total",
            "type": "integer"
          },
          "recommend_failures_by_code": {
            "additionalProperties": {
              "type": "integer"
            },
            "default": {},
            "title": "Recommend Failures By Code",
            "type": "object"
          }
        },
        "required": [
          "day",
          "calc_failed_total",
          "recommend_failed_total"
        ],
        "title": "ShippingQuoteFailuresMetricsResponse",
        "type": "object"
      },
      "ShippingRecordOut": {
        "properties": {
          "carrier_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Carrier Code"
          },
          "carrier_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Carrier Name"
          },
          "cost_estimated": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cost Estimated"
          },
          "cost_real": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cost Real"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "delivery_time": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Delivery Time"
          },
          "error_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Code"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message"
          },
          "gross_weight_kg": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Gross Weight Kg"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "meta": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Meta"
          },
          "order_ref": {
            "title": "Order Ref",
            "type": "string"
          },
          "packaging_weight_kg": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Packaging Weight Kg"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trace Id"
          },
          "tracking_no": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tracking No"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Id"
          },
          "weight_kg": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Weight Kg"
          }
        },
        "required": [
          "id",
          "order_ref",
          "platform",
          "shop_id",
          "created_at"
        ],
        "title": "ShippingRecordOut",
        "type": "object"
      },
      "ShippingReportFilterOptions": {
        "properties": {
          "cities": {
            "items": {
              "type": "string"
            },
            "title": "Cities",
            "type": "array"
          },
          "platforms": {
            "items": {
              "type": "string"
            },
            "title": "Platforms",
            "type": "array"
          },
          "provinces": {
            "items": {
              "type": "string"
            },
            "title": "Provinces",
            "type": "array"
          },
          "shop_ids": {
            "items": {
              "type": "string"
            },
            "title": "Shop Ids",
            "type": "array"
          }
        },
        "required": [
          "platforms",
          "shop_ids",
          "provinces",
          "cities"
        ],
        "title": "ShippingReportFilterOptions",
        "type": "object"
      },
      "ShippingStatusUpdateIn": {
        "properties": {
          "delivery_time": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "状态为 DELIVERED 时，如未提供则默认使用当前时间",
            "title": "Delivery Time"
          },
          "error_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "错误码（LOST/RETURNED 时可选）",
            "title": "Error Code"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "错误说明（LOST/RETURNED 时可选）",
            "title": "Error Message"
          },
          "meta": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "description": "附加 meta，将 merge 进原 meta（不会丢弃原有字段）",
            "title": "Meta"
          },
          "status": {
            "description": "发货状态：IN_TRANSIT / DELIVERED / LOST / RETURNED",
            "enum": [
              "IN_TRANSIT",
              "DELIVERED",
              "LOST",
              "RETURNED"
            ],
            "title": "Status",
            "type": "string"
          }
        },
        "required": [
          "status"
        ],
        "title": "ShippingStatusUpdateIn",
        "type": "object"
      },
      "ShippingStatusUpdateOut": {
        "properties": {
          "delivery_time": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Delivery Time"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          },
          "status": {
            "title": "Status",
            "type": "string"
          }
        },
        "required": [
          "id",
          "status"
        ],
        "title": "ShippingStatusUpdateOut",
        "type": "object"
      },
      "SimpleOut": {
        "properties": {
          "data": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "ok"
        ],
        "title": "SimpleOut",
        "type": "object"
      },
      "StockBatchQueryIn": {
        "description": "POST /stock/batch/query 入参",
        "properties": {
          "expiry_date_from": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expiry Date From"
          },
          "expiry_date_to": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expiry Date To"
          },
          "item_id": {
            "anyOf": [
              {
                "minimum": 1.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Id"
          },
          "page": {
            "default": 1,
            "minimum": 1.0,
            "title": "Page",
            "type": "integer"
          },
          "page_size": {
            "default": 50,
            "maximum": 500.0,
            "minimum": 1.0,
            "title": "Page Size",
            "type": "integer"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "minimum": 1.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Id"
          }
        },
        "title": "StockBatchQueryIn",
        "type": "object"
      },
      "StockBatchQueryOut": {
        "description": "批次查询结果",
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/StockBatchRow"
            },
            "title": "Items",
            "type": "array"
          },
          "page": {
            "title": "Page",
            "type": "integer"
          },
          "page_size": {
            "title": "Page Size",
            "type": "integer"
          },
          "total": {
            "title": "Total",
            "type": "integer"
          }
        },
        "required": [
          "total",
          "page",
          "page_size"
        ],
        "title": "StockBatchQueryOut",
        "type": "object"
      },
      "StockBatchRow": {
        "description": "批次行",
        "properties": {
          "batch_code": {
            "title": "Batch Code",
            "type": "string"
          },
          "batch_id": {
            "title": "Batch Id",
            "type": "integer"
          },
          "days_to_expiry": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "到期天数(负数=已过期)",
            "title": "Days To Expiry"
          },
          "expiry_date": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expiry Date"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "production_date": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Production Date"
          },
          "qty": {
            "title": "Qty",
            "type": "integer"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "batch_id",
          "item_id",
          "warehouse_id",
          "batch_code",
          "qty"
        ],
        "title": "StockBatchRow",
        "type": "object"
      },
      "StoreCreateIn": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "maxLength": 256,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "platform": {
            "maxLength": 32,
            "minLength": 2,
            "title": "Platform",
            "type": "string"
          },
          "shop_id": {
            "maxLength": 128,
            "minLength": 1,
            "title": "Shop Id",
            "type": "string"
          },
          "shop_type": {
            "default": "PROD",
            "enum": [
              "TEST",
              "PROD"
            ],
            "title": "Shop Type",
            "type": "string"
          }
        },
        "required": [
          "platform",
          "shop_id"
        ],
        "title": "StoreCreateIn",
        "type": "object"
      },
      "StoreCreateOut": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "title": "Data",
            "type": "object"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "StoreCreateOut",
        "type": "object"
      },
      "StoreDetailOut": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "title": "Data",
            "type": "object"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "StoreDetailOut",
        "type": "object"
      },
      "StoreListItem": {
        "properties": {
          "active": {
            "title": "Active",
            "type": "boolean"
          },
          "contact_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Contact Name"
          },
          "contact_phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Contact Phone"
          },
          "email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "platform": {
            "title": "Platform",
            "type": "string"
          },
          "route_mode": {
            "title": "Route Mode",
            "type": "string"
          },
          "shop_id": {
            "title": "Shop Id",
            "type": "string"
          },
          "shop_type": {
            "default": "PROD",
            "title": "Shop Type",
            "type": "string"
          }
        },
        "required": [
          "id",
          "platform",
          "shop_id",
          "name",
          "active",
          "route_mode"
        ],
        "title": "StoreListItem",
        "type": "object"
      },
      "StoreListOut": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/StoreListItem"
            },
            "title": "Data",
            "type": "array"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "StoreListOut",
        "type": "object"
      },
      "StoreLiteOut": {
        "properties": {
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "name": {
            "title": "Name",
            "type": "string"
          }
        },
        "required": [
          "id",
          "name"
        ],
        "title": "StoreLiteOut",
        "type": "object"
      },
      "StorePlatformAuthOut": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "title": "Data",
            "type": "object"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "StorePlatformAuthOut",
        "type": "object"
      },
      "StoreUpdateIn": {
        "properties": {
          "active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active"
          },
          "contact_name": {
            "anyOf": [
              {
                "maxLength": 100,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Contact Name"
          },
          "contact_phone": {
            "anyOf": [
              {
                "maxLength": 50,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Contact Phone"
          },
          "email": {
            "anyOf": [
              {
                "maxLength": 255,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "name": {
            "anyOf": [
              {
                "maxLength": 256,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "route_mode": {
            "anyOf": [
              {
                "maxLength": 32,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Route Mode"
          }
        },
        "title": "StoreUpdateIn",
        "type": "object"
      },
      "StoreUpdateOut": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "title": "Data",
            "type": "object"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "StoreUpdateOut",
        "type": "object"
      },
      "SubReason": {
        "enum": [
          "PO_RECEIPT",
          "ORDER_SHIP",
          "COUNT_ADJUST",
          "RETURN_RECEIPT",
          "INTERNAL_SHIP",
          "RETURN_TO_VENDOR"
        ],
        "title": "SubReason",
        "type": "string"
      },
      "SupplierBasicOut": {
        "description": "采购/收货用：供应商基础信息（不带 contacts）",
        "properties": {
          "active": {
            "title": "Active",
            "type": "boolean"
          },
          "code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "name": {
            "title": "Name",
            "type": "string"
          }
        },
        "required": [
          "id",
          "name",
          "active"
        ],
        "title": "SupplierBasicOut",
        "type": "object"
      },
      "SupplierContactCreateIn": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "email": {
            "anyOf": [
              {
                "format": "email",
                "maxLength": 255,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "is_primary": {
            "default": false,
            "title": "Is Primary",
            "type": "boolean"
          },
          "name": {
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "type": "string"
          },
          "phone": {
            "anyOf": [
              {
                "maxLength": 50,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Phone"
          },
          "role": {
            "default": "other",
            "maxLength": 32,
            "title": "Role",
            "type": "string"
          },
          "wechat": {
            "anyOf": [
              {
                "maxLength": 64,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Wechat"
          }
        },
        "required": [
          "name"
        ],
        "title": "SupplierContactCreateIn",
        "type": "object"
      },
      "SupplierContactOut": {
        "properties": {
          "active": {
            "title": "Active",
            "type": "boolean"
          },
          "email": {
            "anyOf": [
              {
                "format": "email",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "is_primary": {
            "title": "Is Primary",
            "type": "boolean"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Phone"
          },
          "role": {
            "title": "Role",
            "type": "string"
          },
          "supplier_id": {
            "title": "Supplier Id",
            "type": "integer"
          },
          "wechat": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Wechat"
          }
        },
        "required": [
          "id",
          "supplier_id",
          "name",
          "role",
          "is_primary",
          "active"
        ],
        "title": "SupplierContactOut",
        "type": "object"
      },
      "SupplierContactUpdateIn": {
        "properties": {
          "active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active"
          },
          "email": {
            "anyOf": [
              {
                "format": "email",
                "maxLength": 255,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "is_primary": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Primary"
          },
          "name": {
            "anyOf": [
              {
                "maxLength": 100,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "phone": {
            "anyOf": [
              {
                "maxLength": 50,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Phone"
          },
          "role": {
            "anyOf": [
              {
                "maxLength": 32,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Role"
          },
          "wechat": {
            "anyOf": [
              {
                "maxLength": 64,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Wechat"
          }
        },
        "title": "SupplierContactUpdateIn",
        "type": "object"
      },
      "SupplierCreateIn": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "code": {
            "minLength": 1,
            "title": "Code",
            "type": "string"
          },
          "name": {
            "minLength": 1,
            "title": "Name",
            "type": "string"
          },
          "website": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Website"
          }
        },
        "required": [
          "name",
          "code"
        ],
        "title": "SupplierCreateIn",
        "type": "object"
      },
      "SupplierOut": {
        "properties": {
          "active": {
            "title": "Active",
            "type": "boolean"
          },
          "code": {
            "title": "Code",
            "type": "string"
          },
          "contacts": {
            "items": {
              "$ref": "#/components/schemas/SupplierContactOut"
            },
            "title": "Contacts",
            "type": "array"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "website": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Website"
          }
        },
        "required": [
          "id",
          "name",
          "code",
          "active",
          "contacts"
        ],
        "title": "SupplierOut",
        "type": "object"
      },
      "SupplierPurchaseReportItem": {
        "properties": {
          "avg_unit_price": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "平均采购单价（金额 / 最小单位数）",
            "title": "Avg Unit Price"
          },
          "order_count": {
            "description": "采购单数量",
            "title": "Order Count",
            "type": "integer"
          },
          "supplier_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "供应商 ID（可空）",
            "title": "Supplier Id"
          },
          "supplier_name": {
            "description": "供应商名称（快照/展示用）",
            "title": "Supplier Name",
            "type": "string"
          },
          "total_amount": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "金额合计",
            "title": "Total Amount"
          },
          "total_qty_cases": {
            "description": "订购件数合计（件）",
            "title": "Total Qty Cases",
            "type": "integer"
          },
          "total_units": {
            "description": "折算最小单位数量合计",
            "title": "Total Units",
            "type": "integer"
          }
        },
        "required": [
          "supplier_id",
          "supplier_name",
          "order_count",
          "total_qty_cases",
          "total_units"
        ],
        "title": "SupplierPurchaseReportItem",
        "type": "object"
      },
      "SupplierUpdateIn": {
        "properties": {
          "active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active"
          },
          "code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "website": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Website"
          }
        },
        "title": "SupplierUpdateIn",
        "type": "object"
      },
      "SurchargeCreateIn": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "amount_json": {
            "additionalProperties": true,
            "title": "Amount Json",
            "type": "object"
          },
          "condition_json": {
            "additionalProperties": true,
            "title": "Condition Json",
            "type": "object"
          },
          "name": {
            "maxLength": 128,
            "minLength": 1,
            "title": "Name",
            "type": "string"
          }
        },
        "required": [
          "name",
          "condition_json",
          "amount_json"
        ],
        "title": "SurchargeCreateIn",
        "type": "object"
      },
      "SurchargeOut": {
        "properties": {
          "active": {
            "title": "Active",
            "type": "boolean"
          },
          "amount_json": {
            "additionalProperties": true,
            "title": "Amount Json",
            "type": "object"
          },
          "condition_json": {
            "additionalProperties": true,
            "title": "Condition Json",
            "type": "object"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "scheme_id": {
            "title": "Scheme Id",
            "type": "integer"
          }
        },
        "required": [
          "id",
          "scheme_id",
          "name",
          "active",
          "condition_json",
          "amount_json"
        ],
        "title": "SurchargeOut",
        "type": "object"
      },
      "SurchargeUpdateIn": {
        "properties": {
          "active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active"
          },
          "amount_json": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Amount Json"
          },
          "condition_json": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Condition Json"
          },
          "name": {
            "anyOf": [
              {
                "maxLength": 128,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          }
        },
        "title": "SurchargeUpdateIn",
        "type": "object"
      },
      "SurchargeUpsertIn": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "amount": {
            "minimum": 0.0,
            "title": "Amount",
            "type": "number"
          },
          "city": {
            "anyOf": [
              {
                "maxLength": 64,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City"
          },
          "name": {
            "anyOf": [
              {
                "maxLength": 128,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "province": {
            "maxLength": 64,
            "minLength": 1,
            "title": "Province",
            "type": "string"
          },
          "scope": {
            "enum": [
              "province",
              "city"
            ],
            "title": "Scope",
            "type": "string"
          }
        },
        "required": [
          "scope",
          "province",
          "amount"
        ],
        "title": "SurchargeUpsertIn",
        "type": "object"
      },
      "ThreeBooksPayload": {
        "properties": {
          "cut": {
            "format": "date-time",
            "title": "Cut",
            "type": "string"
          }
        },
        "required": [
          "cut"
        ],
        "title": "ThreeBooksPayload",
        "type": "object"
      },
      "Token": {
        "properties": {
          "access_token": {
            "description": "访问令牌",
            "title": "Access Token",
            "type": "string"
          },
          "expires_in": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "有效期（秒），可选",
            "title": "Expires In"
          },
          "token_type": {
            "default": "bearer",
            "description": "令牌类型，默认 bearer",
            "title": "Token Type",
            "type": "string"
          }
        },
        "required": [
          "access_token"
        ],
        "title": "Token",
        "type": "object"
      },
      "TraceEventModel": {
        "properties": {
          "batch_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "批次编码（若事件包含该维度）",
            "title": "Batch Code"
          },
          "item_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "商品 ID（若事件包含该维度）",
            "title": "Item Id"
          },
          "kind": {
            "description": "事件类型 / 动作名",
            "title": "Kind",
            "type": "string"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "人类可读摘要（前端 Timeline 优先展示）",
            "title": "Message"
          },
          "movement_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "标准化动作类型：INBOUND/OUTBOUND/COUNT/ADJUST/RETURN/UNKNOWN",
            "title": "Movement Type"
          },
          "raw": {
            "additionalProperties": true,
            "description": "原始字段明细（调试用）",
            "title": "Raw",
            "type": "object"
          },
          "reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "原始 reason 字段（例如台账 reason）",
            "title": "Reason"
          },
          "ref": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "业务 ref（订单号 等）",
            "title": "Ref"
          },
          "source": {
            "description": "事件来源，例如 ledger / outbound / audit 等",
            "title": "Source",
            "type": "string"
          },
          "summary": {
            "description": "人类可读的事件摘要（向后兼容字段）",
            "title": "Summary",
            "type": "string"
          },
          "trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "trace_id（通常与请求参数相同，用于前端直接使用）",
            "title": "Trace Id"
          },
          "ts": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "事件时间戳（可能为空）",
            "title": "Ts"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "仓库 ID（若事件包含该维度）",
            "title": "Warehouse Id"
          }
        },
        "required": [
          "source",
          "kind",
          "summary",
          "raw"
        ],
        "title": "TraceEventModel",
        "type": "object"
      },
      "TraceResponseModel": {
        "properties": {
          "events": {
            "items": {
              "$ref": "#/components/schemas/TraceEventModel"
            },
            "title": "Events",
            "type": "array"
          },
          "trace_id": {
            "title": "Trace Id",
            "type": "string"
          },
          "warehouse_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "若指定，则 events 已按该 warehouse 过滤（但保留无仓的全局事件）",
            "title": "Warehouse Id"
          }
        },
        "required": [
          "trace_id",
          "events"
        ],
        "title": "TraceResponseModel",
        "type": "object"
      },
      "UserCreateMulti": {
        "properties": {
          "email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "extra_role_ids": {
            "default": [],
            "items": {
              "type": "integer"
            },
            "title": "Extra Role Ids",
            "type": "array"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name"
          },
          "password": {
            "title": "Password",
            "type": "string"
          },
          "phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Phone"
          },
          "primary_role_id": {
            "title": "Primary Role Id",
            "type": "integer"
          },
          "username": {
            "title": "Username",
            "type": "string"
          }
        },
        "required": [
          "username",
          "password",
          "primary_role_id"
        ],
        "title": "UserCreateMulti",
        "type": "object"
      },
      "UserLogin": {
        "description": "登录入参",
        "properties": {
          "password": {
            "minLength": 1,
            "title": "Password",
            "type": "string"
          },
          "username": {
            "maxLength": 64,
            "minLength": 3,
            "title": "Username",
            "type": "string"
          }
        },
        "required": [
          "username",
          "password"
        ],
        "title": "UserLogin",
        "type": "object"
      },
      "UserOut": {
        "description": "对外返回的用户模型",
        "properties": {
          "email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "is_active": {
            "default": true,
            "title": "Is Active",
            "type": "boolean"
          },
          "phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Phone"
          },
          "role_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Role Id"
          },
          "username": {
            "title": "Username",
            "type": "string"
          }
        },
        "required": [
          "id",
          "username"
        ],
        "title": "UserOut",
        "type": "object"
      },
      "UserUpdateMulti": {
        "properties": {
          "email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "extra_role_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "integer"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Extra Role Ids"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active"
          },
          "phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Phone"
          },
          "primary_role_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary Role Id"
          }
        },
        "title": "UserUpdateMulti",
        "type": "object"
      },
      "ValidationError": {
        "properties": {
          "ctx": {
            "title": "Context",
            "type": "object"
          },
          "input": {
            "title": "Input"
          },
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "title": "Location",
            "type": "array"
          },
          "msg": {
            "title": "Message",
            "type": "string"
          },
          "type": {
            "title": "Error Type",
            "type": "string"
          }
        },
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError",
        "type": "object"
      },
      "WarehouseActiveCarriersOut": {
        "properties": {
          "active_carriers": {
            "items": {
              "$ref": "#/components/schemas/ActiveCarrierOut"
            },
            "title": "Active Carriers",
            "type": "array"
          },
          "active_carriers_count": {
            "title": "Active Carriers Count",
            "type": "integer"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "warehouse_id",
          "active_carriers",
          "active_carriers_count"
        ],
        "title": "WarehouseActiveCarriersOut",
        "type": "object"
      },
      "WarehouseActiveCarriersSummaryOut": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/WarehouseActiveCarriersOut"
            },
            "title": "Data",
            "type": "array"
          },
          "ok": {
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "ok",
          "data"
        ],
        "title": "WarehouseActiveCarriersSummaryOut",
        "type": "object"
      },
      "WarehouseBriefOut": {
        "properties": {
          "code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          }
        },
        "required": [
          "id"
        ],
        "title": "WarehouseBriefOut",
        "type": "object"
      },
      "WarehouseCreateIn": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "address": {
            "anyOf": [
              {
                "maxLength": 255,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Address"
          },
          "area_sqm": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Area Sqm"
          },
          "code": {
            "anyOf": [
              {
                "maxLength": 64,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "contact_name": {
            "anyOf": [
              {
                "maxLength": 100,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Contact Name"
          },
          "contact_phone": {
            "anyOf": [
              {
                "maxLength": 50,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Contact Phone"
          },
          "name": {
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "type": "string"
          }
        },
        "required": [
          "name"
        ],
        "title": "WarehouseCreateIn",
        "type": "object"
      },
      "WarehouseCreateOut": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/WarehouseOut"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "WarehouseCreateOut",
        "type": "object"
      },
      "WarehouseDetailOut": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/WarehouseOut"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "WarehouseDetailOut",
        "type": "object"
      },
      "WarehouseListOut": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/WarehouseOut"
            },
            "title": "Data",
            "type": "array"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "WarehouseListOut",
        "type": "object"
      },
      "WarehouseLiteOut": {
        "properties": {
          "active": {
            "title": "Active",
            "type": "boolean"
          },
          "code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "name": {
            "title": "Name",
            "type": "string"
          }
        },
        "required": [
          "id",
          "name",
          "active"
        ],
        "title": "WarehouseLiteOut",
        "type": "object"
      },
      "WarehouseOptionOut": {
        "properties": {
          "active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active"
          },
          "code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          }
        },
        "required": [
          "id"
        ],
        "title": "WarehouseOptionOut",
        "type": "object"
      },
      "WarehouseOut": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "address": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Address"
          },
          "area_sqm": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Area Sqm"
          },
          "code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "contact_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Contact Name"
          },
          "contact_phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Contact Phone"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "name": {
            "title": "Name",
            "type": "string"
          }
        },
        "required": [
          "id",
          "name"
        ],
        "title": "WarehouseOut",
        "type": "object"
      },
      "WarehouseServiceCitiesOut": {
        "properties": {
          "cities": {
            "items": {
              "type": "string"
            },
            "title": "Cities",
            "type": "array"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "warehouse_id"
        ],
        "title": "WarehouseServiceCitiesOut",
        "type": "object"
      },
      "WarehouseServiceCitiesPutIn": {
        "properties": {
          "cities": {
            "items": {
              "type": "string"
            },
            "title": "Cities",
            "type": "array"
          }
        },
        "title": "WarehouseServiceCitiesPutIn",
        "type": "object"
      },
      "WarehouseServiceCityOccupancyOut": {
        "properties": {
          "rows": {
            "items": {
              "$ref": "#/components/schemas/WarehouseServiceCityOccupancyRow"
            },
            "title": "Rows",
            "type": "array"
          }
        },
        "title": "WarehouseServiceCityOccupancyOut",
        "type": "object"
      },
      "WarehouseServiceCityOccupancyRow": {
        "properties": {
          "city_code": {
            "title": "City Code",
            "type": "string"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "city_code",
          "warehouse_id"
        ],
        "title": "WarehouseServiceCityOccupancyRow",
        "type": "object"
      },
      "WarehouseServiceCitySplitProvincesOut": {
        "properties": {
          "provinces": {
            "items": {
              "type": "string"
            },
            "title": "Provinces",
            "type": "array"
          }
        },
        "title": "WarehouseServiceCitySplitProvincesOut",
        "type": "object"
      },
      "WarehouseServiceCitySplitProvincesPutIn": {
        "properties": {
          "provinces": {
            "items": {
              "type": "string"
            },
            "title": "Provinces",
            "type": "array"
          }
        },
        "title": "WarehouseServiceCitySplitProvincesPutIn",
        "type": "object"
      },
      "WarehouseServiceProvinceOccupancyOut": {
        "properties": {
          "rows": {
            "items": {
              "$ref": "#/components/schemas/WarehouseServiceProvinceOccupancyRow"
            },
            "title": "Rows",
            "type": "array"
          }
        },
        "title": "WarehouseServiceProvinceOccupancyOut",
        "type": "object"
      },
      "WarehouseServiceProvinceOccupancyRow": {
        "properties": {
          "province_code": {
            "title": "Province Code",
            "type": "string"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "province_code",
          "warehouse_id"
        ],
        "title": "WarehouseServiceProvinceOccupancyRow",
        "type": "object"
      },
      "WarehouseServiceProvincesOut": {
        "properties": {
          "provinces": {
            "items": {
              "type": "string"
            },
            "title": "Provinces",
            "type": "array"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "warehouse_id"
        ],
        "title": "WarehouseServiceProvincesOut",
        "type": "object"
      },
      "WarehouseServiceProvincesPutIn": {
        "properties": {
          "provinces": {
            "items": {
              "type": "string"
            },
            "title": "Provinces",
            "type": "array"
          }
        },
        "title": "WarehouseServiceProvincesPutIn",
        "type": "object"
      },
      "WarehouseShippingProviderBindIn": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "pickup_cutoff_time": {
            "anyOf": [
              {
                "maxLength": 5,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "可选：揽收截止时间（HH:MM），仅作运维字段，不参与算价。",
            "title": "Pickup Cutoff Time"
          },
          "priority": {
            "default": 0,
            "minimum": 0.0,
            "title": "Priority",
            "type": "integer"
          },
          "remark": {
            "anyOf": [
              {
                "maxLength": 255,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remark"
          },
          "shipping_provider_id": {
            "minimum": 1.0,
            "title": "Shipping Provider Id",
            "type": "integer"
          }
        },
        "required": [
          "shipping_provider_id"
        ],
        "title": "WarehouseShippingProviderBindIn",
        "type": "object"
      },
      "WarehouseShippingProviderBindOut": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/WarehouseShippingProviderOut"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "WarehouseShippingProviderBindOut",
        "type": "object"
      },
      "WarehouseShippingProviderBulkUpsertIn": {
        "description": "语义（非常重要）：\n- items 里出现的 provider：服务端执行 upsert（插入或更新）\n- disable_missing=true 时：将该仓库中“未出现在 items 里的绑定”统一置为 active=false\n  （符合“勾选保存”的真实心智；不会删除记录）",
        "properties": {
          "disable_missing": {
            "default": true,
            "description": "是否将未出现在 items 中的绑定统一置为 inactive（不删除记录）",
            "title": "Disable Missing",
            "type": "boolean"
          },
          "items": {
            "items": {
              "$ref": "#/components/schemas/WarehouseShippingProviderUpsertItemIn"
            },
            "title": "Items",
            "type": "array"
          }
        },
        "title": "WarehouseShippingProviderBulkUpsertIn",
        "type": "object"
      },
      "WarehouseShippingProviderBulkUpsertOut": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/WarehouseShippingProviderOut"
            },
            "title": "Data",
            "type": "array"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "WarehouseShippingProviderBulkUpsertOut",
        "type": "object"
      },
      "WarehouseShippingProviderDeleteOut": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "title": "Data",
            "type": "object"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "WarehouseShippingProviderDeleteOut",
        "type": "object"
      },
      "WarehouseShippingProviderListOut": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/WarehouseShippingProviderOut"
            },
            "title": "Data",
            "type": "array"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "WarehouseShippingProviderListOut",
        "type": "object"
      },
      "WarehouseShippingProviderOut": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "pickup_cutoff_time": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pickup Cutoff Time"
          },
          "priority": {
            "default": 0,
            "title": "Priority",
            "type": "integer"
          },
          "provider": {
            "$ref": "#/components/schemas/ShippingProviderLiteOut"
          },
          "remark": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remark"
          },
          "shipping_provider_id": {
            "title": "Shipping Provider Id",
            "type": "integer"
          },
          "warehouse_id": {
            "title": "Warehouse Id",
            "type": "integer"
          }
        },
        "required": [
          "warehouse_id",
          "shipping_provider_id",
          "provider"
        ],
        "title": "WarehouseShippingProviderOut",
        "type": "object"
      },
      "WarehouseShippingProviderUpdateIn": {
        "properties": {
          "active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active"
          },
          "pickup_cutoff_time": {
            "anyOf": [
              {
                "maxLength": 5,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pickup Cutoff Time"
          },
          "priority": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Priority"
          },
          "remark": {
            "anyOf": [
              {
                "maxLength": 255,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remark"
          }
        },
        "title": "WarehouseShippingProviderUpdateIn",
        "type": "object"
      },
      "WarehouseShippingProviderUpdateOut": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/WarehouseShippingProviderOut"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "WarehouseShippingProviderUpdateOut",
        "type": "object"
      },
      "WarehouseShippingProviderUpsertItemIn": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "pickup_cutoff_time": {
            "anyOf": [
              {
                "maxLength": 5,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pickup Cutoff Time"
          },
          "priority": {
            "default": 0,
            "minimum": 0.0,
            "title": "Priority",
            "type": "integer"
          },
          "remark": {
            "anyOf": [
              {
                "maxLength": 255,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remark"
          },
          "shipping_provider_id": {
            "minimum": 1.0,
            "title": "Shipping Provider Id",
            "type": "integer"
          }
        },
        "required": [
          "shipping_provider_id"
        ],
        "title": "WarehouseShippingProviderUpsertItemIn",
        "type": "object"
      },
      "WarehouseUpdateIn": {
        "properties": {
          "active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active"
          },
          "address": {
            "anyOf": [
              {
                "maxLength": 255,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Address"
          },
          "area_sqm": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Area Sqm"
          },
          "code": {
            "anyOf": [
              {
                "maxLength": 64,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "contact_name": {
            "anyOf": [
              {
                "maxLength": 100,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Contact Name"
          },
          "contact_phone": {
            "anyOf": [
              {
                "maxLength": 50,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Contact Phone"
          },
          "name": {
            "anyOf": [
              {
                "maxLength": 100,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          }
        },
        "title": "WarehouseUpdateIn",
        "type": "object"
      },
      "WarehouseUpdateOut": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/WarehouseOut"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          }
        },
        "required": [
          "data"
        ],
        "title": "WarehouseUpdateOut",
        "type": "object"
      },
      "WeightSegmentIn": {
        "properties": {
          "max": {
            "default": "",
            "maxLength": 32,
            "title": "Max",
            "type": "string"
          },
          "min": {
            "maxLength": 32,
            "minLength": 1,
            "title": "Min",
            "type": "string"
          }
        },
        "required": [
          "min"
        ],
        "title": "WeightSegmentIn",
        "type": "object"
      },
      "WorkbenchBatchRowOut": {
        "properties": {
          "batch_code": {
            "title": "Batch Code",
            "type": "string"
          },
          "expiry_date": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expiry Date"
          },
          "production_date": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Production Date"
          },
          "qty_received": {
            "title": "Qty Received",
            "type": "integer"
          }
        },
        "required": [
          "batch_code",
          "qty_received"
        ],
        "title": "WorkbenchBatchRowOut",
        "type": "object"
      },
      "WorkbenchCapsOut": {
        "properties": {
          "can_confirm": {
            "title": "Can Confirm",
            "type": "boolean"
          },
          "can_start_draft": {
            "title": "Can Start Draft",
            "type": "boolean"
          },
          "receipt_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Receipt Id"
          }
        },
        "required": [
          "can_confirm",
          "can_start_draft"
        ],
        "title": "WorkbenchCapsOut",
        "type": "object"
      },
      "WorkbenchExplainOut": {
        "properties": {
          "blocking_errors": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Blocking Errors",
            "type": "array"
          },
          "confirmable": {
            "title": "Confirmable",
            "type": "boolean"
          },
          "normalized_lines_preview": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Normalized Lines Preview",
            "type": "array"
          }
        },
        "required": [
          "confirmable"
        ],
        "title": "WorkbenchExplainOut",
        "type": "object"
      },
      "WorkbenchRowOut": {
        "properties": {
          "all_batches": {
            "items": {
              "$ref": "#/components/schemas/WorkbenchBatchRowOut"
            },
            "title": "All Batches",
            "type": "array"
          },
          "batches": {
            "items": {
              "$ref": "#/components/schemas/WorkbenchBatchRowOut"
            },
            "title": "Batches",
            "type": "array"
          },
          "confirmed_batches": {
            "items": {
              "$ref": "#/components/schemas/WorkbenchBatchRowOut"
            },
            "title": "Confirmed Batches",
            "type": "array"
          },
          "confirmed_received_qty": {
            "description": "已确认实收（base，来自 CONFIRMED receipts 聚合）",
            "title": "Confirmed Received Qty",
            "type": "integer"
          },
          "draft_received_qty": {
            "description": "草稿录入实收（base，来自当前 DRAFT receipt 聚合）",
            "title": "Draft Received Qty",
            "type": "integer"
          },
          "item_id": {
            "title": "Item Id",
            "type": "integer"
          },
          "item_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Name"
          },
          "item_sku": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Sku"
          },
          "line_no": {
            "title": "Line No",
            "type": "integer"
          },
          "ordered_qty": {
            "description": "计划数量（base 口径）",
            "title": "Ordered Qty",
            "type": "integer"
          },
          "po_line_id": {
            "title": "Po Line Id",
            "type": "integer"
          },
          "remaining_qty": {
            "description": "剩余应收（base）",
            "title": "Remaining Qty",
            "type": "integer"
          }
        },
        "required": [
          "po_line_id",
          "line_no",
          "item_id",
          "ordered_qty",
          "confirmed_received_qty",
          "draft_received_qty",
          "remaining_qty"
        ],
        "title": "WorkbenchRowOut",
        "type": "object"
      },
      "ZoneBracketCreateIn": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "base_amount": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Amount"
          },
          "base_kg": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Kg"
          },
          "flat_amount": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Flat Amount"
          },
          "max_kg": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Kg"
          },
          "min_kg": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              }
            ],
            "title": "Min Kg"
          },
          "pricing_mode": {
            "maxLength": 32,
            "minLength": 1,
            "title": "Pricing Mode",
            "type": "string"
          },
          "rate_per_kg": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate Per Kg"
          }
        },
        "required": [
          "min_kg",
          "pricing_mode"
        ],
        "title": "ZoneBracketCreateIn",
        "type": "object"
      },
      "ZoneBracketOut": {
        "properties": {
          "active": {
            "title": "Active",
            "type": "boolean"
          },
          "base_amount": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Amount"
          },
          "base_kg": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Kg"
          },
          "flat_amount": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Flat Amount"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "max_kg": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Kg"
          },
          "min_kg": {
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Min Kg",
            "type": "string"
          },
          "price_json": {
            "additionalProperties": true,
            "title": "Price Json",
            "type": "object"
          },
          "pricing_mode": {
            "title": "Pricing Mode",
            "type": "string"
          },
          "rate_per_kg": {
            "anyOf": [
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate Per Kg"
          },
          "zone_id": {
            "title": "Zone Id",
            "type": "integer"
          }
        },
        "required": [
          "id",
          "zone_id",
          "min_kg",
          "pricing_mode",
          "active"
        ],
        "title": "ZoneBracketOut",
        "type": "object"
      },
      "ZoneBracketUpdateIn": {
        "properties": {
          "active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active"
          },
          "base_amount": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Amount"
          },
          "base_kg": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Kg"
          },
          "flat_amount": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Flat Amount"
          },
          "max_kg": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Kg"
          },
          "min_kg": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Min Kg"
          },
          "pricing_mode": {
            "anyOf": [
              {
                "maxLength": 32,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pricing Mode"
          },
          "rate_per_kg": {
            "anyOf": [
              {
                "minimum": 0.0,
                "type": "number"
              },
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate Per Kg"
          }
        },
        "title": "ZoneBracketUpdateIn",
        "type": "object"
      },
      "ZoneBracketsMatrixGroupOut": {
        "properties": {
          "segment_template_id": {
            "title": "Segment Template Id",
            "type": "integer"
          },
          "segments": {
            "items": {
              "$ref": "#/components/schemas/SegmentRangeOut"
            },
            "title": "Segments",
            "type": "array"
          },
          "template_is_active": {
            "title": "Template Is Active",
            "type": "boolean"
          },
          "template_name": {
            "title": "Template Name",
            "type": "string"
          },
          "template_status": {
            "title": "Template Status",
            "type": "string"
          },
          "zones": {
            "items": {
              "$ref": "#/components/schemas/ZoneOut"
            },
            "title": "Zones",
            "type": "array"
          }
        },
        "required": [
          "segment_template_id",
          "template_name",
          "template_status",
          "template_is_active"
        ],
        "title": "ZoneBracketsMatrixGroupOut",
        "type": "object"
      },
      "ZoneBracketsMatrixOut": {
        "properties": {
          "groups": {
            "items": {
              "$ref": "#/components/schemas/ZoneBracketsMatrixGroupOut"
            },
            "title": "Groups",
            "type": "array"
          },
          "ok": {
            "default": true,
            "title": "Ok",
            "type": "boolean"
          },
          "scheme_id": {
            "title": "Scheme Id",
            "type": "integer"
          },
          "unbound_zones": {
            "items": {
              "$ref": "#/components/schemas/ZoneOut"
            },
            "title": "Unbound Zones",
            "type": "array"
          }
        },
        "required": [
          "scheme_id"
        ],
        "title": "ZoneBracketsMatrixOut",
        "type": "object"
      },
      "ZoneCreateAtomicIn": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "name": {
            "maxLength": 128,
            "minLength": 1,
            "title": "Name",
            "type": "string"
          },
          "provinces": {
            "description": "省份集合（必填，至少 1 个）",
            "items": {
              "type": "string"
            },
            "title": "Provinces",
            "type": "array"
          },
          "segment_template_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Segment Template Id"
          }
        },
        "required": [
          "name"
        ],
        "title": "ZoneCreateAtomicIn",
        "type": "object"
      },
      "ZoneCreateIn": {
        "properties": {
          "active": {
            "default": true,
            "title": "Active",
            "type": "boolean"
          },
          "name": {
            "maxLength": 128,
            "minLength": 1,
            "title": "Name",
            "type": "string"
          },
          "segment_template_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Segment Template Id"
          }
        },
        "required": [
          "name"
        ],
        "title": "ZoneCreateIn",
        "type": "object"
      },
      "ZoneMemberCreateIn": {
        "properties": {
          "level": {
            "maxLength": 16,
            "minLength": 1,
            "title": "Level",
            "type": "string"
          },
          "value": {
            "maxLength": 64,
            "minLength": 1,
            "title": "Value",
            "type": "string"
          }
        },
        "required": [
          "level",
          "value"
        ],
        "title": "ZoneMemberCreateIn",
        "type": "object"
      },
      "ZoneMemberOut": {
        "properties": {
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "level": {
            "title": "Level",
            "type": "string"
          },
          "value": {
            "title": "Value",
            "type": "string"
          },
          "zone_id": {
            "title": "Zone Id",
            "type": "integer"
          }
        },
        "required": [
          "id",
          "zone_id",
          "level",
          "value"
        ],
        "title": "ZoneMemberOut",
        "type": "object"
      },
      "ZoneOut": {
        "properties": {
          "active": {
            "title": "Active",
            "type": "boolean"
          },
          "brackets": {
            "items": {
              "$ref": "#/components/schemas/ZoneBracketOut"
            },
            "title": "Brackets",
            "type": "array"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "members": {
            "items": {
              "$ref": "#/components/schemas/ZoneMemberOut"
            },
            "title": "Members",
            "type": "array"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "scheme_id": {
            "title": "Scheme Id",
            "type": "integer"
          },
          "segment_template_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Segment Template Id"
          }
        },
        "required": [
          "id",
          "scheme_id",
          "name",
          "active"
        ],
        "title": "ZoneOut",
        "type": "object"
      },
      "ZoneProvinceMembersReplaceIn": {
        "properties": {
          "provinces": {
            "description": "省份集合（必填，至少 1 个）",
            "items": {
              "type": "string"
            },
            "title": "Provinces",
            "type": "array"
          }
        },
        "title": "ZoneProvinceMembersReplaceIn",
        "type": "object"
      },
      "ZoneUpdateIn": {
        "properties": {
          "active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active"
          },
          "name": {
            "anyOf": [
              {
                "maxLength": 128,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "segment_template_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Segment Template Id"
          }
        },
        "title": "ZoneUpdateIn",
        "type": "object"
      }
    },
    "securitySchemes": {
      "OAuth2PasswordBearer": {
        "flows": {
          "password": {
            "scopes": {},
            "tokenUrl": "/users/login"
          }
        },
        "type": "oauth2"
      }
    }
  },
  "info": {
    "title": "WMS-DU",
    "version": "1.1.0"
  },
  "openapi": "3.1.0",
  "paths": {
    "/": {
      "get": {
        "operationId": "root__get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "title": "Response Root  Get",
                  "type": "object"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Root"
      }
    },
    "/count": {
      "post": {
        "description": "将 (item_id, location_id, batch_id[由 batch_code 解析]) 的库存 **校正为** 给定 qty（绝对量）。\n\n流程：\n  1) 通过内核规则幂等解析/创建批次，得到 batch_id（与内核粒度一致）；\n  2) 以 (item_id, location_id, batch_id) 精确读取 current qty；\n  3) 计算 delta = qty - current，调用 StockService.adjust(reason=COUNT) 落一条台账\n     （即使 delta==0 也落账，便于审计）。",
        "operationId": "count_inventory_count_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CountRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CountResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Count Inventory",
        "tags": [
          "count"
        ]
      }
    },
    "/debug/trace/{trace_id}": {
      "get": {
        "operationId": "get_trace_debug_trace__trace_id__get",
        "parameters": [
          {
            "description": "trace 唯一标识",
            "in": "path",
            "name": "trace_id",
            "required": true,
            "schema": {
              "description": "trace 唯一标识",
              "title": "Trace Id",
              "type": "string"
            }
          },
          {
            "description": "可选：指定 warehouse_id 后，只保留该仓的事件，以及无仓的全局事件。",
            "in": "query",
            "name": "warehouse_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "description": "可选：指定 warehouse_id 后，只保留该仓的事件，以及无仓的全局事件。",
              "title": "Warehouse Id"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TraceResponseModel"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Trace",
        "tags": [
          "debug-trace"
        ]
      }
    },
    "/dest-adjustments/{dest_adjustment_id}": {
      "delete": {
        "operationId": "delete_dest_adjustment_route_dest_adjustments__dest_adjustment_id__delete",
        "parameters": [
          {
            "in": "path",
            "name": "dest_adjustment_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Dest Adjustment Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Delete Dest Adjustment Route",
        "tags": [
          "shipping-provider-pricing"
        ]
      },
      "patch": {
        "operationId": "patch_dest_adjustment_dest_adjustments__dest_adjustment_id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "dest_adjustment_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Dest Adjustment Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DestAdjustmentUpdateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DestAdjustmentOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Patch Dest Adjustment",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/dev/fake-orders/generate": {
      "post": {
        "operationId": "generate_fake_orders_dev_fake_orders_generate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DevFakeOrdersGenerateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DevFakeOrdersGenerateOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Generate Fake Orders",
        "tags": [
          "devtools",
          "fake-orders"
        ]
      }
    },
    "/dev/fake-orders/run": {
      "post": {
        "operationId": "run_fake_orders_dev_fake_orders_run_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DevFakeOrdersRunIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DevFakeOrdersRunOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Run Fake Orders",
        "tags": [
          "devtools",
          "fake-orders"
        ]
      }
    },
    "/dev/orders": {
      "get": {
        "operationId": "list_orders_summary_dev_orders_get",
        "parameters": [
          {
            "in": "query",
            "name": "platform",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Platform"
            }
          },
          {
            "in": "query",
            "name": "shop_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Shop Id"
            }
          },
          {
            "in": "query",
            "name": "status",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          },
          {
            "in": "query",
            "name": "time_from",
            "required": false,
            "schema": {
              "anyOf": [
                {},
                {
                  "type": "null"
                }
              ],
              "title": "Time From"
            }
          },
          {
            "in": "query",
            "name": "time_to",
            "required": false,
            "schema": {
              "anyOf": [
                {},
                {
                  "type": "null"
                }
              ],
              "title": "Time To"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 100,
              "title": "Limit",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/DevOrderSummary"
                  },
                  "title": "Response List Orders Summary Dev Orders Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "List Orders Summary",
        "tags": [
          "devconsole-orders"
        ]
      }
    },
    "/dev/orders/by-id/{order_id}/reconcile": {
      "get": {
        "operationId": "reconcile_order_by_id_dev_orders_by_id__order_id__reconcile_get",
        "parameters": [
          {
            "in": "path",
            "name": "order_id",
            "required": true,
            "schema": {
              "title": "Order Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DevOrderReconcileResultModel"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Reconcile Order By Id",
        "tags": [
          "devconsole-orders"
        ]
      }
    },
    "/dev/orders/demo": {
      "post": {
        "description": "生成 demo 订单（Phase 5.1 版本）：\n\n- 订单 ingest：给出 province=UT，让其进入 SERVICE_ASSIGNED（只写 service_warehouse_id）\n- ❌ 不再写 orders.warehouse_id（devconsole 禁止后门写入）\n- 库存 seed：仍然可以往某个仓库里落库存（这不是“订单执行仓”）",
        "operationId": "create_demo_order_dev_orders_demo_post",
        "parameters": [
          {
            "in": "query",
            "name": "platform",
            "required": false,
            "schema": {
              "default": "PDD",
              "title": "Platform",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "shop_id",
            "required": false,
            "schema": {
              "default": "1",
              "title": "Shop Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DevDemoOrderOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Create Demo Order",
        "tags": [
          "devconsole-orders"
        ]
      }
    },
    "/dev/orders/reconcile-range": {
      "post": {
        "operationId": "reconcile_orders_range_dev_orders_reconcile_range_post",
        "parameters": [
          {
            "in": "query",
            "name": "time_from",
            "required": true,
            "schema": {
              "format": "date-time",
              "title": "Time From",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "time_to",
            "required": true,
            "schema": {
              "format": "date-time",
              "title": "Time To",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 200,
              "maximum": 1000,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DevReconcileRangeResult"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Reconcile Orders Range",
        "tags": [
          "devconsole-orders"
        ]
      }
    },
    "/dev/orders/{platform}/{shop_id}/{ext_order_no}": {
      "get": {
        "operationId": "get_dev_order_view_dev_orders__platform___shop_id___ext_order_no__get",
        "parameters": [
          {
            "in": "path",
            "name": "platform",
            "required": true,
            "schema": {
              "title": "Platform",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "shop_id",
            "required": true,
            "schema": {
              "title": "Shop Id",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "ext_order_no",
            "required": true,
            "schema": {
              "title": "Ext Order No",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DevOrderView"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Dev Order View",
        "tags": [
          "devconsole-orders"
        ]
      }
    },
    "/dev/orders/{platform}/{shop_id}/{ext_order_no}/ensure-warehouse": {
      "post": {
        "description": "Phase 5.1：devconsole 不允许写 orders.warehouse_id（禁止隐性回填/后门写入）。\n\n✅ 正确做法：\n- 走订单履约 API：/orders/{platform}/{shop_id}/{ext}/fulfillment/manual-assign\n- 或使用离线脚本（仅本地/运维）：scripts/dev_set_order_warehouse.py",
        "operationId": "ensure_order_warehouse_disabled_dev_orders__platform___shop_id___ext_order_no__ensure_warehouse_post",
        "parameters": [
          {
            "in": "path",
            "name": "platform",
            "required": true,
            "schema": {
              "title": "Platform",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "shop_id",
            "required": true,
            "schema": {
              "title": "Shop Id",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "ext_order_no",
            "required": true,
            "schema": {
              "title": "Ext Order No",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DevEnsureWarehouseOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Ensure Order Warehouse Disabled",
        "tags": [
          "devconsole-orders"
        ]
      }
    },
    "/dev/orders/{platform}/{shop_id}/{ext_order_no}/facts": {
      "get": {
        "operationId": "get_dev_order_facts_dev_orders__platform___shop_id___ext_order_no__facts_get",
        "parameters": [
          {
            "in": "path",
            "name": "platform",
            "required": true,
            "schema": {
              "title": "Platform",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "shop_id",
            "required": true,
            "schema": {
              "title": "Shop Id",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "ext_order_no",
            "required": true,
            "schema": {
              "title": "Ext Order No",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DevOrderFacts"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Dev Order Facts",
        "tags": [
          "devconsole-orders"
        ]
      }
    },
    "/dev/seed-ledger-test": {
      "post": {
        "description": "dev 用测试初始化接口：\n\n复用库里已有的 1 个 warehouse + 1 个 item，生成以下三笔台账：\n\n1) 入库：  +10（RECEIPT，batch=B-TEST-LEDGER）\n2) 出库：   -4（SHIPMENT）\n3) 盘点：   调整到 5（ADJUSTMENT/COUNT）\n\n幂等设计：\n- 所有调用都用固定 ref / ref_line / batch_code\n- StockService.adjust + ledger 唯一约束保障幂等\n- 重复调用不会重复扣减，只会返回 idempotent=True。\n\n注意：\n- 这里显式调用 session.commit()，确保写入持久化到 DB。",
        "operationId": "seed_ledger_test_dev_seed_ledger_test_post",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "title": "Response Seed Ledger Test Dev Seed Ledger Test Post",
                  "type": "object"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Seed Ledger Test",
        "tags": [
          "dev-seed"
        ]
      }
    },
    "/diagnostics/lifecycle/batch": {
      "get": {
        "description": "批次生命线（仍然按 wh + item + batch_code 维度走，和订单生命周期不同维度）。",
        "operationId": "batch_lifeline_diagnostics_lifecycle_batch_get",
        "parameters": [
          {
            "in": "query",
            "name": "warehouse_id",
            "required": true,
            "schema": {
              "title": "Warehouse Id",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "item_id",
            "required": true,
            "schema": {
              "title": "Item Id",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "batch_code",
            "required": true,
            "schema": {
              "title": "Batch Code",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Batch Lifeline",
        "tags": [
          "lifecycle"
        ]
      }
    },
    "/diagnostics/lifecycle/order-v2": {
      "get": {
        "description": "v2：基于 trace_id 的订单生命周期视图（官方推荐 / 唯一路线）。\n\n- 由 TraceService 聚合 event_store / audit_events / stock_ledger / orders / outbound_v2 等事件；\n- 再由 OrderLifecycleV2Service 按阶段推断：\n    created / outbound / shipped / returned / delivered（以当前实现为准）\n- 同时给出整体 health + issues 诊断。",
        "operationId": "order_lifecycle_v2_diagnostics_lifecycle_order_v2_get",
        "parameters": [
          {
            "description": "订单关联的 trace_id（统一生命周期视图只认 trace_id）",
            "in": "query",
            "name": "trace_id",
            "required": true,
            "schema": {
              "description": "订单关联的 trace_id（统一生命周期视图只认 trace_id）",
              "title": "Trace Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Order Lifecycle V2",
        "tags": [
          "lifecycle"
        ]
      }
    },
    "/fake-platform/events": {
      "get": {
        "operationId": "list_platform_events_fake_platform_events_get",
        "parameters": [
          {
            "description": "平台标识（可选）",
            "in": "query",
            "name": "platform",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "平台标识（可选）",
              "title": "Platform"
            }
          },
          {
            "description": "店铺 ID（可选）",
            "in": "query",
            "name": "shop_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "店铺 ID（可选）",
              "title": "Shop Id"
            }
          },
          {
            "description": "事件类型，如 ORDER_STATUS",
            "in": "query",
            "name": "event_type",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "事件类型，如 ORDER_STATUS",
              "title": "Event Type"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 50,
              "maximum": 200,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlatformEventListOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "查看最近的 platform_events（调试 Fake Platform 用）",
        "tags": [
          "fake-platform"
        ]
      }
    },
    "/fake-platform/order-status": {
      "post": {
        "operationId": "fake_order_status_fake_platform_order_status_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FakeOrderStatusIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FakeOrderStatusOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "写入一条 ORDER_STATUS 平台事件（用于本地模拟平台状态）",
        "tags": [
          "fake-platform"
        ]
      }
    },
    "/finance/order-unit": {
      "get": {
        "description": "客单价 & 贡献度分析：\n\n- 每一条记录 = 一笔订单（order_value = pay_amount 或 order_amount）\n- summary：订单数 / 总收入 / 平均客单价 / 中位客单价\n- contribution_curve：前 20%/40%/60%/80%/100% 订单贡献的收入占比\n- top_orders：按金额从大到小列出前 N 笔订单",
        "operationId": "finance_order_unit_finance_order_unit_get",
        "parameters": [
          {
            "description": "起始日期（YYYY-MM-DD，含）。默认=今天往前 6 天。",
            "in": "query",
            "name": "from_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "起始日期（YYYY-MM-DD，含）。默认=今天往前 6 天。",
              "title": "From Date"
            }
          },
          {
            "description": "结束日期（YYYY-MM-DD，含）。默认=今天。",
            "in": "query",
            "name": "to_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "结束日期（YYYY-MM-DD，含）。默认=今天。",
              "title": "To Date"
            }
          },
          {
            "description": "按平台过滤，例如 PDD / JD（可选）",
            "in": "query",
            "name": "platform",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "按平台过滤，例如 PDD / JD（可选）",
              "title": "Platform"
            }
          },
          {
            "description": "按店铺 ID 过滤（可选）",
            "in": "query",
            "name": "shop_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "按店铺 ID 过滤（可选）",
              "title": "Shop Id"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "title": "Response Finance Order Unit Finance Order Unit Get",
                  "type": "object"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "客单价 & 贡献度分析（按订单维度）",
        "tags": [
          "finance"
        ]
      }
    },
    "/finance/overview/daily": {
      "get": {
        "description": "财务总览（按日）——运营视角粗估版本（PROD-only）：\n\n✅ 统计口径（封板）：\n- 收入：orders.pay_amount（缺失则退回 order_amount），按 orders.created_at::date 汇总\n- 商品成本：以 purchase_order_lines 的平均单价（总金额 / 总最小单位数）粗算\n         行金额口径：qty_ordered_base * supply_price - discount_amount（line_amount 不落库）\n- 发货成本：shipping_records.cost_estimated，按 shipping_records.created_at::date 汇总",
        "operationId": "finance_overview_daily_finance_overview_daily_get",
        "parameters": [
          {
            "description": "起始日期（YYYY-MM-DD，含）。默认=今天往前 6 天。",
            "in": "query",
            "name": "from_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "起始日期（YYYY-MM-DD，含）。默认=今天往前 6 天。",
              "title": "From Date"
            }
          },
          {
            "description": "结束日期（YYYY-MM-DD，含）。默认=今天。",
            "in": "query",
            "name": "to_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "结束日期（YYYY-MM-DD，含）。默认=今天。",
              "title": "To Date"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/FinanceDailyRow"
                  },
                  "title": "Response Finance Overview Daily Finance Overview Daily Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "按日汇总的收入 / 成本 / 毛利趋势（运营视角粗粒度）",
        "tags": [
          "finance"
        ]
      }
    },
    "/finance/shop": {
      "get": {
        "description": "店铺盈利能力（粗粒度）（PROD-only）：\n\n- 商品成本：基于 purchase_order_lines 推导的 avg_unit_cost × order_items.qty\n  行金额口径：qty_ordered_base*supply_price - discount_amount（line_amount 不落库）",
        "operationId": "finance_by_shop_finance_shop_get",
        "parameters": [
          {
            "description": "起始日期（YYYY-MM-DD，含）。默认=今天往前 6 天。",
            "in": "query",
            "name": "from_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "起始日期（YYYY-MM-DD，含）。默认=今天往前 6 天。",
              "title": "From Date"
            }
          },
          {
            "description": "结束日期（YYYY-MM-DD，含）。默认=今天。",
            "in": "query",
            "name": "to_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "结束日期（YYYY-MM-DD，含）。默认=今天。",
              "title": "To Date"
            }
          },
          {
            "description": "按平台过滤，例如 PDD / JD（可选）",
            "in": "query",
            "name": "platform",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "按平台过滤，例如 PDD / JD（可选）",
              "title": "Platform"
            }
          },
          {
            "description": "按店铺 ID 过滤（可选）",
            "in": "query",
            "name": "shop_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "按店铺 ID 过滤（可选）",
              "title": "Shop Id"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/FinanceShopRow"
                  },
                  "title": "Response Finance By Shop Finance Shop Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "按店铺聚合的收入 / 成本 / 毛利（运营视角粗粒度）",
        "tags": [
          "finance"
        ]
      }
    },
    "/finance/sku": {
      "get": {
        "description": "SKU 毛利榜（粗粒度版本）：\n\n- 商品成本：avg_unit_cost(item_id) × SUM(order_items.qty)\n  avg_unit_cost = total_amount / total_units\n  total_amount = SUM(qty_ordered_base*supply_price - discount_amount)\n  total_units  = SUM(qty_ordered_base)",
        "operationId": "finance_by_sku_finance_sku_get",
        "parameters": [
          {
            "description": "起始日期（YYYY-MM-DD，含）。默认=今天往前 6 天。",
            "in": "query",
            "name": "from_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "起始日期（YYYY-MM-DD，含）。默认=今天往前 6 天。",
              "title": "From Date"
            }
          },
          {
            "description": "结束日期（YYYY-MM-DD，含）。默认=今天。",
            "in": "query",
            "name": "to_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "结束日期（YYYY-MM-DD，含）。默认=今天。",
              "title": "To Date"
            }
          },
          {
            "description": "按平台过滤，例如 PDD / JD（可选）",
            "in": "query",
            "name": "platform",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "按平台过滤，例如 PDD / JD（可选）",
              "title": "Platform"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/FinanceSkuRow"
                  },
                  "title": "Response Finance By Sku Finance Sku Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "SKU 毛利榜（不含运费，基于平均进货价）",
        "tags": [
          "finance"
        ]
      }
    },
    "/fskus": {
      "get": {
        "operationId": "list__fskus_get",
        "parameters": [
          {
            "description": "按 name/code 模糊搜索",
            "in": "query",
            "name": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "按 name/code 模糊搜索",
              "title": "Query"
            }
          },
          {
            "description": "draft/published/retired",
            "in": "query",
            "name": "status",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "draft/published/retired",
              "title": "Status"
            }
          },
          {
            "description": "店铺上下文：PROD 店铺将过滤测试 FSKU；TEST 店铺不过滤",
            "in": "query",
            "name": "store_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "minimum": 1,
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "description": "店铺上下文：PROD 店铺将过滤测试 FSKU；TEST 店铺不过滤",
              "title": "Store Id"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 50,
              "maximum": 200,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "offset",
            "required": false,
            "schema": {
              "default": 0,
              "minimum": 0,
              "title": "Offset",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FskuListOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "List ",
        "tags": [
          "ops - shop-product-bundles",
          "ops - shop-product-bundles"
        ]
      },
      "post": {
        "operationId": "create_fskus_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FskuCreateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FskuDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Create",
        "tags": [
          "ops - shop-product-bundles",
          "ops - shop-product-bundles"
        ]
      }
    },
    "/fskus/{fsku_id}": {
      "get": {
        "operationId": "detail_fskus__fsku_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "fsku_id",
            "required": true,
            "schema": {
              "title": "Fsku Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FskuDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Detail",
        "tags": [
          "ops - shop-product-bundles",
          "ops - shop-product-bundles"
        ]
      },
      "patch": {
        "operationId": "patch_fsku_fskus__fsku_id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "fsku_id",
            "required": true,
            "schema": {
              "title": "Fsku Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FskuNameUpdateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FskuDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Patch Fsku",
        "tags": [
          "ops - shop-product-bundles",
          "ops - shop-product-bundles"
        ]
      }
    },
    "/fskus/{fsku_id}/components": {
      "get": {
        "operationId": "components_fskus__fsku_id__components_get",
        "parameters": [
          {
            "in": "path",
            "name": "fsku_id",
            "required": true,
            "schema": {
              "title": "Fsku Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FskuDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Components",
        "tags": [
          "ops - shop-product-bundles",
          "ops - shop-product-bundles"
        ]
      },
      "post": {
        "operationId": "replace_components_fskus__fsku_id__components_post",
        "parameters": [
          {
            "in": "path",
            "name": "fsku_id",
            "required": true,
            "schema": {
              "title": "Fsku Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FskuComponentsReplaceIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FskuDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Replace Components",
        "tags": [
          "ops - shop-product-bundles",
          "ops - shop-product-bundles"
        ]
      }
    },
    "/fskus/{fsku_id}/publish": {
      "post": {
        "operationId": "publish_fskus__fsku_id__publish_post",
        "parameters": [
          {
            "in": "path",
            "name": "fsku_id",
            "required": true,
            "schema": {
              "title": "Fsku Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FskuDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Publish",
        "tags": [
          "ops - shop-product-bundles",
          "ops - shop-product-bundles"
        ]
      }
    },
    "/fskus/{fsku_id}/retire": {
      "post": {
        "operationId": "retire_fskus__fsku_id__retire_post",
        "parameters": [
          {
            "in": "path",
            "name": "fsku_id",
            "required": true,
            "schema": {
              "title": "Fsku Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FskuDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Retire",
        "tags": [
          "ops - shop-product-bundles",
          "ops - shop-product-bundles"
        ]
      }
    },
    "/fskus/{fsku_id}/unretire": {
      "post": {
        "description": "⚠️ 兼容保留：取消归档（不支持）\n- 系统封板：FSKU 生命周期单向（draft → published → retired）\n- 发布事实不可逆，因此该接口将始终返回 409（state_conflict）",
        "operationId": "unretire_fskus__fsku_id__unretire_post",
        "parameters": [
          {
            "in": "path",
            "name": "fsku_id",
            "required": true,
            "schema": {
              "title": "Fsku Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FskuDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Unretire",
        "tags": [
          "ops - shop-product-bundles",
          "ops - shop-product-bundles"
        ]
      }
    },
    "/geo/provinces": {
      "get": {
        "operationId": "geo_list_provinces_geo_provinces_get",
        "parameters": [
          {
            "in": "query",
            "name": "q",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Q"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/GeoItemOut"
                  },
                  "title": "Response Geo List Provinces Geo Provinces Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Geo List Provinces",
        "tags": [
          "geo"
        ]
      }
    },
    "/geo/provinces/{province_code}/cities": {
      "get": {
        "operationId": "geo_list_cities_geo_provinces__province_code__cities_get",
        "parameters": [
          {
            "in": "path",
            "name": "province_code",
            "required": true,
            "schema": {
              "title": "Province Code",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "q",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Q"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/GeoItemOut"
                  },
                  "title": "Response Geo List Cities Geo Provinces  Province Code  Cities Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Geo List Cities",
        "tags": [
          "geo"
        ]
      }
    },
    "/healthz": {
      "get": {
        "operationId": "healthz_healthz_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "title": "Response Healthz Healthz Get",
                  "type": "object"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Healthz"
      }
    },
    "/inbound-receipts/": {
      "get": {
        "operationId": "list_inbound_receipts_inbound_receipts__get",
        "parameters": [
          {
            "in": "query",
            "name": "ref",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Ref"
            }
          },
          {
            "in": "query",
            "name": "trace_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Trace Id"
            }
          },
          {
            "in": "query",
            "name": "warehouse_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Id"
            }
          },
          {
            "description": "PO / ORDER / OTHER",
            "in": "query",
            "name": "source_type",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "PO / ORDER / OTHER",
              "title": "Source Type"
            }
          },
          {
            "in": "query",
            "name": "source_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Source Id"
            }
          },
          {
            "description": "occurred_at >= time_from",
            "in": "query",
            "name": "time_from",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "format": "date-time",
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "occurred_at >= time_from",
              "title": "Time From"
            }
          },
          {
            "description": "occurred_at <= time_to",
            "in": "query",
            "name": "time_to",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "format": "date-time",
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "occurred_at <= time_to",
              "title": "Time To"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 50,
              "maximum": 200,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "offset",
            "required": false,
            "schema": {
              "default": 0,
              "minimum": 0,
              "title": "Offset",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/InboundReceiptOut"
                  },
                  "title": "Response List Inbound Receipts Inbound Receipts  Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "List Inbound Receipts",
        "tags": [
          "inbound-receipts"
        ]
      },
      "post": {
        "description": "Phase5：Receipt 创建入口（DRAFT）\n- 当前仅支持 PO：创建/复用最新 DRAFT receipt\n- ✅ 只写 Receipt(DRAFT) 事实\n- ❌ 不写库存（库存只能由 /confirm 触发）\n\n重要：返回前必须确保 lines 已加载，避免 async 环境下触发 relationship lazyload -> MissingGreenlet",
        "operationId": "create_inbound_receipt_inbound_receipts__post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InboundReceiptCreateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InboundReceiptOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Create Inbound Receipt",
        "tags": [
          "inbound-receipts"
        ]
      }
    },
    "/inbound-receipts/{receipt_id}": {
      "get": {
        "operationId": "get_inbound_receipt_inbound_receipts__receipt_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "receipt_id",
            "required": true,
            "schema": {
              "title": "Receipt Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InboundReceiptOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Inbound Receipt",
        "tags": [
          "inbound-receipts"
        ]
      }
    },
    "/inbound-receipts/{receipt_id}/confirm": {
      "post": {
        "description": "Phase5：Receipt confirm（唯一库存写入口）\n- 必须 commit：CONFIRMED 是事实固化；库存流水是结果固化",
        "operationId": "confirm_inbound_receipt_inbound_receipts__receipt_id__confirm_post",
        "parameters": [
          {
            "in": "path",
            "name": "receipt_id",
            "required": true,
            "schema": {
              "title": "Receipt Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InboundReceiptConfirmOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Confirm Inbound Receipt",
        "tags": [
          "inbound-receipts"
        ]
      }
    },
    "/inbound-receipts/{receipt_id}/explain": {
      "get": {
        "description": "Preflight explain（确认前预检）：\n- 只读 Receipt 事实层（InboundReceipt / InboundReceiptLine）\n- 不写库",
        "operationId": "explain_inbound_receipt_inbound_receipts__receipt_id__explain_get",
        "parameters": [
          {
            "in": "path",
            "name": "receipt_id",
            "required": true,
            "schema": {
              "title": "Receipt Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InboundReceiptExplainOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Explain Inbound Receipt",
        "tags": [
          "inbound-receipts"
        ]
      }
    },
    "/internal-outbound/docs": {
      "get": {
        "description": "列出内部出库单（简单列表）：\n\n- 可按 status / warehouse_id 过滤；\n- 默认按 id 倒序。",
        "operationId": "list_internal_outbound_docs_internal_outbound_docs_get",
        "parameters": [
          {
            "in": "query",
            "name": "skip",
            "required": false,
            "schema": {
              "default": 0,
              "minimum": 0,
              "title": "Skip",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 50,
              "maximum": 200,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "status",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          },
          {
            "in": "query",
            "name": "warehouse_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Id"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/InternalOutboundDocOut"
                  },
                  "title": "Response List Internal Outbound Docs Internal Outbound Docs Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "List Internal Outbound Docs",
        "tags": [
          "internal-outbound"
        ]
      },
      "post": {
        "description": "创建内部出库单（只建头，不带行）：\n\n- 必须指定 warehouse_id / doc_type / recipient_name；\n- 初始状态为 DRAFT。",
        "operationId": "create_internal_outbound_doc_internal_outbound_docs_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InternalOutboundCreateDocIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalOutboundDocOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Create Internal Outbound Doc",
        "tags": [
          "internal-outbound"
        ]
      }
    },
    "/internal-outbound/docs/{doc_id}": {
      "get": {
        "description": "获取内部出库单详情（头 + 行）。",
        "operationId": "get_internal_outbound_doc_internal_outbound_docs__doc_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "doc_id",
            "required": true,
            "schema": {
              "title": "Doc Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalOutboundDocOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Internal Outbound Doc",
        "tags": [
          "internal-outbound"
        ]
      }
    },
    "/internal-outbound/docs/{doc_id}/cancel": {
      "post": {
        "description": "取消内部出库单：\n\n- 仅 DRAFT 状态可取消；\n- 不回滚库存（因为还没扣库存），只改状态 + 写审计事件。",
        "operationId": "cancel_internal_outbound_doc_internal_outbound_docs__doc_id__cancel_post",
        "parameters": [
          {
            "in": "path",
            "name": "doc_id",
            "required": true,
            "schema": {
              "title": "Doc Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalOutboundDocOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Cancel Internal Outbound Doc",
        "tags": [
          "internal-outbound"
        ]
      }
    },
    "/internal-outbound/docs/{doc_id}/confirm": {
      "post": {
        "description": "确认内部出库：\n\n- 仅 DRAFT 状态可确认；\n- 必须已经填写 recipient_name；\n- 按行扣库存（指定批次或 FEFO），写入 ledger + audit。",
        "operationId": "confirm_internal_outbound_doc_internal_outbound_docs__doc_id__confirm_post",
        "parameters": [
          {
            "in": "path",
            "name": "doc_id",
            "required": true,
            "schema": {
              "title": "Doc Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InternalOutboundConfirmIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalOutboundDocOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Confirm Internal Outbound Doc",
        "tags": [
          "internal-outbound"
        ]
      }
    },
    "/internal-outbound/docs/{doc_id}/lines": {
      "post": {
        "description": "在内部出库单上新增/累加一行：\n\n- 若存在相同 (item_id, batch_code) 行则累加 requested_qty；\n- 否则新建一行（line_no = 当前最大 + 1）。",
        "operationId": "upsert_internal_outbound_line_internal_outbound_docs__doc_id__lines_post",
        "parameters": [
          {
            "in": "path",
            "name": "doc_id",
            "required": true,
            "schema": {
              "title": "Doc Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InternalOutboundUpsertLineIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalOutboundDocOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Upsert Internal Outbound Line",
        "tags": [
          "internal-outbound"
        ]
      }
    },
    "/inventory/autoheal/execute": {
      "post": {
        "operationId": "autoheal_execute_inventory_autoheal_execute_post",
        "parameters": [
          {
            "in": "query",
            "name": "cut",
            "required": true,
            "schema": {
              "title": "Cut",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "dry_run",
            "required": false,
            "schema": {
              "default": true,
              "title": "Dry Run",
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Autoheal Execute",
        "tags": [
          "inventory_autoheal_execute"
        ]
      }
    },
    "/inventory/flow-graph": {
      "post": {
        "operationId": "inventory_flow_graph_inventory_flow_graph_post",
        "parameters": [
          {
            "in": "query",
            "name": "time_from",
            "required": true,
            "schema": {
              "title": "Time From",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "time_to",
            "required": true,
            "schema": {
              "title": "Time To",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Inventory Flow Graph",
        "tags": [
          "inventory-flow"
        ]
      }
    },
    "/inventory/intelligence/ageing": {
      "get": {
        "description": "批次老化检测：\n- 找出在 within_days 天内即将到期的批次",
        "operationId": "detect_ageing_inventory_intelligence_ageing_get",
        "parameters": [
          {
            "in": "query",
            "name": "within_days",
            "required": false,
            "schema": {
              "default": 30,
              "title": "Within Days",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Detect Ageing",
        "tags": [
          "inventory_intelligence"
        ]
      }
    },
    "/inventory/intelligence/anomaly": {
      "get": {
        "description": "库存异常检测：\n- ledger vs stocks/snapshot 不一致记录",
        "operationId": "detect_anomaly_inventory_intelligence_anomaly_get",
        "parameters": [
          {
            "in": "query",
            "name": "cut",
            "required": true,
            "schema": {
              "title": "Cut",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Detect Anomaly",
        "tags": [
          "inventory_intelligence"
        ]
      }
    },
    "/inventory/intelligence/autoheal": {
      "get": {
        "description": "自动校正建议（不执行）：\n- 基于 ledger_cut 与 stocks 差异给出调整建议列表",
        "operationId": "autoheal_inventory_intelligence_autoheal_get",
        "parameters": [
          {
            "in": "query",
            "name": "cut",
            "required": true,
            "schema": {
              "title": "Cut",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Autoheal",
        "tags": [
          "inventory_intelligence"
        ]
      }
    },
    "/inventory/intelligence/insights": {
      "get": {
        "description": "全局库存洞察：\n- inventory_health_score\n- inventory_accuracy_score\n- snapshot_accuracy_score\n- batch_activity_30days\n- batch_risk_score\n- warehouse_efficiency",
        "operationId": "get_insights_inventory_intelligence_insights_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Get Insights",
        "tags": [
          "inventory_intelligence"
        ]
      }
    },
    "/inventory/intelligence/predict": {
      "get": {
        "description": "简单库存预测：\n- 基于最近 30 天出库趋势，估算未来 days 天库存量",
        "operationId": "predict_inventory_intelligence_predict_get",
        "parameters": [
          {
            "in": "query",
            "name": "warehouse_id",
            "required": true,
            "schema": {
              "title": "Warehouse Id",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "item_id",
            "required": true,
            "schema": {
              "title": "Item Id",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "days",
            "required": false,
            "schema": {
              "default": 7,
              "title": "Days",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Predict",
        "tags": [
          "inventory_intelligence"
        ]
      }
    },
    "/inventory/ledger-replay": {
      "post": {
        "operationId": "ledger_replay_inventory_ledger_replay_post",
        "parameters": [
          {
            "in": "query",
            "name": "time_from",
            "required": true,
            "schema": {
              "title": "Time From",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "time_to",
            "required": true,
            "schema": {
              "title": "Time To",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Ledger Replay",
        "tags": [
          "inventory-flow"
        ]
      }
    },
    "/item-barcodes": {
      "post": {
        "operationId": "create_barcode_item_barcodes_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ItemBarcodeCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ItemBarcodeOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Create Barcode",
        "tags": [
          "item-barcodes"
        ]
      }
    },
    "/item-barcodes/by-items": {
      "get": {
        "operationId": "list_barcodes_for_items_item_barcodes_by_items_get",
        "parameters": [
          {
            "description": "item_id 可重复：item_id=1&item_id=2",
            "in": "query",
            "name": "item_id",
            "required": true,
            "schema": {
              "description": "item_id 可重复：item_id=1&item_id=2",
              "items": {
                "type": "integer"
              },
              "title": "Item Id",
              "type": "array"
            }
          },
          {
            "description": "默认只返回 active=true",
            "in": "query",
            "name": "active_only",
            "required": false,
            "schema": {
              "default": true,
              "description": "默认只返回 active=true",
              "title": "Active Only",
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/ItemBarcodeOut"
                  },
                  "title": "Response List Barcodes For Items Item Barcodes By Items Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "List Barcodes For Items",
        "tags": [
          "item-barcodes"
        ]
      }
    },
    "/item-barcodes/item/{item_id}": {
      "get": {
        "operationId": "list_barcodes_for_item_item_barcodes_item__item_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "item_id",
            "required": true,
            "schema": {
              "title": "Item Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/ItemBarcodeOut"
                  },
                  "title": "Response List Barcodes For Item Item Barcodes Item  Item Id  Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "List Barcodes For Item",
        "tags": [
          "item-barcodes"
        ]
      }
    },
    "/item-barcodes/{id}": {
      "delete": {
        "operationId": "delete_barcode_item_barcodes__id__delete",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "title": "Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Delete Barcode",
        "tags": [
          "item-barcodes"
        ]
      },
      "patch": {
        "operationId": "update_barcode_item_barcodes__id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "title": "Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ItemBarcodeUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ItemBarcodeOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Update Barcode",
        "tags": [
          "item-barcodes"
        ]
      }
    },
    "/item-barcodes/{id}/primary": {
      "post": {
        "operationId": "set_primary_compat_item_barcodes__id__primary_post",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "title": "Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Set Primary Compat",
        "tags": [
          "item-barcodes"
        ]
      }
    },
    "/item-barcodes/{id}/set-primary": {
      "post": {
        "operationId": "set_primary_item_barcodes__id__set_primary_post",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "title": "Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ItemBarcodeOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Set Primary",
        "tags": [
          "item-barcodes"
        ]
      }
    },
    "/items": {
      "get": {
        "operationId": "get_all_items_items_get",
        "parameters": [
          {
            "description": "按供应商过滤（采购单创建/收货用）",
            "in": "query",
            "name": "supplier_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "minimum": 1,
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "description": "按供应商过滤（采购单创建/收货用）",
              "title": "Supplier Id"
            }
          },
          {
            "description": "按启用状态过滤（enabled=true 只取启用商品）",
            "in": "query",
            "name": "enabled",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "按启用状态过滤（enabled=true 只取启用商品）",
              "title": "Enabled"
            }
          },
          {
            "description": "关键词搜索（命中 sku/name/primary_barcode/id；大小写不敏感）",
            "in": "query",
            "name": "q",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "关键词搜索（命中 sku/name/primary_barcode/id；大小写不敏感）",
              "title": "Q"
            }
          },
          {
            "description": "限制返回条数（默认 50，最大 200）",
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "maximum": 200,
                  "minimum": 1,
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "description": "限制返回条数（默认 50，最大 200）",
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/ItemOut"
                  },
                  "title": "Response Get All Items Items Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get All Items",
        "tags": [
          "items"
        ]
      },
      "post": {
        "operationId": "create_item_items_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ItemCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ItemOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Create Item",
        "tags": [
          "items"
        ]
      }
    },
    "/items/sku/next": {
      "post": {
        "description": "返回下一个 SKU：\n- AKT-000001...\n- 并发安全\n- 不创建 item",
        "operationId": "next_sku_items_sku_next_post",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NextSkuOut"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Next Sku",
        "tags": [
          "items"
        ]
      }
    },
    "/items/sku/{sku}": {
      "get": {
        "operationId": "get_item_by_sku_items_sku__sku__get",
        "parameters": [
          {
            "in": "path",
            "name": "sku",
            "required": true,
            "schema": {
              "title": "Sku",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ItemOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Item By Sku",
        "tags": [
          "items"
        ]
      }
    },
    "/items/{id}": {
      "get": {
        "operationId": "get_item_by_id_items__id__get",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "title": "Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ItemOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Item By Id",
        "tags": [
          "items"
        ]
      },
      "patch": {
        "operationId": "update_item_items__id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "title": "Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ItemUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ItemOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Update Item",
        "tags": [
          "items"
        ]
      }
    },
    "/items/{id}/test:disable": {
      "post": {
        "operationId": "disable_test_item_items__id__test_disable_post",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "title": "Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ItemOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Disable Test Item",
        "tags": [
          "items"
        ]
      }
    },
    "/items/{id}/test:enable": {
      "post": {
        "operationId": "enable_test_item_items__id__test_enable_post",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "title": "Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ItemOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Enable Test Item",
        "tags": [
          "items"
        ]
      }
    },
    "/merchant-code-bindings": {
      "get": {
        "operationId": "list_merchant_code_bindings_merchant_code_bindings_get",
        "parameters": [
          {
            "in": "query",
            "name": "platform",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "maxLength": 32,
                  "minLength": 1,
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Platform"
            }
          },
          {
            "in": "query",
            "name": "shop_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "maxLength": 64,
                  "minLength": 1,
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Shop Id"
            }
          },
          {
            "in": "query",
            "name": "merchant_code",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "maxLength": 128,
                  "minLength": 1,
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Merchant Code"
            }
          },
          {
            "in": "query",
            "name": "current_only",
            "required": false,
            "schema": {
              "default": true,
              "title": "Current Only",
              "type": "boolean"
            }
          },
          {
            "in": "query",
            "name": "fsku_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "minimum": 1,
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Fsku Id"
            }
          },
          {
            "in": "query",
            "name": "fsku_code",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "maxLength": 64,
                  "minLength": 1,
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Fsku Code"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 50,
              "maximum": 200,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "offset",
            "required": false,
            "schema": {
              "default": 0,
              "minimum": 0,
              "title": "Offset",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MerchantCodeBindingListOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "列表：merchant_code ↔ published FSKU 绑定（一码一对一，分页 + 过滤）",
        "tags": [
          "merchant-code-bindings"
        ]
      }
    },
    "/merchant-code-bindings/bind": {
      "post": {
        "operationId": "bind_merchant_code_merchant_code_bindings_bind_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MerchantCodeBindingBindIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MerchantCodeBindingOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "人工绑定/覆盖：platform+shop_id+merchant_code → published FSKU（一码一对一）",
        "tags": [
          "merchant-code-bindings"
        ]
      }
    },
    "/merchant-code-bindings/close": {
      "post": {
        "operationId": "close_merchant_code_binding_merchant_code_bindings_close_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MerchantCodeBindingCloseIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MerchantCodeBindingOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "解绑：删除绑定（一码一对一）",
        "tags": [
          "merchant-code-bindings"
        ]
      }
    },
    "/meta/platforms": {
      "get": {
        "description": "平台枚举（事实源：stores distinct）。\n- 前端只消费，不维护隐式常量\n- 输出统一大写\n- 当前不做 enabled/disabled 配置开关，默认 enabled=true",
        "operationId": "list_platforms_meta_platforms_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MetaPlatformsOut"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "List Platforms",
        "tags": [
          "meta"
        ]
      }
    },
    "/metrics/alerts/today": {
      "get": {
        "description": "可报警面板（Phase 4.3）：\n- OUTBOUND：基于 SHIP_CONFIRM_REJECT 的 error_code（需要 platform）\n- SHIPPING_QUOTE：基于 QUOTE_*_REJECT 的 error_code",
        "operationId": "get_alerts_today_metrics_alerts_today_get",
        "parameters": [
          {
            "description": "平台标识，如 PDD / TB / JD；不传则只返回报价域告警",
            "in": "query",
            "name": "platform",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "平台标识，如 PDD / TB / JD；不传则只返回报价域告警",
              "title": "Platform"
            }
          },
          {
            "description": "UTC 日期 (YYYY-MM-DD)，默认今天",
            "in": "query",
            "name": "day",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "format": "date",
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "UTC 日期 (YYYY-MM-DD)，默认今天",
              "title": "Day"
            }
          },
          {
            "description": "测试模式：降低阈值，便于验收告警结构",
            "in": "query",
            "name": "test_mode",
            "required": false,
            "schema": {
              "default": false,
              "description": "测试模式：降低阈值，便于验收告警结构",
              "title": "Test Mode",
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AlertsResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Alerts Today",
        "tags": [
          "metrics"
        ]
      }
    },
    "/metrics/fefo-risk": {
      "get": {
        "description": "FEFO 风险面板：近期临期批次 + FEFO 命中率 + 风险评分。",
        "operationId": "get_fefo_risk_metrics_metrics_fefo_risk_get",
        "parameters": [
          {
            "description": "回看 FEFO 命中率的天数（默认 7 天）",
            "in": "query",
            "name": "days",
            "required": false,
            "schema": {
              "default": 7,
              "description": "回看 FEFO 命中率的天数（默认 7 天）",
              "maximum": 60,
              "minimum": 1,
              "title": "Days",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FefoRiskMetricsResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Fefo Risk Metrics",
        "tags": [
          "metrics"
        ]
      }
    },
    "/metrics/outbound/by-day/{day}": {
      "get": {
        "description": "单平台指定日期出库指标大盘（v2 结构）",
        "operationId": "get_outbound_metrics_by_day_metrics_outbound_by_day__day__get",
        "parameters": [
          {
            "description": "UTC 日期 (YYYY-MM-DD)",
            "in": "path",
            "name": "day",
            "required": true,
            "schema": {
              "description": "UTC 日期 (YYYY-MM-DD)",
              "format": "date",
              "title": "Day",
              "type": "string"
            }
          },
          {
            "description": "平台标识，如 PDD / TB / JD",
            "in": "query",
            "name": "platform",
            "required": true,
            "schema": {
              "description": "平台标识，如 PDD / TB / JD",
              "title": "Platform",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutboundMetricsV2"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Outbound Metrics By Day",
        "tags": [
          "metrics"
        ]
      }
    },
    "/metrics/outbound/by-shop": {
      "get": {
        "description": "按店铺拆分出库表现。",
        "operationId": "get_outbound_metrics_by_shop_metrics_outbound_by_shop_get",
        "parameters": [
          {
            "description": "日期 (YYYY-MM-DD, UTC)",
            "in": "query",
            "name": "day",
            "required": true,
            "schema": {
              "description": "日期 (YYYY-MM-DD, UTC)",
              "format": "date",
              "title": "Day",
              "type": "string"
            }
          },
          {
            "description": "平台标识，如 PDD / TB / JD",
            "in": "query",
            "name": "platform",
            "required": true,
            "schema": {
              "description": "平台标识，如 PDD / TB / JD",
              "title": "Platform",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutboundShopMetricsResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Outbound Metrics By Shop",
        "tags": [
          "metrics"
        ]
      }
    },
    "/metrics/outbound/by-warehouse": {
      "get": {
        "description": "按仓库拆分出库表现。",
        "operationId": "get_outbound_metrics_by_warehouse_metrics_outbound_by_warehouse_get",
        "parameters": [
          {
            "description": "日期 (YYYY-MM-DD, UTC)",
            "in": "query",
            "name": "day",
            "required": true,
            "schema": {
              "description": "日期 (YYYY-MM-DD, UTC)",
              "format": "date",
              "title": "Day",
              "type": "string"
            }
          },
          {
            "description": "平台标识，如 PDD / TB / JD",
            "in": "query",
            "name": "platform",
            "required": true,
            "schema": {
              "description": "平台标识，如 PDD / TB / JD",
              "title": "Platform",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutboundWarehouseMetricsResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Outbound Metrics By Warehouse",
        "tags": [
          "metrics"
        ]
      }
    },
    "/metrics/outbound/failures": {
      "get": {
        "description": "出库失败统计：routing/pick/ship/inventory 等失败点汇总 + 明细。",
        "operationId": "get_outbound_failures_metrics_outbound_failures_get",
        "parameters": [
          {
            "description": "日期 (YYYY-MM-DD, UTC)",
            "in": "query",
            "name": "day",
            "required": true,
            "schema": {
              "description": "日期 (YYYY-MM-DD, UTC)",
              "format": "date",
              "title": "Day",
              "type": "string"
            }
          },
          {
            "description": "平台标识，如 PDD / TB / JD",
            "in": "query",
            "name": "platform",
            "required": true,
            "schema": {
              "description": "平台标识，如 PDD / TB / JD",
              "title": "Platform",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutboundFailuresMetricsResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Outbound Failures",
        "tags": [
          "metrics"
        ]
      }
    },
    "/metrics/outbound/range": {
      "get": {
        "description": "最近 N 天出库趋势（按天汇总成功率 / FEFO 命中率 / fallback 比例）。",
        "operationId": "get_outbound_metrics_range_metrics_outbound_range_get",
        "parameters": [
          {
            "description": "平台标识，如 PDD / TB / JD",
            "in": "query",
            "name": "platform",
            "required": true,
            "schema": {
              "description": "平台标识，如 PDD / TB / JD",
              "title": "Platform",
              "type": "string"
            }
          },
          {
            "description": "向前追溯的天数（默认 7 天）",
            "in": "query",
            "name": "days",
            "required": false,
            "schema": {
              "default": 7,
              "description": "向前追溯的天数（默认 7 天）",
              "maximum": 60,
              "minimum": 1,
              "title": "Days",
              "type": "integer"
            }
          },
          {
            "description": "结束日期（默认今天，UTC）",
            "in": "query",
            "name": "end_day",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "format": "date",
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "结束日期（默认今天，UTC）",
              "title": "End Day"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutboundRangeMetricsResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Outbound Metrics Range",
        "tags": [
          "metrics"
        ]
      }
    },
    "/metrics/outbound/today": {
      "get": {
        "description": "单平台今日出库指标大盘（v2 结构）",
        "operationId": "get_outbound_metrics_today_metrics_outbound_today_get",
        "parameters": [
          {
            "description": "平台标识，如 PDD / TB / JD",
            "in": "query",
            "name": "platform",
            "required": true,
            "schema": {
              "description": "平台标识，如 PDD / TB / JD",
              "title": "Platform",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutboundMetricsV2"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Outbound Metrics Today",
        "tags": [
          "metrics"
        ]
      }
    },
    "/metrics/shipping-quote/failures": {
      "get": {
        "description": "Shipping Quote 失败统计：calc/recommend 的 reject 按 error_code 聚合 + 明细。",
        "operationId": "get_shipping_quote_failures_metrics_shipping_quote_failures_get",
        "parameters": [
          {
            "description": "日期 (YYYY-MM-DD, UTC)",
            "in": "query",
            "name": "day",
            "required": true,
            "schema": {
              "description": "日期 (YYYY-MM-DD, UTC)",
              "format": "date",
              "title": "Day",
              "type": "string"
            }
          },
          {
            "description": "返回明细条数上限（默认 200）",
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 200,
              "description": "返回明细条数上限（默认 200）",
              "maximum": 2000,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingQuoteFailuresMetricsResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Shipping Quote Failures",
        "tags": [
          "metrics"
        ]
      }
    },
    "/oauth/{platform}/callback": {
      "get": {
        "operationId": "oauth_callback_oauth__platform__callback_get",
        "parameters": [
          {
            "in": "path",
            "name": "platform",
            "required": true,
            "schema": {
              "title": "Platform",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "code",
            "required": true,
            "schema": {
              "title": "Code",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "state",
            "required": true,
            "schema": {
              "title": "State",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "text/html": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Oauth Callback"
      }
    },
    "/oauth/{platform}/start": {
      "get": {
        "operationId": "oauth_start_oauth__platform__start_get",
        "parameters": [
          {
            "in": "path",
            "name": "platform",
            "required": true,
            "schema": {
              "title": "Platform",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "shop_id",
            "required": true,
            "schema": {
              "title": "Shop Id",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "redirect_uri",
            "required": true,
            "schema": {
              "title": "Redirect Uri",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OAuthStartOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Oauth Start"
      }
    },
    "/ops/pricing-integrity/active-schemes": {
      "get": {
        "operationId": "list_active_schemes_ops_pricing_integrity_active_schemes_get",
        "parameters": [
          {
            "in": "query",
            "name": "include_archived",
            "required": false,
            "schema": {
              "default": false,
              "title": "Include Archived",
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OpsActiveSchemesOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "List Active Schemes",
        "tags": [
          "ops - pricing-integrity"
        ]
      }
    },
    "/ops/pricing-integrity/cleanup/shell-schemes": {
      "post": {
        "operationId": "cleanup_shell_schemes_ops_pricing_integrity_cleanup_shell_schemes_post",
        "parameters": [
          {
            "in": "query",
            "name": "dry_run",
            "required": false,
            "schema": {
              "default": true,
              "title": "Dry Run",
              "type": "boolean"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 500,
              "maximum": 5000,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "include_surcharge_only",
            "required": false,
            "schema": {
              "default": false,
              "title": "Include Surcharge Only",
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CleanupShellSchemesOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Cleanup Shell Schemes",
        "tags": [
          "ops - pricing-integrity"
        ]
      }
    },
    "/ops/pricing-integrity/fix/archive-release-provinces": {
      "post": {
        "operationId": "ops_fix_archive_release_provinces_ops_pricing_integrity_fix_archive_release_provinces_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PricingIntegrityFixArchiveReleaseIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PricingIntegrityFixArchiveReleaseOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Ops Fix Archive Release Provinces",
        "tags": [
          "ops - pricing-integrity"
        ]
      }
    },
    "/ops/pricing-integrity/fix/detach-zone-brackets": {
      "post": {
        "operationId": "ops_fix_detach_zone_brackets_ops_pricing_integrity_fix_detach_zone_brackets_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PricingIntegrityFixDetachZoneBracketsIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PricingIntegrityFixDetachZoneBracketsOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Ops Fix Detach Zone Brackets",
        "tags": [
          "ops - pricing-integrity"
        ]
      }
    },
    "/ops/pricing-integrity/fix/unbind-archived-templates": {
      "post": {
        "operationId": "ops_fix_unbind_archived_templates_ops_pricing_integrity_fix_unbind_archived_templates_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PricingIntegrityFixUnbindArchivedTemplatesIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PricingIntegrityFixUnbindArchivedTemplatesOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Ops Fix Unbind Archived Templates",
        "tags": [
          "ops - pricing-integrity"
        ]
      }
    },
    "/ops/pricing-integrity/schemes/{scheme_id}": {
      "get": {
        "operationId": "ops_pricing_integrity_report_ops_pricing_integrity_schemes__scheme_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PricingIntegrityReportOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Ops Pricing Integrity Report",
        "tags": [
          "ops - pricing-integrity"
        ]
      }
    },
    "/ops/pricing-integrity/schemes/{scheme_id}/fix/archive-release-all-provinces": {
      "post": {
        "operationId": "ops_fix_archive_release_all_provinces_ops_pricing_integrity_schemes__scheme_id__fix_archive_release_all_provinces_post",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "dry_run",
            "required": false,
            "schema": {
              "default": false,
              "title": "Dry Run",
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PricingIntegrityFixArchiveReleaseOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Ops Fix Archive Release All Provinces",
        "tags": [
          "ops - pricing-integrity"
        ]
      }
    },
    "/ops/pricing-integrity/schemes/{scheme_id}/fix/detach-brackets-all": {
      "post": {
        "operationId": "ops_fix_detach_brackets_all_ops_pricing_integrity_schemes__scheme_id__fix_detach_brackets_all_post",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "dry_run",
            "required": false,
            "schema": {
              "default": false,
              "title": "Dry Run",
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PricingIntegrityFixDetachZoneBracketsOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Ops Fix Detach Brackets All",
        "tags": [
          "ops - pricing-integrity"
        ]
      }
    },
    "/ops/pricing-integrity/schemes/{scheme_id}/fix/unbind-archived-templates-all": {
      "post": {
        "operationId": "ops_fix_unbind_archived_templates_all_ops_pricing_integrity_schemes__scheme_id__fix_unbind_archived_templates_all_post",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "dry_run",
            "required": false,
            "schema": {
              "default": false,
              "title": "Dry Run",
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PricingIntegrityFixUnbindArchivedTemplatesOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Ops Fix Unbind Archived Templates All",
        "tags": [
          "ops - pricing-integrity"
        ]
      }
    },
    "/orders": {
      "post": {
        "operationId": "create_order_orders_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OrderCreateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderCreateOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Create Order",
        "tags": [
          "orders"
        ]
      }
    },
    "/orders/raw": {
      "post": {
        "operationId": "create_order_raw_orders_raw_post",
        "parameters": [
          {
            "description": "平台标识（任意非空字符串）",
            "in": "query",
            "name": "platform",
            "required": true,
            "schema": {
              "description": "平台标识（任意非空字符串）",
              "title": "Platform",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "shop_id",
            "required": true,
            "schema": {
              "title": "Shop Id",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "additionalProperties": true,
                "description": "平台原始订单 JSON；多余字段将被忽略",
                "title": "Payload",
                "type": "object"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderCreateOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Create Order Raw",
        "tags": [
          "orders"
        ]
      }
    },
    "/orders/stats/daily": {
      "get": {
        "description": "单日订单统计：\n\n- orders_created  : 当天创建订单数\n- orders_shipped  : 当天发货订单数（ledger ref=ORD:*，delta<0 的 distinct ref）\n- orders_returned : 当天有退货入库的订单数（source_type=ORDER 的收货任务）",
        "operationId": "get_orders_daily_stats_orders_stats_daily_get",
        "parameters": [
          {
            "description": "统计日期（默认为今天，UTC 自然日）",
            "in": "query",
            "name": "date",
            "required": false,
            "schema": {
              "description": "统计日期（默认为今天，UTC 自然日）",
              "format": "date",
              "title": "Date",
              "type": "string"
            }
          },
          {
            "description": "可选平台过滤（如 PDD）",
            "in": "query",
            "name": "platform",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "可选平台过滤（如 PDD）",
              "title": "Platform"
            }
          },
          {
            "description": "可选店铺过滤（字符串，与 orders.shop_id 一致）",
            "in": "query",
            "name": "shop_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "可选店铺过滤（字符串，与 orders.shop_id 一致）",
              "title": "Shop Id"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrdersDailyStatsModel"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Orders Daily Stats",
        "tags": [
          "orders-stats"
        ]
      }
    },
    "/orders/stats/last7": {
      "get": {
        "description": "近 7 天订单趋势：\n\n- 每天：orders_created / orders_shipped / orders_returned / return_rate\n- 日期按升序排列（最早在前）",
        "operationId": "get_orders_last7_stats_orders_stats_last7_get",
        "parameters": [
          {
            "description": "可选平台过滤（如 PDD）",
            "in": "query",
            "name": "platform",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "可选平台过滤（如 PDD）",
              "title": "Platform"
            }
          },
          {
            "description": "可选店铺过滤",
            "in": "query",
            "name": "shop_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "可选店铺过滤",
              "title": "Shop Id"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrdersTrendResponseModel"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Orders Last7 Stats",
        "tags": [
          "orders-stats"
        ]
      }
    },
    "/orders/stats/sla": {
      "get": {
        "description": "订单发货 SLA 统计：\n\n- 以 orders.created_at 为下单时间；\n- 以 outbound_commits_v2.created_at 为发货时间（state=COMPLETED）；\n- 两表通过 trace_id 关联。\n\n只统计在给定时间窗口内发货的订单（按 outbound_commits_v2.created_at 过滤）。\n\n✅ PROD-only（简化口径）：\n- 排除测试店铺（platform_test_shops.code='DEFAULT'，以 store_id 为事实锚点）",
        "operationId": "get_orders_sla_stats_orders_stats_sla_get",
        "parameters": [
          {
            "description": "起始时间（含），用于过滤发货时间 outbound_commits_v2.created_at",
            "in": "query",
            "name": "time_from",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "format": "date-time",
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "起始时间（含），用于过滤发货时间 outbound_commits_v2.created_at",
              "title": "Time From"
            }
          },
          {
            "description": "结束时间（含），用于过滤发货时间 outbound_commits_v2.created_at",
            "in": "query",
            "name": "time_to",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "format": "date-time",
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "结束时间（含），用于过滤发货时间 outbound_commits_v2.created_at",
              "title": "Time To"
            }
          },
          {
            "description": "可选平台过滤（如 PDD），大写/小写均可",
            "in": "query",
            "name": "platform",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "可选平台过滤（如 PDD），大写/小写均可",
              "title": "Platform"
            }
          },
          {
            "description": "可选店铺过滤（字符串，与 orders.shop_id 一致）",
            "in": "query",
            "name": "shop_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "可选店铺过滤（字符串，与 orders.shop_id 一致）",
              "title": "Shop Id"
            }
          },
          {
            "description": "SLA 阈值（小时），用于判断是否准时发货，默认 24 小时",
            "in": "query",
            "name": "sla_hours",
            "required": false,
            "schema": {
              "default": 24.0,
              "description": "SLA 阈值（小时），用于判断是否准时发货，默认 24 小时",
              "minimum": 0.0,
              "title": "Sla Hours",
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrdersSlaStatsModel"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Orders Sla Stats",
        "tags": [
          "orders-sla"
        ]
      }
    },
    "/orders/summary": {
      "get": {
        "operationId": "orders_summary_orders_summary_get",
        "parameters": [
          {
            "in": "query",
            "name": "platform",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Platform"
            }
          },
          {
            "in": "query",
            "name": "shop_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Shop Id"
            }
          },
          {
            "in": "query",
            "name": "status",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          },
          {
            "in": "query",
            "name": "fulfillment_status",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Fulfillment Status"
            }
          },
          {
            "in": "query",
            "name": "time_from",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "format": "date-time",
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Time From"
            }
          },
          {
            "in": "query",
            "name": "time_to",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "format": "date-time",
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Time To"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 100,
              "title": "Limit",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrdersSummaryResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Orders Summary",
        "tags": [
          "orders"
        ]
      }
    },
    "/orders/{order_id}/fulfillment-debug": {
      "get": {
        "operationId": "get_fulfillment_debug_orders__order_id__fulfillment_debug_get",
        "parameters": [
          {
            "in": "path",
            "name": "order_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Order Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FulfillmentDebugOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Fulfillment Debug",
        "tags": [
          "orders"
        ]
      }
    },
    "/orders/{order_id}/warehouse-availability": {
      "get": {
        "operationId": "order_warehouse_availability_orders__order_id__warehouse_availability_get",
        "parameters": [
          {
            "in": "path",
            "name": "order_id",
            "required": true,
            "schema": {
              "title": "Order Id",
              "type": "integer"
            }
          },
          {
            "description": "逗号分隔的 warehouse_id 列表",
            "in": "query",
            "name": "warehouse_ids",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "逗号分隔的 warehouse_id 列表",
              "title": "Warehouse Ids"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderWarehouseAvailabilityResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Order Warehouse Availability",
        "tags": [
          "orders"
        ]
      }
    },
    "/orders/{platform}/{shop_id}/{ext_order_no}/facts": {
      "get": {
        "deprecated": true,
        "operationId": "order_facts_orders__platform___shop_id___ext_order_no__facts_get",
        "parameters": [
          {
            "in": "path",
            "name": "platform",
            "required": true,
            "schema": {
              "title": "Platform",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "shop_id",
            "required": true,
            "schema": {
              "title": "Shop Id",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "ext_order_no",
            "required": true,
            "schema": {
              "title": "Ext Order No",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderFactsResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Order Facts",
        "tags": [
          "orders"
        ]
      }
    },
    "/orders/{platform}/{shop_id}/{ext_order_no}/fulfillment/manual-assign": {
      "post": {
        "description": "Phase 5.1：人工指定执行仓（执行期唯一合法写入路径）\n\n✅ 新世界观（一步到位迁移后）：\n- 实际出库仓写入 order_fulfillment.actual_warehouse_id（执行仓事实）\n- planned/service 归属仓仍由 routing 写入 order_fulfillment.planned_warehouse_id\n- 写 fulfillment_status=MANUALLY_ASSIGNED\n- 写审计事件：MANUAL_WAREHOUSE_ASSIGNED\n\n❌ 禁止回潮：\n- 不允许写 orders.warehouse_id（该列迁移后将被删除/不再承载事实）",
        "operationId": "fulfillment_manual_assign_orders__platform___shop_id___ext_order_no__fulfillment_manual_assign_post",
        "parameters": [
          {
            "in": "path",
            "name": "platform",
            "required": true,
            "schema": {
              "title": "Platform",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "shop_id",
            "required": true,
            "schema": {
              "title": "Shop Id",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "ext_order_no",
            "required": true,
            "schema": {
              "title": "Ext Order No",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ManualAssignRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ManualAssignResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Fulfillment Manual Assign",
        "tags": [
          "orders-fulfillment-v2"
        ]
      }
    },
    "/orders/{platform}/{shop_id}/{ext_order_no}/fulfillment/override": {
      "post": {
        "operationId": "fulfillment_override_alias_orders__platform___shop_id___ext_order_no__fulfillment_override_post",
        "parameters": [
          {
            "in": "path",
            "name": "platform",
            "required": true,
            "schema": {
              "title": "Platform",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "shop_id",
            "required": true,
            "schema": {
              "title": "Shop Id",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "ext_order_no",
            "required": true,
            "schema": {
              "title": "Ext Order No",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ManualAssignRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ManualAssignResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Fulfillment Override Alias",
        "tags": [
          "orders-fulfillment-v2"
        ]
      }
    },
    "/orders/{platform}/{shop_id}/{ext_order_no}/pick": {
      "post": {
        "operationId": "order_pick_orders__platform___shop_id___ext_order_no__pick_post",
        "parameters": [
          {
            "in": "path",
            "name": "platform",
            "required": true,
            "schema": {
              "title": "Platform",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "shop_id",
            "required": true,
            "schema": {
              "title": "Shop Id",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "ext_order_no",
            "required": true,
            "schema": {
              "title": "Ext Order No",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PickRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/PickResponse"
                  },
                  "title": "Response Order Pick Orders  Platform   Shop Id   Ext Order No  Pick Post",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Order Pick",
        "tags": [
          "orders-fulfillment-v2"
        ]
      }
    },
    "/orders/{platform}/{shop_id}/{ext_order_no}/ship": {
      "post": {
        "operationId": "order_ship_orders__platform___shop_id___ext_order_no__ship_post",
        "parameters": [
          {
            "in": "path",
            "name": "platform",
            "required": true,
            "schema": {
              "title": "Platform",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "shop_id",
            "required": true,
            "schema": {
              "title": "Shop Id",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "ext_order_no",
            "required": true,
            "schema": {
              "title": "Ext Order No",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ShipRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShipResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Order Ship",
        "tags": [
          "orders-fulfillment-v2"
        ]
      }
    },
    "/orders/{platform}/{shop_id}/{ext_order_no}/ship-with-waybill": {
      "post": {
        "operationId": "order_ship_with_waybill_orders__platform___shop_id___ext_order_no__ship_with_waybill_post",
        "parameters": [
          {
            "in": "path",
            "name": "platform",
            "required": true,
            "schema": {
              "title": "Platform",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "shop_id",
            "required": true,
            "schema": {
              "title": "Shop Id",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "ext_order_no",
            "required": true,
            "schema": {
              "title": "Ext Order No",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ShipWithWaybillRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShipWithWaybillResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Order Ship With Waybill",
        "tags": [
          "orders-fulfillment-v2"
        ]
      }
    },
    "/orders/{platform}/{shop_id}/{ext_order_no}/view": {
      "get": {
        "operationId": "order_view_orders__platform___shop_id___ext_order_no__view_get",
        "parameters": [
          {
            "in": "path",
            "name": "platform",
            "required": true,
            "schema": {
              "title": "Platform",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "shop_id",
            "required": true,
            "schema": {
              "title": "Shop Id",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "ext_order_no",
            "required": true,
            "schema": {
              "title": "Ext Order No",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderViewResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Order View",
        "tags": [
          "orders"
        ]
      }
    },
    "/outbound/ops": {
      "get": {
        "description": "旧版出库操作（legacy）占位路由。\n\n说明：\n- 早期版本依赖旧的出库规划器与若干历史接口；\n- 当前 v3 出库链路已经统一到 OutboundService + pick/ship；\n- 为避免 ImportError & 破坏现有启动流程，这里保留一个空壳路由，\n  一旦被访问，明确返回 410（Gone），提示调用方迁移到新接口。",
        "operationId": "outbound_ops_legacy_stub_outbound_ops_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Outbound Ops Legacy Stub",
        "tags": [
          "outbound-ops"
        ]
      },
      "post": {
        "description": "旧版出库操作（legacy）占位路由。\n\n说明：\n- 早期版本依赖旧的出库规划器与若干历史接口；\n- 当前 v3 出库链路已经统一到 OutboundService + pick/ship；\n- 为避免 ImportError & 破坏现有启动流程，这里保留一个空壳路由，\n  一旦被访问，明确返回 410（Gone），提示调用方迁移到新接口。",
        "operationId": "outbound_ops_legacy_stub_outbound_ops_post",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Outbound Ops Legacy Stub",
        "tags": [
          "outbound-ops"
        ]
      }
    },
    "/outbound/ops/{path}": {
      "get": {
        "description": "旧版出库操作（legacy）占位路由。\n\n说明：\n- 早期版本依赖旧的出库规划器与若干历史接口；\n- 当前 v3 出库链路已经统一到 OutboundService + pick/ship；\n- 为避免 ImportError & 破坏现有启动流程，这里保留一个空壳路由，\n  一旦被访问，明确返回 410（Gone），提示调用方迁移到新接口。",
        "operationId": "outbound_ops_legacy_stub_outbound_ops__path__get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Outbound Ops Legacy Stub",
        "tags": [
          "outbound-ops"
        ]
      },
      "post": {
        "description": "旧版出库操作（legacy）占位路由。\n\n说明：\n- 早期版本依赖旧的出库规划器与若干历史接口；\n- 当前 v3 出库链路已经统一到 OutboundService + pick/ship；\n- 为避免 ImportError & 破坏现有启动流程，这里保留一个空壳路由，\n  一旦被访问，明确返回 410（Gone），提示调用方迁移到新接口。",
        "operationId": "outbound_ops_legacy_stub_outbound_ops__path__post",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Outbound Ops Legacy Stub",
        "tags": [
          "outbound-ops"
        ]
      }
    },
    "/outbound/ship/commit": {
      "post": {
        "description": "出库入口（统一版，真正扣库存）：\n\n- 每次调用都会生成一个 trace_id，用于串联订单 / 预占 / 出库 / ledger；\n- 实际库存扣减与台账写入统一走 OutboundService → StockService.adjust；\n- 幂等：以 (platform, shop_id, ref) 组成的 order_id 作为业务键，\n  OutboundService 会通过 stock_ledger 中已有 delta 判断“已扣数量”，\n  只扣“剩余需要扣”的部分；若 total_qty=0，则视为完全幂等。",
        "operationId": "outbound_ship_commit_outbound_ship_commit_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OutboundShipIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutboundShipOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Outbound Ship Commit",
        "tags": [
          "outbound"
        ]
      }
    },
    "/pdd/auth/url": {
      "get": {
        "description": "前端调用这个接口，拿到 PDD 授权 URL，然后 window.location.href 跳过去。",
        "operationId": "get_pdd_auth_url_pdd_auth_url_get",
        "parameters": [
          {
            "description": "内部 stores.id",
            "in": "query",
            "name": "store_id",
            "required": true,
            "schema": {
              "description": "内部 stores.id",
              "title": "Store Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Pdd Auth Url",
        "tags": [
          "pdd-auth"
        ]
      }
    },
    "/pdd/oauth/callback": {
      "get": {
        "description": "被拼多多回调的入口：?code=xxx&state=yyy\n\n正常场景下，处理完后你可以给一个简单 HTML 提示“授权成功，可以关闭窗口”。",
        "operationId": "pdd_oauth_callback_pdd_oauth_callback_get",
        "parameters": [
          {
            "in": "query",
            "name": "code",
            "required": true,
            "schema": {
              "title": "Code",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "state",
            "required": true,
            "schema": {
              "title": "State",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "text/html": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Pdd Oauth Callback",
        "tags": [
          "pdd-auth"
        ]
      }
    },
    "/permissions": {
      "get": {
        "description": "获取全部权限列表。\n\n需要权限: system.permission.manage",
        "operationId": "get_all_permissions_permissions_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/PermissionOut"
                  },
                  "title": "Response Get All Permissions Permissions Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Get All Permissions",
        "tags": [
          "permissions"
        ]
      },
      "post": {
        "description": "创建权限。\n\n需要权限: system.permission.manage",
        "operationId": "create_permission_permissions_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PermissionCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PermissionOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Create Permission",
        "tags": [
          "permissions"
        ]
      }
    },
    "/permissions/{permission_id}": {
      "get": {
        "description": "按 ID 获取权限详情。\n\n需要权限: system.permission.manage",
        "operationId": "get_permission_by_id_permissions__permission_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "permission_id",
            "required": true,
            "schema": {
              "title": "Permission Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PermissionOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Get Permission By Id",
        "tags": [
          "permissions"
        ]
      }
    },
    "/pick": {
      "post": {
        "description": "拣货动作：调用 PickService.record_pick 立即扣减库存（原子 + 幂等）。\n\n当前版本暂不直接更新 pick_task_lines / remain，仅返回本次拣货结果；\n后续可在此基础上增加任务维度的 picked/remain 统计。",
        "operationId": "pick_commit_pick_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PickIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PickOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Pick Commit",
        "tags": [
          "pick"
        ]
      }
    },
    "/pick-tasks": {
      "get": {
        "operationId": "list_pick_tasks_pick_tasks_get",
        "parameters": [
          {
            "in": "query",
            "name": "warehouse_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Id"
            }
          },
          {
            "in": "query",
            "name": "status",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 50,
              "title": "Limit",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/PickTaskOut"
                  },
                  "title": "Response List Pick Tasks Pick Tasks Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "List Pick Tasks",
        "tags": [
          "pick-tasks"
        ]
      }
    },
    "/pick-tasks/ensure-from-order/{order_id}": {
      "post": {
        "description": "自动化入口：已废弃 / 禁用\n- 不再自动解析仓库\n- 不再自动创建任务\n- 不再自动打印",
        "operationId": "ensure_pick_task_from_order_disabled_pick_tasks_ensure_from_order__order_id__post",
        "parameters": [
          {
            "in": "path",
            "name": "order_id",
            "required": true,
            "schema": {
              "title": "Order Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PickTaskCreateFromOrder"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Ensure Pick Task From Order Disabled",
        "tags": [
          "pick-tasks"
        ]
      }
    },
    "/pick-tasks/from-order/{order_id}": {
      "post": {
        "deprecated": true,
        "description": "兼容入口（deprecated）：\n- 允许不传 warehouse_id（Phase 2：后端解析执行仓）\n- ❌ 不自动化、不自动打印",
        "operationId": "create_pick_task_from_order_compat_pick_tasks_from_order__order_id__post",
        "parameters": [
          {
            "in": "path",
            "name": "order_id",
            "required": true,
            "schema": {
              "title": "Order Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PickTaskCreateFromOrder"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Create Pick Task From Order Compat",
        "tags": [
          "pick-tasks"
        ]
      }
    },
    "/pick-tasks/manual-from-order/{order_id}": {
      "post": {
        "description": "手工入口（推荐）：\n- 必须显式 warehouse_id\n- 只创建 pick_task + lines\n- ❌ 不自动 enqueue 打印",
        "operationId": "manual_create_pick_task_from_order_pick_tasks_manual_from_order__order_id__post",
        "parameters": [
          {
            "in": "path",
            "name": "order_id",
            "required": true,
            "schema": {
              "title": "Order Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PickTaskCreateFromOrder"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Manual Create Pick Task From Order",
        "tags": [
          "pick-tasks"
        ]
      }
    },
    "/pick-tasks/{task_id}": {
      "get": {
        "operationId": "get_pick_task_pick_tasks__task_id__get",
        "parameters": [
          {
            "description": "拣货任务 ID",
            "in": "path",
            "name": "task_id",
            "required": true,
            "schema": {
              "description": "拣货任务 ID",
              "title": "Task Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Pick Task",
        "tags": [
          "pick-tasks"
        ]
      }
    },
    "/pick-tasks/{task_id}/commit": {
      "post": {
        "operationId": "commit_pick_task_pick_tasks__task_id__commit_post",
        "parameters": [
          {
            "in": "path",
            "name": "task_id",
            "required": true,
            "schema": {
              "title": "Task Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PickTaskCommitIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskCommitResult"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Commit Pick Task",
        "tags": [
          "pick-tasks"
        ]
      }
    },
    "/pick-tasks/{task_id}/commit-check": {
      "get": {
        "operationId": "get_pick_task_commit_check_pick_tasks__task_id__commit_check_get",
        "parameters": [
          {
            "description": "拣货任务 ID",
            "in": "path",
            "name": "task_id",
            "required": true,
            "schema": {
              "description": "拣货任务 ID",
              "title": "Task Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskCommitCheckOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Pick Task Commit Check",
        "tags": [
          "pick-tasks"
        ]
      }
    },
    "/pick-tasks/{task_id}/diff": {
      "get": {
        "operationId": "get_pick_task_diff_pick_tasks__task_id__diff_get",
        "parameters": [
          {
            "in": "path",
            "name": "task_id",
            "required": true,
            "schema": {
              "title": "Task Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskDiffSummaryOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Pick Task Diff",
        "tags": [
          "pick-tasks"
        ]
      }
    },
    "/pick-tasks/{task_id}/print-pick-list": {
      "post": {
        "description": "手工触发打印（显式动作）：\n- 幂等 enqueue pick_list print_job\n- 不做任何自动解析（order_id 必须由调用方显式提供）",
        "operationId": "print_pick_list_pick_tasks__task_id__print_pick_list_post",
        "parameters": [
          {
            "in": "path",
            "name": "task_id",
            "required": true,
            "schema": {
              "title": "Task Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PickTaskPrintPickListIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Print Pick List",
        "tags": [
          "pick-tasks"
        ]
      }
    },
    "/pick-tasks/{task_id}/scan": {
      "post": {
        "operationId": "record_scan_for_pick_task_pick_tasks__task_id__scan_post",
        "parameters": [
          {
            "in": "path",
            "name": "task_id",
            "required": true,
            "schema": {
              "title": "Task Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PickTaskScanIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Record Scan For Pick Task",
        "tags": [
          "pick-tasks"
        ]
      }
    },
    "/ping": {
      "get": {
        "operationId": "ping_ping_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "title": "Response Ping Ping Get",
                  "type": "object"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Ping"
      }
    },
    "/platform-orders/confirm-and-create": {
      "post": {
        "operationId": "confirm_and_create_platform_order_platform_orders_confirm_and_create_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PlatformOrderConfirmCreateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlatformOrderConfirmCreateOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "当单执行：人工确认选货后生成内部订单（不写任何映射；人工决策写入证据表）",
        "tags": [
          "platform-orders",
          "platform-orders"
        ]
      }
    },
    "/platform-orders/ingest": {
      "post": {
        "operationId": "ingest_platform_order_platform_orders_ingest_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PlatformOrderIngestIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlatformOrderIngestOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "平台订单接入（Phase N+2）：填写码 → FSKU → Items → /orders",
        "tags": [
          "platform-orders"
        ]
      }
    },
    "/platform-orders/manual-decisions/bind-merchant-code": {
      "post": {
        "operationId": "manual_bind_merchant_code_platform_orders_manual_decisions_bind_merchant_code_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ManualBindMerchantCodeIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "title": "Response Manual Bind Merchant Code Platform Orders Manual Decisions Bind Merchant Code Post",
                  "type": "object"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "人工救火：将 filled_code 绑定/覆盖到 published FSKU（一码一对一）",
        "tags": [
          "platform-orders",
          "platform-orders"
        ]
      }
    },
    "/platform-orders/manual-decisions/latest": {
      "get": {
        "operationId": "list_latest_manual_decisions_platform_orders_manual_decisions_latest_get",
        "parameters": [
          {
            "description": "平台（如 DEMO/PDD/TB），大小写不敏感",
            "in": "query",
            "name": "platform",
            "required": true,
            "schema": {
              "description": "平台（如 DEMO/PDD/TB），大小写不敏感",
              "title": "Platform",
              "type": "string"
            }
          },
          {
            "description": "内部店铺 store_id（stores.id）",
            "in": "query",
            "name": "store_id",
            "required": true,
            "schema": {
              "description": "内部店铺 store_id（stores.id）",
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 20,
              "maximum": 200,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "offset",
            "required": false,
            "schema": {
              "default": 0,
              "minimum": 0,
              "title": "Offset",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ManualDecisionOrdersOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "读取最近的人工救火批次（platform_order_manual_decisions），用于治理证据回流（不写绑定）",
        "tags": [
          "platform-orders",
          "platform-orders"
        ]
      }
    },
    "/platform-orders/replay": {
      "post": {
        "operationId": "replay_platform_order_platform_orders_replay_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PlatformOrderReplayIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlatformOrderReplayOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "平台订单事实重放解码：从 platform_order_lines 读取事实，复用 resolver + /orders ingest 主线幂等生成订单",
        "tags": [
          "platform-orders",
          "platform-orders"
        ]
      }
    },
    "/platform-shops/credentials": {
      "post": {
        "description": "手工录入平台店铺 access_token（不走 OAuth，快速调试用）。\n\n行为调整版（相比旧实现）：\n- 不再写 legacy 的 platform_shops 表；\n- 统一写入 store_tokens 表，和 OAuth token 走同一套模型；\n- refresh_token 固定为 \"MANUAL\"，方便区分来源。",
        "operationId": "upsert_credentials_platform_shops_credentials_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PlatformShopCredentialsIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SimpleOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Upsert Credentials"
      }
    },
    "/platform-shops/{platform}/{shop_id}": {
      "get": {
        "description": "查询平台店铺当前状态（来自 store_tokens 表）。\n\n- 如果存在 OAuth / 手工 token → 返回 token 信息；\n- 如果不存在 → 返回 NOT_FOUND。",
        "operationId": "get_platform_shop_status_platform_shops__platform___shop_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "platform",
            "required": true,
            "schema": {
              "title": "Platform",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "shop_id",
            "required": true,
            "schema": {
              "title": "Shop Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SimpleOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Platform Shop Status"
      }
    },
    "/pricing-schemes/{scheme_id}": {
      "get": {
        "operationId": "shipping_provider_pricing_schemes_detail_pricing_schemes__scheme_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SchemeDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Shipping Provider Pricing Schemes Detail",
        "tags": [
          "shipping-provider-pricing"
        ]
      },
      "patch": {
        "operationId": "update_scheme_pricing_schemes__scheme_id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SchemeUpdateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SchemeDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Update Scheme",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/pricing-schemes/{scheme_id}/__debug_echo": {
      "get": {
        "operationId": "shipping_provider_pricing_schemes_debug_echo_pricing_schemes__scheme_id____debug_echo_get",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SchemeDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Shipping Provider Pricing Schemes Debug Echo",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/pricing-schemes/{scheme_id}/activate-exclusive": {
      "post": {
        "description": "✅ 原子“独占启用”接口：\n- 启用本 scheme\n- 同 provider 其它 scheme 自动停用",
        "operationId": "activate_scheme_exclusive_pricing_schemes__scheme_id__activate_exclusive_post",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SchemeDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Activate Scheme Exclusive",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/pricing-schemes/{scheme_id}/dest-adjustments": {
      "get": {
        "operationId": "list_dest_adjustments_pricing_schemes__scheme_id__dest_adjustments_get",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/DestAdjustmentOut"
                  },
                  "title": "Response List Dest Adjustments Pricing Schemes  Scheme Id  Dest Adjustments Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "List Dest Adjustments",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/pricing-schemes/{scheme_id}/dest-adjustments:upsert": {
      "post": {
        "description": "✅ 新主入口（事实写入点，严格 code 世界）：\n- 输入：scope + province_code(+city_code) + amount + active + priority\n- 行为：同 key 则更新，否则创建（幂等）\n- 互斥：同省 province vs city active 互斥（service 层硬约束）",
        "operationId": "upsert_dest_adjustments_pricing_schemes__scheme_id__dest_adjustments_upsert_post",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DestAdjustmentUpsertIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DestAdjustmentOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Upsert Dest Adjustments",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/pricing-schemes/{scheme_id}/segment-templates": {
      "get": {
        "operationId": "list_templates_pricing_schemes__scheme_id__segment_templates_get",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SegmentTemplateListOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "List Templates",
        "tags": [
          "shipping-provider-pricing"
        ]
      },
      "post": {
        "operationId": "create_template_pricing_schemes__scheme_id__segment_templates_post",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SegmentTemplateCreateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SegmentTemplateDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Create Template",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/pricing-schemes/{scheme_id}/segments/{segment_id}": {
      "patch": {
        "operationId": "patch_scheme_segment_active_pricing_schemes__scheme_id__segments__segment_id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          },
          {
            "in": "path",
            "name": "segment_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Segment Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SchemeSegmentActivePatchIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SchemeDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Patch Scheme Segment Active",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/pricing-schemes/{scheme_id}/surcharges": {
      "post": {
        "operationId": "create_surcharge_pricing_schemes__scheme_id__surcharges_post",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SurchargeCreateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SurchargeOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Create Surcharge",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/pricing-schemes/{scheme_id}/surcharges:upsert": {
      "post": {
        "description": "✅ 新主入口（事实写入点）：\n- 输入：scope + province(+city) + amount\n- 行为：同 key 则更新，否则创建（幂等）\n- 护栏：同省 province vs city 互斥（active 时）",
        "operationId": "upsert_surcharge_pricing_schemes__scheme_id__surcharges_upsert_post",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SurchargeUpsertIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SurchargeOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Upsert Surcharge",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/pricing-schemes/{scheme_id}/warehouses": {
      "get": {
        "operationId": "get_scheme_warehouses_pricing_schemes__scheme_id__warehouses_get",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SchemeWarehousesGetOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Get Scheme Warehouses",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/pricing-schemes/{scheme_id}/warehouses/bind": {
      "post": {
        "operationId": "bind_scheme_warehouse_pricing_schemes__scheme_id__warehouses_bind_post",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SchemeWarehouseBindIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SchemeWarehouseBindOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Bind Scheme Warehouse",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/pricing-schemes/{scheme_id}/warehouses/{warehouse_id}": {
      "delete": {
        "operationId": "delete_scheme_warehouse_pricing_schemes__scheme_id__warehouses__warehouse_id__delete",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          },
          {
            "in": "path",
            "name": "warehouse_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Warehouse Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SchemeWarehouseDeleteOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Delete Scheme Warehouse",
        "tags": [
          "shipping-provider-pricing"
        ]
      },
      "patch": {
        "operationId": "patch_scheme_warehouse_pricing_schemes__scheme_id__warehouses__warehouse_id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          },
          {
            "in": "path",
            "name": "warehouse_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Warehouse Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SchemeWarehousePatchIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SchemeWarehousePatchOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Patch Scheme Warehouse",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/pricing-schemes/{scheme_id}/zone-brackets-matrix": {
      "get": {
        "operationId": "shipping_provider_pricing_schemes_zone_brackets_matrix_pricing_schemes__scheme_id__zone_brackets_matrix_get",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ZoneBracketsMatrixOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Shipping Provider Pricing Schemes Zone Brackets Matrix",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/pricing-schemes/{scheme_id}/zones": {
      "post": {
        "operationId": "create_zone_pricing_schemes__scheme_id__zones_post",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ZoneCreateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ZoneOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Create Zone",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/pricing-schemes/{scheme_id}/zones-atomic": {
      "post": {
        "operationId": "create_zone_atomic_pricing_schemes__scheme_id__zones_atomic_post",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ZoneCreateAtomicIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ZoneOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Create Zone Atomic",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/pricing-schemes/{scheme_id}:set-default-segment-template": {
      "post": {
        "operationId": "set_default_segment_template_pricing_schemes__scheme_id__set_default_segment_template_post",
        "parameters": [
          {
            "in": "path",
            "name": "scheme_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Scheme Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SchemeDefaultSegmentTemplateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SchemeDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Set Default Segment Template",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/print-jobs/{job_id}": {
      "get": {
        "operationId": "get_print_job_print_jobs__job_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "job_id",
            "required": true,
            "schema": {
              "title": "Job Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "title": "Response Get Print Job Print Jobs  Job Id  Get",
                  "type": "object"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Print Job",
        "tags": [
          "print-jobs"
        ]
      }
    },
    "/print-jobs/{job_id}/failed": {
      "post": {
        "operationId": "mark_failed_print_jobs__job_id__failed_post",
        "parameters": [
          {
            "in": "path",
            "name": "job_id",
            "required": true,
            "schema": {
              "title": "Job Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MarkFailedIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "title": "Response Mark Failed Print Jobs  Job Id  Failed Post",
                  "type": "object"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Mark Failed",
        "tags": [
          "print-jobs"
        ]
      }
    },
    "/print-jobs/{job_id}/printed": {
      "post": {
        "operationId": "mark_printed_print_jobs__job_id__printed_post",
        "parameters": [
          {
            "in": "path",
            "name": "job_id",
            "required": true,
            "schema": {
              "title": "Job Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MarkPrintedIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "title": "Response Mark Printed Print Jobs  Job Id  Printed Post",
                  "type": "object"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Mark Printed",
        "tags": [
          "print-jobs"
        ]
      }
    },
    "/purchase-orders/": {
      "get": {
        "operationId": "list_purchase_orders_purchase_orders__get",
        "parameters": [
          {
            "in": "query",
            "name": "skip",
            "required": false,
            "schema": {
              "default": 0,
              "minimum": 0,
              "title": "Skip",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 50,
              "maximum": 200,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "supplier",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Supplier"
            }
          },
          {
            "in": "query",
            "name": "status",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/PurchaseOrderListItemOut"
                  },
                  "title": "Response List Purchase Orders Purchase Orders  Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "List Purchase Orders",
        "tags": [
          "purchase-orders"
        ]
      },
      "post": {
        "operationId": "create_purchase_order_purchase_orders__post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PurchaseOrderCreateV2"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PurchaseOrderWithLinesOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Create Purchase Order",
        "tags": [
          "purchase-orders"
        ]
      }
    },
    "/purchase-orders/dev-demo": {
      "post": {
        "operationId": "create_demo_purchase_order_purchase_orders_dev_demo_post",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PurchaseOrderWithLinesOut"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Create Demo Purchase Order",
        "tags": [
          "purchase-orders"
        ]
      }
    },
    "/purchase-orders/{po_id}": {
      "get": {
        "operationId": "get_purchase_order_purchase_orders__po_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "po_id",
            "required": true,
            "schema": {
              "title": "Po Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PurchaseOrderWithLinesOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Purchase Order",
        "tags": [
          "purchase-orders"
        ]
      }
    },
    "/purchase-orders/{po_id}/close": {
      "post": {
        "operationId": "close_purchase_order_purchase_orders__po_id__close_post",
        "parameters": [
          {
            "in": "path",
            "name": "po_id",
            "required": true,
            "schema": {
              "title": "Po Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PurchaseOrderCloseIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PurchaseOrderWithLinesOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Close Purchase Order",
        "tags": [
          "purchase-orders"
        ]
      }
    },
    "/purchase-orders/{po_id}/receipts": {
      "get": {
        "operationId": "get_purchase_order_receipts_purchase_orders__po_id__receipts_get",
        "parameters": [
          {
            "in": "path",
            "name": "po_id",
            "required": true,
            "schema": {
              "title": "Po Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/PurchaseOrderReceiptEventOut"
                  },
                  "title": "Response Get Purchase Order Receipts Purchase Orders  Po Id  Receipts Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Purchase Order Receipts",
        "tags": [
          "purchase-orders"
        ]
      }
    },
    "/purchase-orders/{po_id}/receipts/draft": {
      "post": {
        "description": "显式开始收货：创建/复用 PO 的 DRAFT receipt\n- 彻底消除“录入接口隐式生成 receipt”的行为",
        "operationId": "start_po_receive_draft_purchase_orders__po_id__receipts_draft_post",
        "parameters": [
          {
            "in": "path",
            "name": "po_id",
            "required": true,
            "schema": {
              "title": "Po Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InboundReceiptOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Start Po Receive Draft",
        "tags": [
          "purchase-orders-receive"
        ]
      }
    },
    "/purchase-orders/{po_id}/receive-line": {
      "post": {
        "operationId": "receive_purchase_order_line_purchase_orders__po_id__receive_line_post",
        "parameters": [
          {
            "in": "path",
            "name": "po_id",
            "required": true,
            "schema": {
              "title": "Po Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PurchaseOrderReceiveLineIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PurchaseOrderReceiveWorkbenchOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Receive Purchase Order Line",
        "tags": [
          "purchase-orders"
        ]
      }
    },
    "/purchase-orders/{po_id}/receive-workbench": {
      "get": {
        "description": "Workbench 统一输出：\n- po_summary（合同锚点）\n- receipt（当前 DRAFT 或 null）\n- rows（计划 + 已确认实收 + 草稿实收 + 剩余应收 + 批次维度）\n- explain（confirm 预检结果）\n- caps（可 confirm 与否）",
        "operationId": "get_po_receive_workbench_purchase_orders__po_id__receive_workbench_get",
        "parameters": [
          {
            "in": "path",
            "name": "po_id",
            "required": true,
            "schema": {
              "title": "Po Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PurchaseOrderReceiveWorkbenchOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Po Receive Workbench",
        "tags": [
          "purchase-orders-receive"
        ]
      }
    },
    "/purchase-reports/daily": {
      "get": {
        "operationId": "purchase_report_daily_purchase_reports_daily_get",
        "parameters": [
          {
            "in": "query",
            "name": "date_from",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "format": "date",
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date From"
            }
          },
          {
            "in": "query",
            "name": "date_to",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "format": "date",
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date To"
            }
          },
          {
            "in": "query",
            "name": "warehouse_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Id"
            }
          },
          {
            "in": "query",
            "name": "supplier_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Supplier Id"
            }
          },
          {
            "in": "query",
            "name": "status",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          },
          {
            "in": "query",
            "name": "mode",
            "required": false,
            "schema": {
              "default": "fact",
              "enum": [
                "fact",
                "plan"
              ],
              "title": "Mode",
              "type": "string"
            }
          },
          {
            "description": "时间口径：occurred=按收货发生时间（事实，默认）；po_created=按PO创建时间（维度）；po_purchase_time=按PO采购时间（维度）",
            "in": "query",
            "name": "time_mode",
            "required": false,
            "schema": {
              "default": "occurred",
              "description": "时间口径：occurred=按收货发生时间（事实，默认）；po_created=按PO创建时间（维度）；po_purchase_time=按PO采购时间（维度）",
              "title": "Time Mode",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/DailyPurchaseReportItem"
                  },
                  "title": "Response Purchase Report Daily Purchase Reports Daily Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Purchase Report Daily",
        "tags": [
          "purchase-reports"
        ]
      }
    },
    "/purchase-reports/items": {
      "get": {
        "operationId": "purchase_report_by_items_purchase_reports_items_get",
        "parameters": [
          {
            "in": "query",
            "name": "date_from",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "format": "date",
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date From"
            }
          },
          {
            "in": "query",
            "name": "date_to",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "format": "date",
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date To"
            }
          },
          {
            "in": "query",
            "name": "warehouse_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Id"
            }
          },
          {
            "in": "query",
            "name": "supplier_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Supplier Id"
            }
          },
          {
            "in": "query",
            "name": "status",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          },
          {
            "in": "query",
            "name": "item_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Item Id"
            }
          },
          {
            "in": "query",
            "name": "item_keyword",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Item Keyword"
            }
          },
          {
            "in": "query",
            "name": "mode",
            "required": false,
            "schema": {
              "default": "fact",
              "enum": [
                "fact",
                "plan"
              ],
              "title": "Mode",
              "type": "string"
            }
          },
          {
            "description": "时间口径：occurred=按收货发生时间（事实，默认）；po_created=按PO创建时间（维度）；po_purchase_time=按PO采购时间（维度）",
            "in": "query",
            "name": "time_mode",
            "required": false,
            "schema": {
              "default": "occurred",
              "description": "时间口径：occurred=按收货发生时间（事实，默认）；po_created=按PO创建时间（维度）；po_purchase_time=按PO采购时间（维度）",
              "title": "Time Mode",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/ItemPurchaseReportItem"
                  },
                  "title": "Response Purchase Report By Items Purchase Reports Items Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Purchase Report By Items",
        "tags": [
          "purchase-reports"
        ]
      }
    },
    "/purchase-reports/suppliers": {
      "get": {
        "operationId": "purchase_report_by_suppliers_purchase_reports_suppliers_get",
        "parameters": [
          {
            "in": "query",
            "name": "date_from",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "format": "date",
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date From"
            }
          },
          {
            "in": "query",
            "name": "date_to",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "format": "date",
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date To"
            }
          },
          {
            "in": "query",
            "name": "warehouse_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Id"
            }
          },
          {
            "in": "query",
            "name": "supplier_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Supplier Id"
            }
          },
          {
            "in": "query",
            "name": "status",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          },
          {
            "in": "query",
            "name": "mode",
            "required": false,
            "schema": {
              "default": "fact",
              "enum": [
                "fact",
                "plan"
              ],
              "title": "Mode",
              "type": "string"
            }
          },
          {
            "description": "时间口径：occurred=按收货发生时间（事实，默认）；po_created=按PO创建时间（维度）；po_purchase_time=按PO采购时间（维度）",
            "in": "query",
            "name": "time_mode",
            "required": false,
            "schema": {
              "default": "occurred",
              "description": "时间口径：occurred=按收货发生时间（事实，默认）；po_created=按PO创建时间（维度）；po_purchase_time=按PO采购时间（维度）",
              "title": "Time Mode",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/SupplierPurchaseReportItem"
                  },
                  "title": "Response Purchase Report By Suppliers Purchase Reports Suppliers Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Purchase Report By Suppliers",
        "tags": [
          "purchase-reports"
        ]
      }
    },
    "/return-tasks/": {
      "get": {
        "operationId": "list_return_tasks_return_tasks__get",
        "parameters": [
          {
            "in": "query",
            "name": "skip",
            "required": false,
            "schema": {
              "default": 0,
              "minimum": 0,
              "title": "Skip",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 50,
              "maximum": 200,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "status",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          },
          {
            "in": "query",
            "name": "order_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Order Id"
            }
          },
          {
            "in": "query",
            "name": "warehouse_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Id"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/ReturnTaskOut"
                  },
                  "title": "Response List Return Tasks Return Tasks  Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "List Return Tasks",
        "tags": [
          "return-tasks"
        ]
      }
    },
    "/return-tasks/from-order/{order_id}": {
      "post": {
        "operationId": "create_return_task_from_order_return_tasks_from_order__order_id__post",
        "parameters": [
          {
            "in": "path",
            "name": "order_id",
            "required": true,
            "schema": {
              "title": "Order Id",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReturnTaskCreateFromOrder"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReturnTaskOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Create Return Task From Order",
        "tags": [
          "return-tasks"
        ]
      }
    },
    "/return-tasks/order-refs": {
      "get": {
        "operationId": "list_return_order_refs_return_tasks_order_refs_get",
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 20,
              "maximum": 200,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "days",
            "required": false,
            "schema": {
              "default": 30,
              "maximum": 3650,
              "minimum": 1,
              "title": "Days",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "warehouse_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Id"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/ReturnOrderRefItem"
                  },
                  "title": "Response List Return Order Refs Return Tasks Order Refs Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "List Return Order Refs",
        "tags": [
          "return-tasks"
        ]
      }
    },
    "/return-tasks/order-refs/{order_ref}/detail": {
      "get": {
        "operationId": "get_return_order_ref_detail_return_tasks_order_refs__order_ref__detail_get",
        "parameters": [
          {
            "in": "path",
            "name": "order_ref",
            "required": true,
            "schema": {
              "title": "Order Ref",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "warehouse_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Id"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReturnOrderRefDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Return Order Ref Detail",
        "tags": [
          "return-tasks"
        ]
      }
    },
    "/return-tasks/order-refs/{order_ref}/summary": {
      "get": {
        "operationId": "get_return_order_ref_summary_return_tasks_order_refs__order_ref__summary_get",
        "parameters": [
          {
            "in": "path",
            "name": "order_ref",
            "required": true,
            "schema": {
              "title": "Order Ref",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "warehouse_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Id"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReturnOrderRefSummaryOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Return Order Ref Summary",
        "tags": [
          "return-tasks"
        ]
      }
    },
    "/return-tasks/{task_id}": {
      "get": {
        "operationId": "get_return_task_return_tasks__task_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "task_id",
            "required": true,
            "schema": {
              "title": "Task Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReturnTaskOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Return Task",
        "tags": [
          "return-tasks"
        ]
      }
    },
    "/return-tasks/{task_id}/commit": {
      "post": {
        "operationId": "commit_return_task_return_tasks__task_id__commit_post",
        "parameters": [
          {
            "in": "path",
            "name": "task_id",
            "required": true,
            "schema": {
              "title": "Task Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReturnTaskCommitIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReturnTaskOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Commit Return Task",
        "tags": [
          "return-tasks"
        ]
      }
    },
    "/return-tasks/{task_id}/pick": {
      "post": {
        "operationId": "pick_return_task_compat_return_tasks__task_id__pick_post",
        "parameters": [
          {
            "in": "path",
            "name": "task_id",
            "required": true,
            "schema": {
              "title": "Task Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReturnTaskReceiveIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReturnTaskOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Pick Return Task Compat",
        "tags": [
          "return-tasks"
        ]
      }
    },
    "/return-tasks/{task_id}/receive": {
      "post": {
        "operationId": "receive_return_task_return_tasks__task_id__receive_post",
        "parameters": [
          {
            "in": "path",
            "name": "task_id",
            "required": true,
            "schema": {
              "title": "Task Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReturnTaskReceiveIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReturnTaskOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Receive Return Task",
        "tags": [
          "return-tasks"
        ]
      }
    },
    "/roles": {
      "get": {
        "description": "获取全部角色列表。\n\n需要权限: system.role.manage",
        "operationId": "get_all_roles_roles_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/RoleOut"
                  },
                  "title": "Response Get All Roles Roles Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Get All Roles",
        "tags": [
          "roles"
        ]
      },
      "post": {
        "description": "创建角色。\n\n需要权限: system.role.manage",
        "operationId": "create_role_roles_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RoleCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Create Role",
        "tags": [
          "roles"
        ]
      }
    },
    "/roles/{role_id}": {
      "get": {
        "description": "按 ID 获取角色详情。\n\n需要权限: system.role.manage",
        "operationId": "get_role_by_id_roles__role_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "role_id",
            "required": true,
            "schema": {
              "title": "Role Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Get Role By Id",
        "tags": [
          "roles"
        ]
      }
    },
    "/roles/{role_id}/permissions": {
      "patch": {
        "description": "为某个角色批量绑定权限（幂等覆盖）。\n\n请求示例：\n    PATCH /roles/1/permissions\n    {\n      \"permission_ids\": [\"1\", \"2\", \"3\"]\n    }\n\n需要权限: system.role.manage",
        "operationId": "set_role_permissions_roles__role_id__permissions_patch",
        "parameters": [
          {
            "in": "path",
            "name": "role_id",
            "required": true,
            "schema": {
              "title": "Role Id",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RolePermissionsBody"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Set Role Permissions",
        "tags": [
          "roles"
        ]
      },
      "put": {
        "description": "为某个角色批量绑定权限（幂等覆盖）。\n\n请求示例：\n    PATCH /roles/1/permissions\n    {\n      \"permission_ids\": [\"1\", \"2\", \"3\"]\n    }\n\n需要权限: system.role.manage",
        "operationId": "set_role_permissions_roles__role_id__permissions_put",
        "parameters": [
          {
            "in": "path",
            "name": "role_id",
            "required": true,
            "schema": {
              "title": "Role Id",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RolePermissionsBody"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Set Role Permissions",
        "tags": [
          "roles"
        ]
      }
    },
    "/scan": {
      "post": {
        "description": "v2 统一 /scan 入口：\n\n- 前端提交 ScanRequest（mode + item_id + qty + warehouse_id + 批次/日期 + ctx）\n- 由 scan_orchestrator.ingest 解析并路由到对应 handler（receive/pick/count）\n- 不再直接调用 InboundService.receive，也不再依赖 location_id/ref/occurred_at",
        "operationId": "scan_entrypoint_scan_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ScanRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScanResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Scan Entrypoint",
        "tags": [
          "scan"
        ]
      }
    },
    "/scan/count/commit": {
      "post": {
        "description": "LEGACY：基于 location 的盘点接口。\n当前仍按旧实现工作，未来可迁移到 /scan + ScanRequest(mode='count')，并改用 warehouse_id 粒度。",
        "operationId": "scan_count_commit_scan_count_commit_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ScanCountCommitRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScanResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Scan Count Commit",
        "tags": [
          "scan"
        ]
      }
    },
    "/segment-template-items/{item_id}": {
      "patch": {
        "operationId": "patch_item_active_segment_template_items__item_id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "item_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Item Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SegmentTemplateItemActivePatchIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SegmentTemplateDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Patch Item Active",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/segment-templates/{template_id}": {
      "get": {
        "operationId": "get_template_detail_segment_templates__template_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "template_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Template Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SegmentTemplateDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Get Template Detail",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/segment-templates/{template_id}/items": {
      "put": {
        "operationId": "put_template_items_segment_templates__template_id__items_put",
        "parameters": [
          {
            "in": "path",
            "name": "template_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Template Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SegmentTemplateItemsPutIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SegmentTemplateDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Put Template Items",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/segment-templates/{template_id}:activate": {
      "post": {
        "operationId": "activate_template_segment_templates__template_id__activate_post",
        "parameters": [
          {
            "in": "path",
            "name": "template_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Template Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SegmentTemplateDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Activate Template",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/segment-templates/{template_id}:archive": {
      "post": {
        "description": "✅ 归档：只允许“已保存（published）且非当前生效”的模板归档\n- 归档后 status=archived\n- 归档后不可启用（activate 已经只允许 published）",
        "operationId": "archive_template_segment_templates__template_id__archive_post",
        "parameters": [
          {
            "in": "path",
            "name": "template_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Template Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SegmentTemplateDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Archive Template",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/segment-templates/{template_id}:deactivate": {
      "post": {
        "operationId": "deactivate_template_segment_templates__template_id__deactivate_post",
        "parameters": [
          {
            "in": "path",
            "name": "template_id",
            "required": true,
            "schema": {
              "title": "Template Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SegmentTemplateDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Deactivate Template",
        "tags": [
          "shipping-provider-pricing",
          "shipping_provider_pricing_schemes"
        ]
      }
    },
    "/segment-templates/{template_id}:publish": {
      "post": {
        "operationId": "publish_template_segment_templates__template_id__publish_post",
        "parameters": [
          {
            "in": "path",
            "name": "template_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Template Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SegmentTemplateDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Publish Template",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/segment-templates/{template_id}:rename": {
      "post": {
        "operationId": "rename_template_segment_templates__template_id__rename_post",
        "parameters": [
          {
            "in": "path",
            "name": "template_id",
            "required": true,
            "schema": {
              "title": "Template Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SegmentTemplateRenameIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SegmentTemplateDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Rename Template",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/segment-templates/{template_id}:unarchive": {
      "post": {
        "description": "✅ 取消归档：只允许“已归档（archived）”模板取消归档\n- 取消归档后 status=published\n- 取消归档后允许再次启用（activate 仍只允许 published）\n- 不引入通用 PATCH status 口子",
        "operationId": "unarchive_template_segment_templates__template_id__unarchive_post",
        "parameters": [
          {
            "in": "path",
            "name": "template_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Template Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SegmentTemplateDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Unarchive Template",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/ship/calc": {
      "post": {
        "operationId": "calc_shipping_quotes_ship_calc_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ShipCalcRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShipCalcResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Calc Shipping Quotes",
        "tags": [
          "ship"
        ]
      }
    },
    "/ship/confirm": {
      "post": {
        "description": "记录一次发货完成事件（Phase 3 + 幂等守门 + 可统计错误码）\n\n合同（刚性）：\n- ref 在 (platform, shop_id) 维度必须幂等（防重复确认）\n- warehouse_id 必填\n- carrier 必填且必须是该仓可服务\n- scheme_id 必填且必须绑定该仓、有效期命中、且属于 carrier\n- tracking_no 若提供：(carrier_code, tracking_no) 唯一\n\n错误返回：\n- 422：缺字段/入参不合法（detail: {code,message}）\n- 409：合同冲突（detail: {code,message}）\n\n失败审计（Phase 4 样板）：\n- 对所有 422/409，写 audit_events：flow=OUTBOUND, event=SHIP_CONFIRM_REJECT\n  meta 包含 error_code / message / platform / shop_id / ref / trace_id / warehouse_id / carrier / scheme_id",
        "operationId": "confirm_ship_ship_confirm_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ShipConfirmRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShipConfirmResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Confirm Ship",
        "tags": [
          "ship"
        ]
      }
    },
    "/ship/prepare-from-order": {
      "post": {
        "operationId": "prepare_from_order_ship_prepare_from_order_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ShipPrepareRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShipPrepareResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Prepare From Order",
        "tags": [
          "ship"
        ]
      }
    },
    "/shipping-provider-contacts/{contact_id}": {
      "delete": {
        "operationId": "shipping_provider_delete_contact_shipping_provider_contacts__contact_id__delete",
        "parameters": [
          {
            "in": "path",
            "name": "contact_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Contact Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Shipping Provider Delete Contact",
        "tags": [
          "shipping-provider-contacts"
        ]
      },
      "patch": {
        "operationId": "shipping_provider_update_contact_shipping_provider_contacts__contact_id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "contact_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Contact Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ShippingProviderContactUpdateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingProviderContactOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Shipping Provider Update Contact",
        "tags": [
          "shipping-provider-contacts"
        ]
      }
    },
    "/shipping-providers": {
      "get": {
        "description": "物流/快递网点列表（读聚合 contacts）。\n\n权限：config.store.read",
        "operationId": "list_shipping_providers_shipping_providers_get",
        "parameters": [
          {
            "description": "按启用状态筛选；active=true 用于下拉。",
            "in": "query",
            "name": "active",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "按启用状态筛选；active=true 用于下拉。",
              "title": "Active"
            }
          },
          {
            "description": "按名称 / 联系人模糊搜索（基于 contacts 子表）。",
            "in": "query",
            "name": "q",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "按名称 / 联系人模糊搜索（基于 contacts 子表）。",
              "title": "Q"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingProviderListOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "List Shipping Providers",
        "tags": [
          "shipping-providers"
        ]
      },
      "post": {
        "description": "新建仓库可用快递网点（主体事实）。\n\n权限：config.store.write\n\n刚性合同：\n- warehouse_id 必填且必须存在\n- code 必填（不允许 None / 空白）\n- code 全局唯一（strip + upper 后比较）",
        "operationId": "create_shipping_provider_shipping_providers_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ShippingProviderCreateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingProviderCreateOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Create Shipping Provider",
        "tags": [
          "shipping-providers"
        ]
      }
    },
    "/shipping-providers/{provider_id}": {
      "get": {
        "description": "物流/快递网点详情（读聚合 contacts）。\n\n权限：config.store.read",
        "operationId": "get_shipping_provider_shipping_providers__provider_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "provider_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Provider Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingProviderDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Get Shipping Provider",
        "tags": [
          "shipping-providers"
        ]
      },
      "patch": {
        "description": "更新仓库可用快递网点（主体事实）。\n\n权限：config.store.write\n\n刚性合同：\n- 如果更新 code：不允许置空；必须非空\n- code 全局唯一（strip + upper 后比较）\n- 如果更新 warehouse_id：必须存在",
        "operationId": "update_shipping_provider_shipping_providers__provider_id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "provider_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Provider Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ShippingProviderUpdateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingProviderUpdateOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Update Shipping Provider",
        "tags": [
          "shipping-providers"
        ]
      }
    },
    "/shipping-providers/{provider_id}/contacts": {
      "post": {
        "operationId": "shipping_provider_create_contact_shipping_providers__provider_id__contacts_post",
        "parameters": [
          {
            "in": "path",
            "name": "provider_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Provider Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ShippingProviderContactCreateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingProviderContactOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Shipping Provider Create Contact",
        "tags": [
          "shipping-provider-contacts"
        ]
      }
    },
    "/shipping-providers/{provider_id}/pricing-schemes": {
      "get": {
        "operationId": "shipping_provider_pricing_schemes_list_shipping_providers__provider_id__pricing_schemes_get",
        "parameters": [
          {
            "in": "path",
            "name": "provider_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Provider Id",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "active",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Active"
            }
          },
          {
            "in": "query",
            "name": "include_archived",
            "required": false,
            "schema": {
              "default": false,
              "title": "Include Archived",
              "type": "boolean"
            }
          },
          {
            "in": "query",
            "name": "include_inactive",
            "required": false,
            "schema": {
              "default": false,
              "title": "Include Inactive",
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SchemeListOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Shipping Provider Pricing Schemes List",
        "tags": [
          "shipping-provider-pricing"
        ]
      },
      "post": {
        "operationId": "create_scheme_shipping_providers__provider_id__pricing_schemes_post",
        "parameters": [
          {
            "in": "path",
            "name": "provider_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Provider Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SchemeCreateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SchemeDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Create Scheme",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/shipping-providers/{provider_id}/pricing-schemes/active": {
      "get": {
        "operationId": "shipping_provider_pricing_schemes_list_active_shipping_providers__provider_id__pricing_schemes_active_get",
        "parameters": [
          {
            "in": "path",
            "name": "provider_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Provider Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SchemeListOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Shipping Provider Pricing Schemes List Active",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/shipping-quote/calc": {
      "post": {
        "operationId": "calc_shipping_quote_shipping_quote_calc_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/QuoteCalcIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QuoteCalcOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Calc Shipping Quote",
        "tags": [
          "shipping-quote"
        ]
      }
    },
    "/shipping-quote/recommend": {
      "post": {
        "operationId": "recommend_shipping_quote_shipping_quote_recommend_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/QuoteRecommendIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QuoteRecommendOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Recommend Shipping Quote",
        "tags": [
          "shipping-quote"
        ]
      }
    },
    "/shipping-records/by-ref/{order_ref}": {
      "get": {
        "operationId": "get_shipping_records_by_ref_shipping_records_by_ref__order_ref__get",
        "parameters": [
          {
            "in": "path",
            "name": "order_ref",
            "required": true,
            "schema": {
              "title": "Order Ref",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/ShippingRecordOut"
                  },
                  "title": "Response Get Shipping Records By Ref Shipping Records By Ref  Order Ref  Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "按订单引用（order_ref）查询发货账本记录（可能多条）",
        "tags": [
          "shipping-records"
        ]
      }
    },
    "/shipping-records/{record_id}": {
      "get": {
        "operationId": "get_shipping_record_by_id_shipping_records__record_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "record_id",
            "required": true,
            "schema": {
              "title": "Record Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingRecordOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "按 ID 查询单条发货账本记录",
        "tags": [
          "shipping-records"
        ]
      }
    },
    "/shipping-records/{record_id}/status": {
      "post": {
        "operationId": "update_shipping_record_status_shipping_records__record_id__status_post",
        "parameters": [
          {
            "in": "path",
            "name": "record_id",
            "required": true,
            "schema": {
              "title": "Record Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ShippingStatusUpdateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingStatusUpdateOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "更新单条发货账本的状态 / delivery_time",
        "tags": [
          "shipping-records"
        ]
      }
    },
    "/shipping-reports/by-carrier": {
      "get": {
        "operationId": "shipping_reports_by_carrier_shipping_reports_by_carrier_get",
        "parameters": [
          {
            "in": "query",
            "name": "from_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "From Date"
            }
          },
          {
            "in": "query",
            "name": "to_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "To Date"
            }
          },
          {
            "in": "query",
            "name": "platform",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Platform"
            }
          },
          {
            "in": "query",
            "name": "shop_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Shop Id"
            }
          },
          {
            "in": "query",
            "name": "carrier_code",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Carrier Code"
            }
          },
          {
            "in": "query",
            "name": "province",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Province"
            }
          },
          {
            "in": "query",
            "name": "city",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "City"
            }
          },
          {
            "in": "query",
            "name": "district",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "District"
            }
          },
          {
            "in": "query",
            "name": "warehouse_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Id"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingByCarrierResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Shipping Reports By Carrier",
        "tags": [
          "shipping-reports"
        ]
      }
    },
    "/shipping-reports/by-province": {
      "get": {
        "operationId": "shipping_reports_by_province_shipping_reports_by_province_get",
        "parameters": [
          {
            "in": "query",
            "name": "from_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "From Date"
            }
          },
          {
            "in": "query",
            "name": "to_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "To Date"
            }
          },
          {
            "in": "query",
            "name": "platform",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Platform"
            }
          },
          {
            "in": "query",
            "name": "shop_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Shop Id"
            }
          },
          {
            "in": "query",
            "name": "carrier_code",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Carrier Code"
            }
          },
          {
            "in": "query",
            "name": "province",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Province"
            }
          },
          {
            "in": "query",
            "name": "city",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "City"
            }
          },
          {
            "in": "query",
            "name": "district",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "District"
            }
          },
          {
            "in": "query",
            "name": "warehouse_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Id"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingByProvinceResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Shipping Reports By Province",
        "tags": [
          "shipping-reports"
        ]
      }
    },
    "/shipping-reports/by-shop": {
      "get": {
        "operationId": "shipping_reports_by_shop_shipping_reports_by_shop_get",
        "parameters": [
          {
            "in": "query",
            "name": "from_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "From Date"
            }
          },
          {
            "in": "query",
            "name": "to_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "To Date"
            }
          },
          {
            "in": "query",
            "name": "platform",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Platform"
            }
          },
          {
            "in": "query",
            "name": "shop_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Shop Id"
            }
          },
          {
            "in": "query",
            "name": "carrier_code",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Carrier Code"
            }
          },
          {
            "in": "query",
            "name": "province",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Province"
            }
          },
          {
            "in": "query",
            "name": "city",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "City"
            }
          },
          {
            "in": "query",
            "name": "district",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "District"
            }
          },
          {
            "in": "query",
            "name": "warehouse_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Id"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingByShopResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Shipping Reports By Shop",
        "tags": [
          "shipping-reports"
        ]
      }
    },
    "/shipping-reports/by-warehouse": {
      "get": {
        "operationId": "shipping_reports_by_warehouse_shipping_reports_by_warehouse_get",
        "parameters": [
          {
            "in": "query",
            "name": "from_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "From Date"
            }
          },
          {
            "in": "query",
            "name": "to_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "To Date"
            }
          },
          {
            "in": "query",
            "name": "platform",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Platform"
            }
          },
          {
            "in": "query",
            "name": "shop_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Shop Id"
            }
          },
          {
            "in": "query",
            "name": "carrier_code",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Carrier Code"
            }
          },
          {
            "in": "query",
            "name": "province",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Province"
            }
          },
          {
            "in": "query",
            "name": "city",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "City"
            }
          },
          {
            "in": "query",
            "name": "district",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "District"
            }
          },
          {
            "in": "query",
            "name": "warehouse_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Id"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingByWarehouseResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Shipping Reports By Warehouse",
        "tags": [
          "shipping-reports"
        ]
      }
    },
    "/shipping-reports/daily": {
      "get": {
        "operationId": "shipping_reports_daily_shipping_reports_daily_get",
        "parameters": [
          {
            "in": "query",
            "name": "from_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "From Date"
            }
          },
          {
            "in": "query",
            "name": "to_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "To Date"
            }
          },
          {
            "in": "query",
            "name": "platform",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Platform"
            }
          },
          {
            "in": "query",
            "name": "shop_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Shop Id"
            }
          },
          {
            "in": "query",
            "name": "carrier_code",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Carrier Code"
            }
          },
          {
            "in": "query",
            "name": "province",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Province"
            }
          },
          {
            "in": "query",
            "name": "city",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "City"
            }
          },
          {
            "in": "query",
            "name": "district",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "District"
            }
          },
          {
            "in": "query",
            "name": "warehouse_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Id"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingDailyResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Shipping Reports Daily",
        "tags": [
          "shipping-reports"
        ]
      }
    },
    "/shipping-reports/list": {
      "get": {
        "description": "发货明细列表（带过滤条件 + 分页）。",
        "operationId": "shipping_reports_list_shipping_reports_list_get",
        "parameters": [
          {
            "in": "query",
            "name": "from_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "From Date"
            }
          },
          {
            "in": "query",
            "name": "to_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "To Date"
            }
          },
          {
            "in": "query",
            "name": "platform",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Platform"
            }
          },
          {
            "in": "query",
            "name": "shop_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Shop Id"
            }
          },
          {
            "in": "query",
            "name": "carrier_code",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Carrier Code"
            }
          },
          {
            "in": "query",
            "name": "province",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Province"
            }
          },
          {
            "in": "query",
            "name": "city",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "City"
            }
          },
          {
            "in": "query",
            "name": "district",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "District"
            }
          },
          {
            "in": "query",
            "name": "warehouse_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Id"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 50,
              "maximum": 500,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "offset",
            "required": false,
            "schema": {
              "default": 0,
              "minimum": 0,
              "title": "Offset",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingListResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Shipping Reports List",
        "tags": [
          "shipping-reports"
        ]
      }
    },
    "/shipping-reports/options": {
      "get": {
        "description": "发货报表下拉选项：\n- 平台列表（platform）\n- 店铺 ID 列表（shop_id）\n- 省份列表（meta.dest_province）\n- 城市列表（meta.dest_city）\n只统计当前日期范围内 shipping_records 出现过的值。",
        "operationId": "shipping_reports_options_shipping_reports_options_get",
        "parameters": [
          {
            "in": "query",
            "name": "from_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "From Date"
            }
          },
          {
            "in": "query",
            "name": "to_date",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "To Date"
            }
          },
          {
            "in": "query",
            "name": "warehouse_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Id"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingReportFilterOptions"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Shipping Reports Options",
        "tags": [
          "shipping-reports"
        ]
      }
    },
    "/snapshot/inventory": {
      "get": {
        "description": "SnapshotPage 主列表接口（库存总览，实时视图）。",
        "operationId": "inventory_snapshot_snapshot_inventory_get",
        "parameters": [
          {
            "description": "模糊搜索 items.name / items.sku",
            "in": "query",
            "name": "q",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "模糊搜索 items.name / items.sku",
              "title": "Q"
            }
          },
          {
            "in": "query",
            "name": "offset",
            "required": false,
            "schema": {
              "default": 0,
              "minimum": 0,
              "title": "Offset",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 20,
              "maximum": 100,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InventorySnapshotResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Inventory Snapshot",
        "tags": [
          "snapshot"
        ]
      }
    },
    "/snapshot/item-detail/{item_id}": {
      "get": {
        "description": "Drawer V2 使用的“单品仓+批次明细”接口。",
        "operationId": "item_detail_snapshot_item_detail__item_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "item_id",
            "required": true,
            "schema": {
              "title": "Item Id",
              "type": "integer"
            }
          },
          {
            "description": "逗号分隔的库存池（预留参数，目前仅 MAIN 有效）",
            "in": "query",
            "name": "pools",
            "required": false,
            "schema": {
              "default": "MAIN",
              "description": "逗号分隔的库存池（预留参数，目前仅 MAIN 有效）",
              "title": "Pools",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ItemDetailResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Item Detail",
        "tags": [
          "snapshot"
        ]
      }
    },
    "/stock/batch/query": {
      "post": {
        "description": "批次视图（v2）——**以 stocks 为唯一真相**：\n\n- 先从 stocks 聚合 (item_id, warehouse_id, batch_code) 的当前库存 qty；\n- 再 LEFT JOIN batches 取生产/有效期等 FEFO 信息；\n- 完全忽略 batches.qty 字段，不再依赖旧时代的冗余数量。\n\n过滤维度：\n- item_id（必选或可选，视前端而定）\n- warehouse_id（可选）\n- expiry_date_from / expiry_date_to（基于 batches.expiry_date）",
        "operationId": "query_batches_stock_batch_query_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StockBatchQueryIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StockBatchQueryOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Query Batches",
        "tags": [
          "stock"
        ]
      }
    },
    "/stock/ledger/enums": {
      "post": {
        "description": "前端下拉唯一来源（由后端 Enum 生成）：\n- reason_canons: 稳定口径枚举\n- sub_reasons: 具体动作枚举",
        "operationId": "ledger_enums_stock_ledger_enums_post",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LedgerEnums"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Ledger Enums",
        "tags": [
          "stock_ledger"
        ]
      }
    },
    "/stock/ledger/explain": {
      "get": {
        "description": "台账解释（终态口径）：\n\n- ledger → receipt → PO（可选）\n- 不再解释 receive_task（执行层已移除）\n- Receipt 是事实源：用 inbound_receipts(ref, trace_id) 定位\n- Ledger 是动作流水：用 stock_ledger(ref, trace_id) 拉取",
        "operationId": "explain_ledger_ref_stock_ledger_explain_get",
        "parameters": [
          {
            "description": "业务 ref（例如 RT-230 / RMA-xxx）",
            "in": "query",
            "name": "ref",
            "required": true,
            "schema": {
              "description": "业务 ref（例如 RT-230 / RMA-xxx）",
              "title": "Ref",
              "type": "string"
            }
          },
          {
            "description": "可选：trace_id（强烈建议传，避免歧义）",
            "in": "query",
            "name": "trace_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "可选：trace_id（强烈建议传，避免歧义）",
              "title": "Trace Id"
            }
          },
          {
            "description": "最多返回多少条 ledger 行",
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 300,
              "description": "最多返回多少条 ledger 行",
              "maximum": 2000,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LedgerExplainOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Explain Ledger Ref",
        "tags": [
          "stock_ledger"
        ]
      }
    },
    "/stock/ledger/export": {
      "post": {
        "description": "导出台账 CSV：\n\n- 过滤条件与 /stock/ledger/query 一致（基于 LedgerQuery & occurred_at）；\n- 本次增强：支持 sub_reason 过滤，导出列中包含 sub_reason。",
        "operationId": "export_ledger_stock_ledger_export_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LedgerQuery"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Export Ledger",
        "tags": [
          "stock_ledger"
        ]
      }
    },
    "/stock/ledger/query": {
      "post": {
        "description": "普通查询（<=90 天限制由 normalize_time_range 控制）：\n- 默认按 occurred_at 降序 + id 降序排序；\n- 支持 item_id/item_keyword/warehouse_id/batch_code/reason/reason_canon/sub_reason/ref/trace_id 过滤；\n- 返回 item_name（当前页批量补齐）。",
        "operationId": "query_ledger_stock_ledger_query_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LedgerQuery"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LedgerList"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Query Ledger",
        "tags": [
          "stock_ledger"
        ]
      }
    },
    "/stock/ledger/query-history": {
      "post": {
        "description": "历史台账查询（用于 >90 天窗口）：\n\n- 必须提供 time_from；\n- 必须提供锚点（trace_id/ref/item_id/reason_canon/sub_reason 任意一项）；\n- 返回结构与 /stock/ledger/query 一致（LedgerList）。",
        "operationId": "query_ledger_history_stock_ledger_query_history_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LedgerQuery"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LedgerList"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Query Ledger History",
        "tags": [
          "stock_ledger"
        ]
      }
    },
    "/stock/ledger/reconcile": {
      "post": {
        "description": "台账对账接口：\n\n在指定时间窗口内（基于 occurred_at），对比：\n\n  SUM(delta)  vs  stocks.qty\n\n找出 (warehouse_id, item_id, batch_code_key) 维度上“不平”的记录：\n- ledger_sum_delta != stock_qty\n\n过滤条件：\n- 复用 LedgerQuery 中的 warehouse_id / item_id / batch_code（查询级归一后映射到 batch_code_key）；\n- 其它过滤（reason/ref/trace_id）对对账没有意义，此处忽略。",
        "operationId": "reconcile_ledger_stock_ledger_reconcile_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LedgerQuery"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LedgerReconcileResult"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Reconcile Ledger",
        "tags": [
          "stock_ledger"
        ]
      }
    },
    "/stock/ledger/reconcile-v2/summary": {
      "post": {
        "description": "多维对账汇总（供 LedgerCockpit 使用）：\n\n- body 中使用 {time_from, time_to}（ISO datetime 字符串）；\n- 内部按 <=90 天 做时间窗限制；\n- 返回三块数据：\n    movement_type 汇总\n    ref 汇总\n    trace 汇总",
        "operationId": "reconcile_summary_stock_ledger_reconcile_v2_summary_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReconcileSummaryPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Reconcile Summary",
        "tags": [
          "ledger_reconcile_v2"
        ]
      }
    },
    "/stock/ledger/reconcile-v2/three-books": {
      "post": {
        "description": "三账对账入口：\n\n- body 中传 {cut}（ISO datetime），用于：\n    * ledger_cut（occurred_at <= cut）\n    * snapshot_v3 对应 snapshot_date = cut::date",
        "operationId": "reconcile_three_books_stock_ledger_reconcile_v2_three_books_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ThreeBooksPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Reconcile Three Books",
        "tags": [
          "ledger_reconcile_v2"
        ]
      }
    },
    "/stock/ledger/summary": {
      "post": {
        "description": "台账统计接口（供前端直接渲染统计表/图）：\n\n- 使用与明细查询相同的过滤条件（LedgerQuery）；\n- 按 reason 聚合 count / sum(delta)；\n- ✅ 统计口径 PROD-only：排除 DEFAULT Test Set 商品。",
        "operationId": "summarize_ledger_stock_ledger_summary_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LedgerQuery"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LedgerSummary"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Summarize Ledger",
        "tags": [
          "stock_ledger"
        ]
      }
    },
    "/stock/ledger/timeline": {
      "post": {
        "operationId": "ledger_timeline_stock_ledger_timeline_post",
        "parameters": [
          {
            "in": "query",
            "name": "time_from",
            "required": true,
            "schema": {
              "format": "date-time",
              "title": "Time From",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "time_to",
            "required": true,
            "schema": {
              "format": "date-time",
              "title": "Time To",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "warehouse_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Id"
            }
          },
          {
            "in": "query",
            "name": "item_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Item Id"
            }
          },
          {
            "in": "query",
            "name": "batch_code",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Batch Code"
            }
          },
          {
            "in": "query",
            "name": "trace_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Trace Id"
            }
          },
          {
            "in": "query",
            "name": "ref",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Ref"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Ledger Timeline",
        "tags": [
          "ledger_timeline"
        ]
      }
    },
    "/stock/snapshot/v3/compare": {
      "post": {
        "operationId": "snapshot_compare_stock_snapshot_v3_compare_post",
        "parameters": [
          {
            "in": "query",
            "name": "at",
            "required": true,
            "schema": {
              "format": "date-time",
              "title": "At",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Snapshot Compare",
        "tags": [
          "snapshot_v3"
        ]
      }
    },
    "/stock/snapshot/v3/cut": {
      "post": {
        "operationId": "snapshot_cut_stock_snapshot_v3_cut_post",
        "parameters": [
          {
            "in": "query",
            "name": "at",
            "required": true,
            "schema": {
              "format": "date-time",
              "title": "At",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Snapshot Cut",
        "tags": [
          "snapshot_v3"
        ]
      }
    },
    "/stock/snapshot/v3/rebuild": {
      "post": {
        "operationId": "snapshot_rebuild_stock_snapshot_v3_rebuild_post",
        "parameters": [
          {
            "in": "query",
            "name": "at",
            "required": true,
            "schema": {
              "format": "date-time",
              "title": "At",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Snapshot Rebuild",
        "tags": [
          "snapshot_v3"
        ]
      }
    },
    "/stores": {
      "get": {
        "description": "店铺列表（基础信息，不含仓绑定）。\n\n权限：config.store.read\n\n✅ 合同：\n- 支持 platform/q/limit/offset\n- 返回结构保持：{ ok: true, data: [...] }",
        "operationId": "list_stores_stores_get",
        "parameters": [
          {
            "description": "平台过滤（如 PDD/TB/DEMO），大小写不敏感",
            "in": "query",
            "name": "platform",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "平台过滤（如 PDD/TB/DEMO），大小写不敏感",
              "title": "Platform"
            }
          },
          {
            "description": "模糊搜索：name / shop_id / id",
            "in": "query",
            "name": "q",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "模糊搜索：name / shop_id / id",
              "title": "Q"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 200,
              "maximum": 1000,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "offset",
            "required": false,
            "schema": {
              "default": 0,
              "minimum": 0,
              "title": "Offset",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StoreListOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "List Stores",
        "tags": [
          "stores"
        ]
      },
      "post": {
        "description": "店铺建档 / 补录（幂等）。\n\n权限：config.store.write\n\n✅ 合同收敛：\n- shop_type 的唯一真相为 platform_test_shops（code='DEFAULT'）\n- 创建时可选择 TEST/PROD：\n  * TEST：写入/更新 platform_test_shops（绑定 store_id）\n  * PROD：确保该 store_id 不在 platform_test_shops（删除绑定）",
        "operationId": "create_or_get_store_stores_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StoreCreateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StoreCreateOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Create Or Get Store",
        "tags": [
          "stores"
        ]
      }
    },
    "/stores/{store_id}": {
      "get": {
        "description": "店铺详情（含绑定仓列表）。\n权限：config.store.read",
        "operationId": "get_store_detail_stores__store_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StoreDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Get Store Detail",
        "tags": [
          "stores"
        ]
      },
      "patch": {
        "description": "更新店铺基础信息（name / active / route_mode / email / 联系人 / 电话）。\n\n权限：config.store.write",
        "operationId": "update_store_stores__store_id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StoreUpdateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StoreUpdateOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Update Store",
        "tags": [
          "stores"
        ]
      }
    },
    "/stores/{store_id}/default-warehouse": {
      "get": {
        "description": "解析默认仓（若无绑定返回 null）。\n权限：config.store.read",
        "operationId": "get_default_warehouse_stores__store_id__default_warehouse_get",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultWarehouseOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Get Default Warehouse",
        "tags": [
          "stores"
        ]
      }
    },
    "/stores/{store_id}/fskus": {
      "get": {
        "operationId": "list_store_fskus_stores__store_id__fskus_get",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          },
          {
            "description": "按 name/code 模糊搜索",
            "in": "query",
            "name": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "按 name/code 模糊搜索",
              "title": "Query"
            }
          },
          {
            "description": "draft/published/retired",
            "in": "query",
            "name": "status",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "draft/published/retired",
              "title": "Status"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 50,
              "maximum": 200,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "offset",
            "required": false,
            "schema": {
              "default": 0,
              "minimum": 0,
              "title": "Offset",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FskuListOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "List Store Fskus",
        "tags": [
          "stores"
        ]
      }
    },
    "/stores/{store_id}/order-sim/cart": {
      "get": {
        "operationId": "get_order_sim_cart_stores__store_id__order_sim_cart_get",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderSimCartGetOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Get Order Sim Cart",
        "tags": [
          "stores"
        ]
      },
      "put": {
        "operationId": "put_order_sim_cart_stores__store_id__order_sim_cart_put",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OrderSimCartPutIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderSimCartPutOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Put Order Sim Cart",
        "tags": [
          "stores"
        ]
      }
    },
    "/stores/{store_id}/order-sim/filled-code-options": {
      "get": {
        "operationId": "get_order_sim_filled_code_options_stores__store_id__order_sim_filled_code_options_get",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderSimFilledCodeOptionsOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Get Order Sim Filled Code Options",
        "tags": [
          "stores"
        ]
      }
    },
    "/stores/{store_id}/order-sim/generate-order": {
      "post": {
        "operationId": "generate_order_sim_order_stores__store_id__order_sim_generate_order_post",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OrderSimGenerateOrderIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderSimGenerateOrderOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Generate Order Sim Order",
        "tags": [
          "stores"
        ]
      }
    },
    "/stores/{store_id}/order-sim/merchant-lines": {
      "get": {
        "operationId": "get_order_sim_merchant_lines_stores__store_id__order_sim_merchant_lines_get",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderSimMerchantLinesGetOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Get Order Sim Merchant Lines",
        "tags": [
          "stores"
        ]
      },
      "put": {
        "operationId": "put_order_sim_merchant_lines_stores__store_id__order_sim_merchant_lines_put",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OrderSimMerchantLinesPutIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderSimMerchantLinesPutOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Put Order Sim Merchant Lines",
        "tags": [
          "stores"
        ]
      }
    },
    "/stores/{store_id}/order-sim/preview-order": {
      "post": {
        "operationId": "preview_order_sim_order_stores__store_id__order_sim_preview_order_post",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OrderSimPreviewOrderIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderSimPreviewOrderOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Preview Order Sim Order",
        "tags": [
          "stores"
        ]
      }
    },
    "/stores/{store_id}/platform-auth": {
      "get": {
        "description": "店铺平台授权状态视图：\n\ndata:\n  - store_id\n  - platform\n  - shop_id\n  - auth_source: \"NONE\" / \"MANUAL\" / \"OAUTH\"\n  - expires_at\n  - mall_id",
        "operationId": "get_store_platform_auth_stores__store_id__platform_auth_get",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StorePlatformAuthOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Get Store Platform Auth",
        "tags": [
          "stores"
        ]
      }
    },
    "/stores/{store_id}/routes/provinces": {
      "get": {
        "operationId": "list_province_routes_stores__store_id__routes_provinces_get",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProvinceRouteListOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "List Province Routes",
        "tags": [
          "stores"
        ]
      },
      "post": {
        "operationId": "create_province_route_stores__store_id__routes_provinces_post",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProvinceRouteCreateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProvinceRouteWriteOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Create Province Route",
        "tags": [
          "stores"
        ]
      }
    },
    "/stores/{store_id}/routes/provinces/{route_id}": {
      "delete": {
        "operationId": "delete_province_route_stores__store_id__routes_provinces__route_id__delete",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          },
          {
            "in": "path",
            "name": "route_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Route Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProvinceRouteWriteOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Delete Province Route",
        "tags": [
          "stores"
        ]
      },
      "patch": {
        "operationId": "update_province_route_stores__store_id__routes_provinces__route_id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          },
          {
            "in": "path",
            "name": "route_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Route Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProvinceRouteUpdateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProvinceRouteWriteOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Update Province Route",
        "tags": [
          "stores"
        ]
      }
    },
    "/stores/{store_id}/routing/health": {
      "get": {
        "operationId": "routing_health_stores__store_id__routing_health_get",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoutingHealthOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Routing Health",
        "tags": [
          "stores"
        ]
      }
    },
    "/stores/{store_id}/warehouses/bind": {
      "post": {
        "description": "店 ↔ 仓 绑定（幂等）。\n权限：config.store.write\n\n约束：\n- 若 is_default=true，会保证该店铺“唯一默认仓”\n- 若 is_top 为 null，由后端按 is_default 推导（由 StoreService.bind_warehouse 负责）",
        "operationId": "bind_store_warehouse_stores__store_id__warehouses_bind_post",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BindWarehouseIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BindWarehouseOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Bind Store Warehouse",
        "tags": [
          "stores"
        ]
      }
    },
    "/stores/{store_id}/warehouses/{warehouse_id}": {
      "delete": {
        "description": "解除店 ↔ 仓 绑定关系。\n权限：config.store.write",
        "operationId": "delete_binding_stores__store_id__warehouses__warehouse_id__delete",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          },
          {
            "in": "path",
            "name": "warehouse_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Warehouse Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BindingDeleteOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Delete Binding",
        "tags": [
          "stores"
        ]
      },
      "patch": {
        "description": "更新绑定关系（is_default / priority / is_top）。\n权限：config.store.write\n\n✅ 强约束：当 is_default=true 时，必须保证“唯一默认仓”。\n实现方式：调用 StoreService.set_default_warehouse（清空同店其它 default，再置当前为 default）。",
        "operationId": "update_binding_stores__store_id__warehouses__warehouse_id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "store_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Store Id",
              "type": "integer"
            }
          },
          {
            "in": "path",
            "name": "warehouse_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Warehouse Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BindingUpdateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BindingUpdateOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Update Binding",
        "tags": [
          "stores"
        ]
      }
    },
    "/supplier-contacts/{contact_id}": {
      "delete": {
        "operationId": "supplier_delete_contact_supplier_contacts__contact_id__delete",
        "parameters": [
          {
            "in": "path",
            "name": "contact_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Contact Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Supplier Delete Contact",
        "tags": [
          "supplier-contacts"
        ]
      },
      "patch": {
        "operationId": "supplier_update_contact_supplier_contacts__contact_id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "contact_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Contact Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SupplierContactUpdateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SupplierContactOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Supplier Update Contact",
        "tags": [
          "supplier-contacts"
        ]
      }
    },
    "/suppliers": {
      "get": {
        "operationId": "list_suppliers_suppliers_get",
        "parameters": [
          {
            "description": "active=true 仅返回合作中供应商（用于下拉）",
            "in": "query",
            "name": "active",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "active=true 仅返回合作中供应商（用于下拉）",
              "title": "Active"
            }
          },
          {
            "description": "名称/编码/联系人/电话/邮箱/微信 模糊搜索",
            "in": "query",
            "name": "q",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "名称/编码/联系人/电话/邮箱/微信 模糊搜索",
              "title": "Q"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/SupplierOut"
                  },
                  "title": "Response List Suppliers Suppliers Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "List Suppliers",
        "tags": [
          "suppliers"
        ]
      },
      "post": {
        "operationId": "create_supplier_suppliers_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SupplierCreateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SupplierOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Create Supplier",
        "tags": [
          "suppliers"
        ]
      }
    },
    "/suppliers/basic": {
      "get": {
        "operationId": "list_suppliers_basic_suppliers_basic_get",
        "parameters": [
          {
            "description": "默认仅返回合作中供应商（用于下拉）",
            "in": "query",
            "name": "active",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "default": true,
              "description": "默认仅返回合作中供应商（用于下拉）",
              "title": "Active"
            }
          },
          {
            "description": "名称/编码 模糊搜索",
            "in": "query",
            "name": "q",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "名称/编码 模糊搜索",
              "title": "Q"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/SupplierBasicOut"
                  },
                  "title": "Response List Suppliers Basic Suppliers Basic Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "List Suppliers Basic",
        "tags": [
          "suppliers"
        ]
      }
    },
    "/suppliers/{supplier_id}": {
      "patch": {
        "operationId": "update_supplier_suppliers__supplier_id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "supplier_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Supplier Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SupplierUpdateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SupplierOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Update Supplier",
        "tags": [
          "suppliers"
        ]
      }
    },
    "/suppliers/{supplier_id}/contacts": {
      "post": {
        "operationId": "supplier_create_contact_suppliers__supplier_id__contacts_post",
        "parameters": [
          {
            "in": "path",
            "name": "supplier_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Supplier Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SupplierContactCreateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SupplierContactOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Supplier Create Contact",
        "tags": [
          "supplier-contacts"
        ]
      }
    },
    "/surcharges/{surcharge_id}": {
      "delete": {
        "operationId": "delete_surcharge_surcharges__surcharge_id__delete",
        "parameters": [
          {
            "in": "path",
            "name": "surcharge_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Surcharge Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Delete Surcharge",
        "tags": [
          "shipping-provider-pricing"
        ]
      },
      "patch": {
        "operationId": "update_surcharge_surcharges__surcharge_id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "surcharge_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Surcharge Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SurchargeUpdateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SurchargeOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Update Surcharge",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/users/": {
      "get": {
        "operationId": "list_users_users__get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/UserOut"
                  },
                  "title": "Response List Users Users  Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "List Users",
        "tags": [
          "users"
        ]
      }
    },
    "/users/change-password": {
      "post": {
        "operationId": "change_password_users_change_password_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PasswordChangeIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Change Password",
        "tags": [
          "users"
        ]
      }
    },
    "/users/login": {
      "post": {
        "operationId": "login_users_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserLogin"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Token"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Login",
        "tags": [
          "users"
        ]
      }
    },
    "/users/me": {
      "get": {
        "operationId": "get_me_users_me_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Get Me",
        "tags": [
          "users"
        ]
      }
    },
    "/users/register": {
      "post": {
        "operationId": "register_user_users_register_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserCreateMulti"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Register User",
        "tags": [
          "users"
        ]
      }
    },
    "/users/{user_id}": {
      "patch": {
        "operationId": "update_user_users__user_id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "user_id",
            "required": true,
            "schema": {
              "title": "User Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdateMulti"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Update User",
        "tags": [
          "users"
        ]
      }
    },
    "/users/{user_id}/reset-password": {
      "post": {
        "operationId": "reset_password_users__user_id__reset_password_post",
        "parameters": [
          {
            "in": "path",
            "name": "user_id",
            "required": true,
            "schema": {
              "title": "User Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PasswordResetIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Reset Password",
        "tags": [
          "users"
        ]
      }
    },
    "/warehouses": {
      "get": {
        "operationId": "list_warehouses_warehouses_get",
        "parameters": [
          {
            "description": "是否只返回启用/停用仓库；active=true 专供店铺绑定下拉使用。",
            "in": "query",
            "name": "active",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "是否只返回启用/停用仓库；active=true 专供店铺绑定下拉使用。",
              "title": "Active"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseListOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "List Warehouses",
        "tags": [
          "warehouses"
        ]
      },
      "post": {
        "operationId": "create_warehouse_warehouses_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WarehouseCreateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseCreateOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Create Warehouse",
        "tags": [
          "warehouses"
        ]
      }
    },
    "/warehouses/active-carriers/summary": {
      "get": {
        "description": "Phase 2.1：后端汇总接口（消除 N+1）\n\n刚性契约口径：\n- 只返回正在服务的快递公司：wsp.active = true AND sp.active = true\n- 不做推荐策略，不做 fallback\n- 排序仅用于展示稳定：\n  warehouse_id ASC, wsp.priority ASC, sp.priority ASC, sp.id ASC",
        "operationId": "list_warehouses_active_carriers_summary_warehouses_active_carriers_summary_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseActiveCarriersSummaryOut"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "List Warehouses Active Carriers Summary",
        "tags": [
          "warehouses"
        ]
      }
    },
    "/warehouses/service-cities/occupancy": {
      "get": {
        "operationId": "get_service_cities_occupancy_warehouses_service_cities_occupancy_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseServiceCityOccupancyOut"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Get Service Cities Occupancy",
        "tags": [
          "warehouses"
        ]
      }
    },
    "/warehouses/service-provinces/city-split": {
      "get": {
        "operationId": "get_city_split_provinces_warehouses_service_provinces_city_split_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseServiceCitySplitProvincesOut"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Get City Split Provinces",
        "tags": [
          "warehouses"
        ]
      },
      "put": {
        "operationId": "put_city_split_provinces_warehouses_service_provinces_city_split_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WarehouseServiceCitySplitProvincesPutIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseServiceCitySplitProvincesOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Put City Split Provinces",
        "tags": [
          "warehouses"
        ]
      }
    },
    "/warehouses/service-provinces/occupancy": {
      "get": {
        "operationId": "get_service_provinces_occupancy_warehouses_service_provinces_occupancy_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseServiceProvinceOccupancyOut"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Get Service Provinces Occupancy",
        "tags": [
          "warehouses"
        ]
      }
    },
    "/warehouses/{warehouse_id}": {
      "get": {
        "operationId": "get_warehouse_warehouses__warehouse_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "warehouse_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Warehouse Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseDetailOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Get Warehouse",
        "tags": [
          "warehouses"
        ]
      },
      "patch": {
        "operationId": "update_warehouse_warehouses__warehouse_id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "warehouse_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Warehouse Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WarehouseUpdateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseUpdateOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Update Warehouse",
        "tags": [
          "warehouses"
        ]
      }
    },
    "/warehouses/{warehouse_id}/service-cities": {
      "get": {
        "operationId": "get_service_cities_warehouses__warehouse_id__service_cities_get",
        "parameters": [
          {
            "in": "path",
            "name": "warehouse_id",
            "required": true,
            "schema": {
              "title": "Warehouse Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseServiceCitiesOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Service Cities",
        "tags": [
          "warehouses"
        ]
      },
      "put": {
        "operationId": "put_service_cities_warehouses__warehouse_id__service_cities_put",
        "parameters": [
          {
            "in": "path",
            "name": "warehouse_id",
            "required": true,
            "schema": {
              "title": "Warehouse Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WarehouseServiceCitiesPutIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseServiceCitiesOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Put Service Cities",
        "tags": [
          "warehouses"
        ]
      }
    },
    "/warehouses/{warehouse_id}/service-provinces": {
      "get": {
        "operationId": "get_service_provinces_warehouses__warehouse_id__service_provinces_get",
        "parameters": [
          {
            "in": "path",
            "name": "warehouse_id",
            "required": true,
            "schema": {
              "title": "Warehouse Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseServiceProvincesOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Service Provinces",
        "tags": [
          "warehouses"
        ]
      },
      "put": {
        "operationId": "put_service_provinces_warehouses__warehouse_id__service_provinces_put",
        "parameters": [
          {
            "in": "path",
            "name": "warehouse_id",
            "required": true,
            "schema": {
              "title": "Warehouse Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WarehouseServiceProvincesPutIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseServiceProvincesOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Put Service Provinces",
        "tags": [
          "warehouses"
        ]
      }
    },
    "/warehouses/{warehouse_id}/shipping-providers": {
      "get": {
        "operationId": "list_warehouse_shipping_providers_warehouses__warehouse_id__shipping_providers_get",
        "parameters": [
          {
            "in": "path",
            "name": "warehouse_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Warehouse Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseShippingProviderListOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "List Warehouse Shipping Providers",
        "tags": [
          "warehouses"
        ]
      },
      "put": {
        "operationId": "bulk_upsert_warehouse_shipping_providers_warehouses__warehouse_id__shipping_providers_put",
        "parameters": [
          {
            "in": "path",
            "name": "warehouse_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Warehouse Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WarehouseShippingProviderBulkUpsertIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseShippingProviderBulkUpsertOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Bulk Upsert Warehouse Shipping Providers",
        "tags": [
          "warehouses"
        ]
      }
    },
    "/warehouses/{warehouse_id}/shipping-providers/bind": {
      "post": {
        "operationId": "bind_shipping_provider_to_warehouse_warehouses__warehouse_id__shipping_providers_bind_post",
        "parameters": [
          {
            "in": "path",
            "name": "warehouse_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Warehouse Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WarehouseShippingProviderBindIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseShippingProviderBindOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Bind Shipping Provider To Warehouse",
        "tags": [
          "warehouses"
        ]
      }
    },
    "/warehouses/{warehouse_id}/shipping-providers/{shipping_provider_id}": {
      "delete": {
        "operationId": "unbind_shipping_provider_from_warehouse_warehouses__warehouse_id__shipping_providers__shipping_provider_id__delete",
        "parameters": [
          {
            "in": "path",
            "name": "warehouse_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Warehouse Id",
              "type": "integer"
            }
          },
          {
            "in": "path",
            "name": "shipping_provider_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Shipping Provider Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseShippingProviderDeleteOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Unbind Shipping Provider From Warehouse",
        "tags": [
          "warehouses"
        ]
      },
      "patch": {
        "operationId": "update_warehouse_shipping_provider_warehouses__warehouse_id__shipping_providers__shipping_provider_id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "warehouse_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Warehouse Id",
              "type": "integer"
            }
          },
          {
            "in": "path",
            "name": "shipping_provider_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Shipping Provider Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WarehouseShippingProviderUpdateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseShippingProviderUpdateOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Update Warehouse Shipping Provider",
        "tags": [
          "warehouses"
        ]
      }
    },
    "/zone-brackets/{bracket_id}": {
      "delete": {
        "operationId": "delete_zone_bracket_zone_brackets__bracket_id__delete",
        "parameters": [
          {
            "in": "path",
            "name": "bracket_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Bracket Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Delete Zone Bracket",
        "tags": [
          "shipping-provider-pricing"
        ]
      },
      "patch": {
        "operationId": "update_zone_bracket_zone_brackets__bracket_id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "bracket_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Bracket Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ZoneBracketUpdateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ZoneBracketOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Update Zone Bracket",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/zone-members/{member_id}": {
      "delete": {
        "operationId": "delete_zone_member_zone_members__member_id__delete",
        "parameters": [
          {
            "in": "path",
            "name": "member_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Member Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Delete Zone Member",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/zones/{target_zone_id}/brackets:copy": {
      "post": {
        "operationId": "copy_zone_brackets_zones__target_zone_id__brackets_copy_post",
        "parameters": [
          {
            "in": "path",
            "name": "target_zone_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Target Zone Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CopyZoneBracketsIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CopyZoneBracketsOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Copy Zone Brackets",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/zones/{zone_id}": {
      "delete": {
        "operationId": "delete_zone_zones__zone_id__delete",
        "parameters": [
          {
            "in": "path",
            "name": "zone_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Zone Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Delete Zone",
        "tags": [
          "shipping-provider-pricing"
        ]
      },
      "patch": {
        "operationId": "update_zone_zones__zone_id__patch",
        "parameters": [
          {
            "in": "path",
            "name": "zone_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Zone Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ZoneUpdateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ZoneOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Update Zone",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/zones/{zone_id}/archive-release-provinces": {
      "post": {
        "operationId": "archive_release_zone_provinces_zones__zone_id__archive_release_provinces_post",
        "parameters": [
          {
            "in": "path",
            "name": "zone_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Zone Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ZoneOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Archive Release Zone Provinces",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/zones/{zone_id}/brackets": {
      "post": {
        "operationId": "create_zone_bracket_zones__zone_id__brackets_post",
        "parameters": [
          {
            "in": "path",
            "name": "zone_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Zone Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ZoneBracketCreateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ZoneBracketOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Create Zone Bracket",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/zones/{zone_id}/members": {
      "post": {
        "operationId": "create_zone_member_zones__zone_id__members_post",
        "parameters": [
          {
            "in": "path",
            "name": "zone_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Zone Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ZoneMemberCreateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ZoneMemberOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Create Zone Member",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    },
    "/zones/{zone_id}/province-members": {
      "put": {
        "operationId": "replace_zone_province_members_zones__zone_id__province_members_put",
        "parameters": [
          {
            "in": "path",
            "name": "zone_id",
            "required": true,
            "schema": {
              "minimum": 1,
              "title": "Zone Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ZoneProvinceMembersReplaceIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ZoneOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "summary": "Replace Zone Province Members",
        "tags": [
          "shipping-provider-pricing"
        ]
      }
    }
  }
}
