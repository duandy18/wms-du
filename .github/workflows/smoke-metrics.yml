name: Smoke - Metrics

on:
  pull_request:
    branches: [ "main" ]
  workflow_dispatch:

jobs:
  smoke-metrics:
    # 默认不跑；仅当手动触发或 PR 打了 'run-legacy-ci' 标签时才运行
    if: >
      github.event_name == 'workflow_dispatch' ||
      (github.event_name == 'pull_request' &&
       contains(github.event.pull_request.labels.*.name, 'run-legacy-ci'))
    runs-on: Ubuntu-latest
    steps:
      - name: Legacy smoke-metrics gated by label
        run: echo "Legacy smoke-metrics is gated by label 'run-legacy-ci' or manual dispatch."
